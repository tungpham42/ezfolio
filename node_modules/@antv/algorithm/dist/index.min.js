!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Algorithm=t():e.Algorithm=t()}(this,(function(){return(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{default:()=>ue});const r=function(e,t){var r=e.nodes,n=e.edges,o=[],i={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach((function(e,t){i[e.id]=t,o.push([])})),n&&n.forEach((function(e){var r=e.source,n=e.target,a=i[r],d=i[n];!a&&0!==a||!d&&0!==d||(o[a][d]=1,t||(o[d][a]=1))})),o};var n=function(e,t){return e===t},o=function(){function e(e,t){void 0===t&&(t=null),this.value=e,this.next=t}return e.prototype.toString=function(e){return e?e(this.value):"".concat(this.value)},e}();const i=function(){function e(e){void 0===e&&(e=n),this.head=null,this.tail=null,this.compare=e}return e.prototype.prepend=function(e){var t=new o(e,this.head);return this.head=t,this.tail||(this.tail=t),this},e.prototype.append=function(e){var t=new o(e);return this.head?(this.tail.next=t,this.tail=t,this):(this.head=t,this.tail=t,this)},e.prototype.delete=function(e){if(!this.head)return null;for(var t=null;this.head&&this.compare(this.head.value,e);)t=this.head,this.head=this.head.next;var r=this.head;if(null!==r)for(;r.next;)this.compare(r.next.value,e)?(t=r.next,r.next=r.next.next):r=r.next;return this.compare(this.tail.value,e)&&(this.tail=r),t},e.prototype.find=function(e){var t=e.value,r=void 0===t?void 0:t,n=e.callback,o=void 0===n?void 0:n;if(!this.head)return null;for(var i=this.head;i;){if(o&&o(i.value))return i;if(void 0!==r&&this.compare(i.value,r))return i;i=i.next}return null},e.prototype.deleteTail=function(){var e=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,e;for(var t=this.head;t.next;)t.next.next?t=t.next:t.next=null;return this.tail=t,e},e.prototype.deleteHead=function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e},e.prototype.fromArray=function(e){var t=this;return e.forEach((function(e){return t.append(e)})),this},e.prototype.toArray=function(){for(var e=[],t=this.head;t;)e.push(t),t=t.next;return e},e.prototype.reverse=function(){for(var e=this.head,t=null,r=null;e;)r=e.next,e.next=t,t=e,e=r;this.tail=this.head,this.head=t},e.prototype.toString=function(e){return void 0===e&&(e=void 0),this.toArray().map((function(t){return t.toString(e)})).toString()},e}(),a=function(){function e(){this.linkedList=new i}return e.prototype.isEmpty=function(){return!this.linkedList.head},e.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},e.prototype.enqueue=function(e){this.linkedList.append(e)},e.prototype.dequeue=function(){var e=this.linkedList.deleteHead();return e?e.value:null},e.prototype.toString=function(e){return this.linkedList.toString(e)},e}();var d=function(e,t,r){void 0===t&&(t=[]);var n=t.filter((function(t){return t.source===e||t.target===e}));return"target"===r?n.filter((function(t){return t.source===e})).map((function(e){return e.target})):"source"===r?n.filter((function(t){return t.target===e})).map((function(e){return e.source})):n.map((function(t){return t.source===e?t.target:t.source}))},u=function(e,t){return t.filter((function(t){return t.source===e||t.target===e}))},s=function(e){void 0===e&&(e=0);var t="".concat(Math.random()).split(".")[1].substr(0,5),r="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(e,"-").concat(t).concat(r)};var c=function(e){for(var t=e.nodes,r=void 0===t?[]:t,n=e.edges,o=void 0===n?[]:n,i=[],a={},u={},s={},c=[],f=0,h=function(e){u[e.id]=f,s[e.id]=f,f+=1,i.push(e),a[e.id]=!0;for(var t=d(e.id,o,"target").filter((function(e){return r.map((function(e){return e.id})).indexOf(e)>-1})),n=function(n){var o=t[n];if(u[o]||0===u[o])a[o]&&(s[e.id]=Math.min(s[e.id],u[o]));else{var i=r.filter((function(e){return e.id===o}));i.length>0&&h(i[0]),s[e.id]=Math.min(s[e.id],s[o])}},l=0;l<t.length;l++)n(l);if(s[e.id]===u[e.id]){for(var v=[];i.length>0;){var p=i.pop();if(a[p.id]=!1,v.push(p),p===e)break}v.length>0&&c.push(v)}},l=0,v=r;l<v.length;l++){var p=v[l];u[p.id]||0===u[p.id]||h(p)}return c};function f(e,t){return t?c(e):function(e){for(var t=e.nodes,r=void 0===t?[]:t,n=e.edges,o=void 0===n?[]:n,i=[],a={},u=[],s=function(e){u.push(e),a[e.id]=!0;for(var t=d(e.id,o),n=function(e){var n=t[e];if(!a[n]){var o=r.filter((function(e){return e.id===n}));o.length>0&&s(o[0])}},i=0;i<t.length;++i)n(i)},c=0;c<r.length;c++){var f=r[c];if(!a[f.id]){s(f);for(var h=[];u.length>0;)h.push(u.pop());i.push(h)}}return i}(e)}var h=function(e){var t={},r=e.nodes,n=void 0===r?[]:r,o=e.edges,i=void 0===o?[]:o;return n.forEach((function(e){t[e.id]={degree:0,inDegree:0,outDegree:0}})),i.forEach((function(e){t[e.source].degree++,t[e.source].outDegree++,t[e.target].degree++,t[e.target].inDegree++})),t};const l=h;function v(e,t,r,n){n.enter({current:t,previous:r});var o=e.edges;d(t,void 0===o?[]:o,"target").forEach((function(o){n.allowTraversal({previous:r,current:t,next:o})&&v(e,o,t,n)})),n.leave({current:t,previous:r})}function p(e,t,r){v(e,t,"",function(e){void 0===e&&(e={});var t,r=e,n=function(){},o=(t={},function(e){var r=e.next;return!t[r]&&(t[r]=!0,!0)});return r.allowTraversal=e.allowTraversal||o,r.enter=e.enter||n,r.leave=e.leave||n,r}(r))}var g=function(e,t,r){var n,o;void 0===r&&(r=!0);for(var i=[],a=0,u=f(e,!1);a<u.length;a++){var s=u[a];if(s.length)for(var c=s[0],h=c.id,l=[c],v=((n={})[h]=c,n),p=((o={})[h]=new Set,o);l.length>0;)for(var g=l.pop(),b=g.id,E=d(b,e.edges),y=function(n){var o,a=E[n],d=e.nodes.find((function(e){return e.id===a}));if(a===b)i.push(((o={})[a]=g,o));else if(a in p){if(!p[b].has(d)){for(var u=!0,s=[d,g],c=v[b];p[a].size&&!p[a].has(c)&&(s.push(c),c!==v[c.id]);)c=v[c.id];if(s.push(c),t&&r?(u=!1,s.findIndex((function(e){return t.indexOf(e.id)>-1}))>-1&&(u=!0)):t&&!r&&s.findIndex((function(e){return t.indexOf(e.id)>-1}))>-1&&(u=!1),u){for(var f={},h=1;h<s.length;h+=1)f[s[h-1].id]=s[h];s.length&&(f[s[s.length-1].id]=s[0]),i.push(f)}p[a].add(g)}}else v[a]=g,l.push(d),p[a]=new Set([g])},m=0;m<E.length;m+=1)y(m)}return i},b=function(e,t,r){void 0===r&&(r=!0);for(var n=[],o=new Set,i=[],a=[],u={},s={},f=function(e,d,s){var c=!1;if(t&&!1===r&&t.indexOf(e.id)>-1)return c;n.push(e),o.add(e);for(var h=s[e.id],l=0;l<h.length;l+=1)if((g=u[h[l]])===d){for(var v={},p=1;p<n.length;p+=1)v[n[p-1].id]=n[p];n.length&&(v[n[n.length-1].id]=n[0]),a.push(v),c=!0}else o.has(g)||f(g,d,s)&&(c=!0);if(c)!function(e){for(var t=[e];t.length>0;){var r=t.pop();o.has(r)&&(o.delete(r),i[r.id].forEach((function(e){t.push(e)})),i[r.id].clear())}}(e);else for(l=0;l<h.length;l+=1){var g=u[h[l]];i[g.id].has(e)||i[g.id].add(e)}return n.pop(),c},h=e.nodes,l=void 0===h?[]:h,v=0;v<l.length;v+=1){var p=l[v],g=p.id;s[g]=v,u[v]=p}if(t&&r){var b=function(e){var r=t[e];s[l[e].id]=s[r],s[r]=0,u[0]=l.find((function(e){return e.id===r})),u[s[l[e].id]]=l[e]};for(v=0;v<t.length;v++)b(v)}for(var E=function(n){for(var o,i,u=1/0,c=0;c<n.length;c+=1)for(var f=n[c],h=0;h<f.length;h++){var l=s[f[h].id];l<u&&(u=l,i=c)}var v=n[i],p=[];for(c=0;c<v.length;c+=1){var g=v[c];p[g.id]=[];for(var b=0,E=d(g.id,e.edges,"target").filter((function(e){return v.map((function(e){return e.id})).indexOf(e)>-1}));b<E.length;b++){var y=E[b];y!==g.id||!1===r&&t.indexOf(g.id)>-1?p[g.id].push(s[y]):a.push(((o={})[g.id]=g,o))}}return{component:v,adjList:p,minIdx:u}},y=0;y<l.length;){var m=l.filter((function(e){return s[e.id]>=y})),L=c({nodes:m,edges:e.edges}).filter((function(e){return e.length>1}));if(0===L.length)break;var N=E(L),w=N.minIdx,k=N.adjList,x=N.component;if(!(x.length>1))break;x.forEach((function(e){i[e.id]=new Set}));var I=u[w];if(t&&r&&-1===t.indexOf(I.id))return a;f(I,I,k),y=w+1}return a};const E=function(e){var t=null,r=e.nodes,n={},o={},i={},a={};(void 0===r?[]:r).forEach((function(e){o[e.id]=e}));for(var d={enter:function(e){var r=e.current,a=e.previous;if(i[r]){t={};for(var d=r,u=a;u!==r;)t[d]=u,d=u,u=n[u];t[d]=u}else i[r]=r,delete o[r],n[r]=a},leave:function(e){var t=e.current;a[t]=t,delete i[t]},allowTraversal:function(e){var r=e.next;return!t&&!a[r]}};Object.keys(o).length;)p(e,Object.keys(o)[0],d);return t};function y(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}Object.create,Object.create;var m={}.toString;const L=function(e,t){return m.call(e)==="[object "+t+"]"},N=function(e){return L(e,"Function")},w=function(e){return Array.isArray?Array.isArray(e):L(e,"Array")};Object.keys;var k=Array.prototype;function x(e,t){void 0===t&&(t=new Map);var r=[];if(Array.isArray(e))for(var n=0,o=e.length;n<o;n++){var i=e[n];t.has(i)||(r.push(i),t.set(i,!0))}return r}k.splice,k.indexOf,Array.prototype.splice,Object.prototype.hasOwnProperty;Number.isInteger&&Number.isInteger,Math.PI,parseInt,Math.PI;Object.values;Object.prototype;const I=function e(t){if("object"!=typeof t||null===t)return t;var r;if(w(t)){r=[];for(var n=0,o=t.length;n<o;n++)"object"==typeof t[n]&&null!=t[n]?r[n]=e(t[n]):r[n]=t[n]}else for(var i in r={},t)"object"==typeof t[i]&&null!=t[i]?r[i]=e(t[i]):r[i]=t[i];return r};var M;Object.prototype.hasOwnProperty,Object.prototype.hasOwnProperty,function(e,t){if(!N(e))throw new TypeError("Expected a function");new Map}((function(e,t){void 0===t&&(t={});var r,n=t.fontSize,o=t.fontFamily,i=t.fontWeight,a=t.fontStyle,d=t.fontVariant;return M||(M=document.createElement("canvas").getContext("2d")),M.font=[a,d,i,n+"px",o].join(" "),M.measureText((r=e,L(r,"String")?e:"")).width})),function(){function e(){this.map={}}e.prototype.has=function(e){return void 0!==this.map[e]},e.prototype.get=function(e,t){var r=this.map[e];return void 0===r?t:r},e.prototype.set=function(e,t){this.map[e]=t},e.prototype.clear=function(){this.map={}},e.prototype.delete=function(e){delete this.map[e]},e.prototype.size=function(){return Object.keys(this.map).length}}();const j=function(e,t,r,n){var o=e.nodes,i=void 0===o?[]:o,a=e.edges,d=void 0===a?[]:a,s=[],c={},f={},h={};i.forEach((function(e,r){var n=e.id;s.push(n),f[n]=1/0,n===t&&(f[n]=0)}));for(var l=i.length,v=function(e){var t=function(e,t,r){for(var n,o=1/0,i=0;i<t.length;i++){var a=t[i].id;!r[a]&&e[a]<=o&&(o=e[a],n=t[i])}return n}(f,i,c),o=t.id;if(c[o]=!0,f[o]===1/0)return"continue";var a=[];a=r?function(e,t){return t.filter((function(t){return t.source===e}))}(o,d):u(o,d),a.forEach((function(e){var r=e.target,i=e.source,a=r===o?i:r,d=n&&e[n]?e[n]:1;f[a]>f[t.id]+d?(f[a]=f[t.id]+d,h[a]=[t.id]):f[a]===f[t.id]+d&&h[a].push(t.id)}))},p=0;p<l;p++)v();h[t]=[t];var g={};for(var b in f)f[b]!==1/0&&O(t,b,h,g);var E={};for(var b in g)E[b]=g[b][0];return{length:f,path:E,allPath:g}};function O(e,t,r,n){if(e===t)return[e];if(n[t])return n[t];for(var o=[],i=0,a=r[t];i<a.length;i++){var d=O(e,a[i],r,n);if(!d)return;for(var u=0,s=d;u<s.length;u++){var c=s[u];w(c)?o.push(y(y([],c,!0),[t],!1)):o.push([c,t])}}return n[t]=o,n[t]}const D=function(e,t){for(var n=r(e,t),o=[],i=n.length,a=0;a<i;a+=1){o[a]=[];for(var d=0;d<i;d+=1)a===d?o[a][d]=0:0!==n[a][d]&&n[a][d]?o[a][d]=n[a][d]:o[a][d]=1/0}for(var u=0;u<i;u+=1)for(a=0;a<i;a+=1)for(d=0;d<i;d+=1)o[a][d]>o[a][u]+o[u][d]&&(o[a][d]=o[a][u]+o[u][d]);return o};const S=function(){function e(e){this.arr=e}return e.prototype.add=function(t){var r,n=t.arr;if(!(null===(r=this.arr)||void 0===r?void 0:r.length))return new e(n);if(!(null==n?void 0:n.length))return new e(this.arr);if(this.arr.length===n.length){var o=[];for(var i in this.arr)o[i]=this.arr[i]+n[i];return new e(o)}},e.prototype.subtract=function(t){var r,n=t.arr;if(!(null===(r=this.arr)||void 0===r?void 0:r.length))return new e(n);if(!(null==n?void 0:n.length))return new e(this.arr);if(this.arr.length===n.length){var o=[];for(var i in this.arr)o[i]=this.arr[i]-n[i];return new e(o)}},e.prototype.avg=function(t){var r=[];for(var n in this.arr)r[n]=this.arr[n]/t;return new e(r)},e.prototype.negate=function(){var t=[];for(var r in this.arr)t[r]=-this.arr[r];return new e(t)},e.prototype.squareEuclideanDistance=function(e){var t,r=e.arr;if(!(null===(t=this.arr)||void 0===t?void 0:t.length)||!(null==r?void 0:r.length))return 0;if(this.arr.length===r.length){var n=0;for(var o in this.arr)n+=Math.pow(this.arr[o]-e.arr[o],2);return n}},e.prototype.normalize=function(){var t=[],r=I(this.arr);r.sort((function(e,t){return e-t}));var n=r[r.length-1],o=r[0];for(var i in this.arr)t[i]=(this.arr[i]-o)/(n-o);return new e(t)},e.prototype.norm2=function(){var e;if(!(null===(e=this.arr)||void 0===e?void 0:e.length))return 0;var t=0;for(var r in this.arr)t+=Math.pow(this.arr[r],2);return Math.sqrt(t)},e.prototype.dot=function(e){var t,r=e.arr;if(!(null===(t=this.arr)||void 0===t?void 0:t.length)||!(null==r?void 0:r.length))return 0;if(this.arr.length===r.length){var n=0;for(var o in this.arr)n+=this.arr[o]*e.arr[o];return n}},e}();var C=function(e,t){void 0===t&&(t="properties");var r=[];return e.forEach((function(e){e.properties&&r.push(e[t])})),r},P=function(e,t,r){var n=function(e,t,r){var n=[];(null==t?void 0:t.length)?n=t:(e.forEach((function(e){n=n.concat(Object.keys(e))})),n=x(n));var o={};return n.forEach((function(t){var n=[];e.forEach((function(e){void 0!==e[t]&&""!==e[t]&&n.push(e[t])})),n.length&&!(null==r?void 0:r.includes(t))&&(o[t]=x(n))})),o}(e,t,r),o=[];return e.forEach((function(e,t){var r=[];Object.keys(n).forEach((function(t){for(var o=e[t],i=n[t],a=i.findIndex((function(e){return o===e})),d=[],u=0;u<i.length;u++)u===a?d.push(1):d.push(0);r=r.concat(d)})),o[t]=r})),o},A=function(e,t,r,n){for(var o=t.length,i=2*n,a=0,d=0;d<o;d++)for(var u=e[d].clusterId,s=0;s<o;s++)u===e[s].clusterId&&(a+=(t[d][s]||0)-(r[d]||0)*(r[s]||0)/i);return a*(1/i)},T=function(e,t){void 0===e&&(e=[]);for(var r=e.length,n=new S([]),o=0;o<r;o++)n=n.add(new S(t[o]));var i=n.avg(r);i.normalize();var a=0;for(o=0;o<r;o++)a+=(u=new S(t[o])).squareEuclideanDistance(i);var d=[];for(e.forEach((function(){d.push([])})),o=0;o<r;o++){var u=new S(t[o]);e[o].clusterInertial=0;for(var s=0;s<r;s++)if(o!==s){var c=new S(t[s]);d[o][s]=u.squareEuclideanDistance(c),e[o].clusterInertial+=d[o][s]}else d[o][s]=0}var f=0,h=2*r*a;for(o=0;o<r;o++){var l=e[o].clusterId;for(s=0;s<r;s++){var v=e[s].clusterId;o!==s&&l===v&&(f+=e[o].clusterInertial*e[s].clusterInertial/Math.pow(h,2)-d[o][s]/h)}}return Number(f.toFixed(4))};const q=function(e,t,n,o,i,a){void 0===t&&(t=!1),void 0===n&&(n="weight"),void 0===o&&(o=1e-4),void 0===i&&(i=!1),void 0===a&&(a=1);var d=e.nodes,u=void 0===d?[]:d,s=e.edges,c=void 0===s?[]:s,f=[];if(i){u.forEach((function(e,t){e.properties=e.properties||{},e.originIndex=t}));var h=[];u.every((function(e){return e.hasOwnProperty("nodeType")}))&&(h=Array.from(new Set(u.map((function(e){return e.nodeType})))),u.forEach((function(e){e.properties.nodeType=h.findIndex((function(t){return t===e.nodeType}))})));var l=C(u);f=P(l)}var v=1,p={},g={};u.forEach((function(e,t){var r=String(v++);e.clusterId=r,p[r]={id:r,nodes:[e]},g[e.id]={node:e,idx:t}}));var b=r(e,t),E=[],y={},m=0;b.forEach((function(e,t){var r=0,n=u[t].id;y[n]={},e.forEach((function(e,t){if(e){r+=e;var o=u[t].id;y[n][o]=e,m+=e}})),E.push(r)})),m/=2;for(var L=1/0,N=1/0,w=0,k=[],x={};;){L=i&&u.every((function(e){return e.hasOwnProperty("properties")}))?A(u,b,E,m)+T(u,f)*a:A(u,b,E,m),0===w&&(N=L,k=u,x=p);var M=L>0&&L>N&&L-N<o;if(L>N&&(k=u.map((function(e){return{node:e,clusterId:e.clusterId}})),x=I(p),N=L),M||w>100)break;w++,Object.keys(p).forEach((function(e){var t=0;c.forEach((function(r){var o=r.source,i=r.target,a=g[o].node.clusterId,d=g[i].node.clusterId;(a===e&&d!==e||d===e&&a!==e)&&(t+=r[n]||1)})),p[e].sumTot=t})),u.forEach((function(e,t){var r,o=p[e.clusterId],d=0,u=E[t]/(2*m),s=0,h=o.nodes;h.forEach((function(e){var r=g[e.id].idx;s+=b[t][r]||0}));var l=s-o.sumTot*u,v=h.filter((function(t){return t.id!==e.id})),L=[];v.forEach((function(e,t){L[t]=f[e.originIndex]}));var N=T(v,f)*a,w=y[e.id];if(Object.keys(w).forEach((function(n){var o=g[n].node.clusterId;if(o!==e.clusterId){var s=p[o],c=s.nodes;if(c&&c.length){var h=0;c.forEach((function(e){var r=g[e.id].idx;h+=b[t][r]||0}));var v=h-s.sumTot*u,E=c.concat([e]),y=[];E.forEach((function(e,t){y[t]=f[e.originIndex]}));var m=T(E,f)*a,L=v-l;i&&(L=v+m-(l+N)),L>d&&(d=L,r=s)}}})),d>0){r.nodes.push(e);var k=e.clusterId;e.clusterId=r.id;var x=o.nodes.indexOf(e);o.nodes.splice(x,1);var I=0,M=0;c.forEach((function(e){var t=e.source,o=e.target,i=g[t].node.clusterId,a=g[o].node.clusterId;(i===r.id&&a!==r.id||a===r.id&&i!==r.id)&&(I+=e[n]||1),(i===k&&a!==k||a===k&&i!==k)&&(M+=e[n]||1)})),r.sumTot=I,o.sumTot=M}}))}var j={},O=0;Object.keys(x).forEach((function(e){var t=x[e];if(t.nodes&&t.nodes.length){var r=String(O+1);r!==e&&(t.id=r,t.nodes=t.nodes.map((function(e){return{id:e.id,clusterId:r}})),x[r]=t,j[e]=r,delete x[e],O++)}else delete x[e]})),k.forEach((function(e){var t=e.node,r=e.clusterId;t.clusterId=r,t.clusterId&&j[t.clusterId]&&(t.clusterId=j[t.clusterId])}));var D=[],S={};c.forEach((function(e){var t=e.source,r=e.target,o=e[n]||1,i=g[t].node.clusterId,a=g[r].node.clusterId,d="".concat(i,"---").concat(a);if(S[d])S[d].weight+=o,S[d].count++;else{var u={source:i,target:a,weight:o,count:1};S[d]=u,D.push(u)}}));var q=[];return Object.keys(x).forEach((function(e){q.push(x[e])})),{clusters:q,clusterEdges:D}},F=function(e,t){var r=new S(t),n=r.norm2(),o=new S(e),i=o.norm2(),a=r.dot(o),d=n*i;return d?a/d:0},R=function(){function e(e){this.count=e.length,this.parent={};for(var t=0,r=e;t<r.length;t++){var n=r[t];this.parent[n]=n}}return e.prototype.find=function(e){for(;this.parent[e]!==e;)e=this.parent[e];return e},e.prototype.union=function(e,t){var r=this.find(e),n=this.find(t);r!==n&&(r<n?(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]):(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]))},e.prototype.connected=function(e,t){return this.find(e)===this.find(t)},e}();var G=function(e,t){return e-t};const U=function(){function e(e){void 0===e&&(e=G),this.compareFn=e,this.list=[]}return e.prototype.getLeft=function(e){return 2*e+1},e.prototype.getRight=function(e){return 2*e+2},e.prototype.getParent=function(e){return 0===e?null:Math.floor((e-1)/2)},e.prototype.isEmpty=function(){return this.list.length<=0},e.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},e.prototype.delMin=function(){var e=this.top(),t=this.list.pop();return this.list.length>0&&(this.list[0]=t,this.moveDown(0)),e},e.prototype.insert=function(e){if(null!==e){this.list.push(e);var t=this.list.length-1;return this.moveUp(t),!0}return!1},e.prototype.moveUp=function(e){for(var t=this.getParent(e);e&&e>0&&this.compareFn(this.list[t],this.list[e])>0;){var r=this.list[t];this.list[t]=this.list[e],this.list[e]=r,e=t,t=this.getParent(e)}},e.prototype.moveDown=function(e){var t,r=e,n=this.getLeft(e),o=this.getRight(e),i=this.list.length;null!==n&&n<i&&this.compareFn(this.list[r],this.list[n])>0?r=n:null!==o&&o<i&&this.compareFn(this.list[r],this.list[o])>0&&(r=o),e!==r&&(t=[this.list[r],this.list[e]],this.list[e]=t[0],this.list[r]=t[1],this.moveDown(r))},e}();var z=function(e,t){var r=[],n=e.nodes,o=void 0===n?[]:n,i=e.edges,a=void 0===i?[]:i;if(0===o.length)return r;var d=o[0],s=new Set;s.add(d);var c=new U((function(e,r){return t?e.weight-r.weight:0}));for(u(d.id,a).forEach((function(e){c.insert(e)}));!c.isEmpty();){var f=c.delMin(),h=f.source,l=f.target;s.has(h)&&s.has(l)||(r.push(f),s.has(h)||(s.add(h),u(h,a).forEach((function(e){c.insert(e)}))),s.has(l)||(s.add(l),u(l,a).forEach((function(e){c.insert(e)}))))}return r},B=function(e,t){var r=[],n=e.nodes,o=void 0===n?[]:n,i=e.edges,a=void 0===i?[]:i;if(0===o.length)return r;var d=a.map((function(e){return e}));t&&d.sort((function(e,t){return e.weight-t.weight}));for(var u=new R(o.map((function(e){return e.id})));d.length>0;){var s=d.shift(),c=s.source,f=s.target;u.connected(c,f)||(r.push(s),u.union(c,f))}return r};var H="-1",W=function(e,t,r,n){void 0===e&&(e=-1),void 0===t&&(t=-1),void 0===r&&(r=-1),void 0===n&&(n="-1"),this.id=e,this.from=t,this.to=r,this.label=n},K=function(){function e(e,t){void 0===e&&(e=-1),void 0===t&&(t=H),this.id=e,this.label=t,this.edges=[],this.edgeMap={}}return e.prototype.addEdge=function(e){this.edges.push(e),this.edgeMap[e.id]=e},e}(),V=function(){function e(e,t,r){void 0===e&&(e=-1),void 0===t&&(t=!0),void 0===r&&(r=!1),this.id=e,this.edgeIdAutoIncrease=t,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=r}return e.prototype.getNodeNum=function(){return this.nodes.length},e.prototype.addNode=function(e,t){if(!this.nodeMap[e]){var r=new K(e,t);this.nodes.push(r),this.nodeMap[e]=r,this.nodeLabelMap[t]||(this.nodeLabelMap[t]=[]),this.nodeLabelMap[t].push(e)}},e.prototype.addEdge=function(e,t,r,n){if((this.edgeIdAutoIncrease||void 0===e)&&(e=this.counter++),!(this.nodeMap[t]&&this.nodeMap[r]&&this.nodeMap[r].edgeMap[e])){var o=new W(e,t,r,n);if(this.edges.push(o),this.edgeMap[e]=o,this.nodeMap[t].addEdge(o),this.edgeLabelMap[n]||(this.edgeLabelMap[n]=[]),this.edgeLabelMap[n].push(o),!this.directed){var i=new W(e,r,t,n);this.nodeMap[r].addEdge(i),this.edgeLabelMap[n].push(i)}}},e}(),J=function(){function e(e,t,r,n,o){this.fromNode=e,this.toNode=t,this.nodeEdgeNodeLabel={nodeLabel1:r||H,edgeLabel:n||"-1",nodeLabel2:o||H}}return e.prototype.equalTo=function(e){return this.fromNode===e.formNode&&this.toNode===e.toNode&&this.nodeEdgeNodeLabel===e.nodeEdgeNodeLabel},e.prototype.notEqualTo=function(e){return!this.equalTo(e)},e}(),Q=function(){function e(){this.rmpath=[],this.dfsEdgeList=[]}return e.prototype.equalTo=function(e){var t=this.dfsEdgeList.length;if(t!==e.length)return!1;for(var r=0;r<t;r++)if(this.dfsEdgeList[r]!==e[r])return!1;return!0},e.prototype.notEqualTo=function(e){return!this.equalTo(e)},e.prototype.pushBack=function(e,t,r,n,o){return this.dfsEdgeList.push(new J(e,t,r,n,o)),this.dfsEdgeList},e.prototype.toGraph=function(e,t){void 0===e&&(e=-1),void 0===t&&(t=!1);var r=new V(e,!0,t);return this.dfsEdgeList.forEach((function(e){var t=e.fromNode,n=e.toNode,o=e.nodeEdgeNodeLabel,i=o.nodeLabel1,a=o.edgeLabel,d=o.nodeLabel2;i!==H&&r.addNode(t,i),d!==H&&r.addNode(n,d),i!==H&&d!==i&&r.addEdge(void 0,t,n,a)})),r},e.prototype.buildRmpath=function(){this.rmpath=[];for(var e=void 0,t=this.dfsEdgeList.length-1;t>=0;t--){var r=this.dfsEdgeList[t],n=r.fromNode,o=r.toNode;n<o&&(void 0===e||o===e)&&(this.rmpath.push(t),e=n)}return this.rmpath},e.prototype.getNodeNum=function(){var e={};return this.dfsEdgeList.forEach((function(t){e[t.fromNode]||(e[t.fromNode]=!0),e[t.toNode]||(e[t.toNode]=!0)})),Object.keys(e).length},e}(),X=function(){function e(e){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],e){for(;e;){var t=e.edge;this.edges.push(t),this.nodesUsed[t.from]=1,this.nodesUsed[t.to]=1,this.edgesUsed[t.id]=1,e=e.preNode}this.edges=this.edges.reverse()}}return e.prototype.hasNode=function(e){return 1===this.nodesUsed[e.id]},e.prototype.hasEdge=function(e){return 1===this.edgesUsed[e.id]},e}(),Y=function(){function e(e){var t=e.graphs,r=e.minSupport,n=void 0===r?2:r,o=e.minNodeNum,i=void 0===o?1:o,a=e.maxNodeNum,d=void 0===a?4:a,u=e.top,s=void 0===u?10:u,c=e.directed,f=void 0!==c&&c,h=e.verbose,l=void 0!==h&&h;this.graphs=t,this.dfsCode=new Q,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=n,this.top=s,this.directed=f,this.counter=0,this.maxNodeNum=d,this.minNodeNum=i,this.verbose=l,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return e.prototype.findForwardRootEdges=function(e,t){var r=this,n=[],o=e.nodeMap;return t.edges.forEach((function(e){(r.directed||t.label<=o[e.to].label)&&n.push(e)})),n},e.prototype.findBackwardEdge=function(e,t,r,n){if(!this.directed&&t===r)return null;for(var o=e.nodeMap,i=o[r.to].edges,a=i.length,d=0;d<a;d++){var u=i[d];if(!n.hasEdge(u)&&u.to===t.from)if(this.directed){if(o[t.from].label<o[r.to].label||o[t.from].label===o[r.to].label&&t.label<=u.label)return u}else if(t.label<u.label||t.label===u.label&&o[t.to].label<=o[r.to].label)return u}return null},e.prototype.findForwardPureEdges=function(e,t,r,n){for(var o=[],i=t.to,a=e.nodeMap[i].edges,d=a.length,u=0;u<d;u++){var s=a[u],c=e.nodeMap[s.to];r<=c.label&&!n.hasNode(c)&&o.push(s)}return o},e.prototype.findForwardRmpathEdges=function(e,t,r,n){for(var o=[],i=e.nodeMap,a=i[t.to].label,d=i[t.from].edges,u=d.length,s=0;s<u;s++){var c=d[s],f=i[c.to].label;t.to===c.to||r>f||n.hasNode(i[c.to])||(t.label<c.label||t.label===c.label&&a<=f)&&o.push(c)}return o},e.prototype.getSupport=function(e){var t={};return e.forEach((function(e){t[e.graphId]||(t[e.graphId]=!0)})),Object.keys(t).length},e.prototype.findMinLabel=function(e){var t=void 0;return Object.keys(e).forEach((function(r){var n=e[r],o=n.nodeLabel1,i=n.edgeLabel,a=n.nodeLabel2;t?(o<t.nodeLabel1||o===t.nodeLabel1&&i<t.edgeLabel||o===t.nodeLabel1&&i===t.edgeLabel&&a<t.nodeLabel2)&&(t={nodeLabel1:o,edgeLabel:i,nodeLabel2:a}):t={nodeLabel1:o,edgeLabel:i,nodeLabel2:a}})),t},e.prototype.isMin=function(){var e=this,t=this.dfsCode;if(this.verbose&&console.log("isMin checking",t),1===t.dfsEdgeList.length)return!0;var r=this.directed,n=t.toGraph(-1,r),o=n.nodeMap,i=new Q,a={};n.nodes.forEach((function(t){e.findForwardRootEdges(n,t).forEach((function(e){var r=o[e.to],i="".concat(t.label,"-").concat(e.label,"-").concat(r.label);a[i]||(a[i]={projected:[],nodeLabel1:t.label,edgeLabel:e.label,nodeLabel2:r.label});var d={graphId:n.id,edge:e,preNode:null};a[i].projected.push(d)}))}));var d=this.findMinLabel(a);if(d){i.dfsEdgeList.push(new J(0,1,d.nodeLabel1,d.edgeLabel,d.nodeLabel2));var u=function(a){for(var d=i.buildRmpath(),s=i.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,c=i.dfsEdgeList[d[0]].toNode,f={},h=!1,l=0,v=r?-1:0,p=function(t){if(h)return"break";a.forEach((function(r){var o=new X(r),a=e.findBackwardEdge(n,o.edges[d[t]],o.edges[d[0]],o);a&&(f[a.label]||(f[a.label]={projected:[],edgeLabel:a.label}),f[a.label].projected.push({graphId:n.id,edge:f,preNode:r}),l=i.dfsEdgeList[d[t]].fromNode,h=!0)}))},g=d.length-1;g>v&&"break"!==p(g);g--);if(h){var b=e.findMinLabel(f);i.dfsEdgeList.push(new J(c,l,H,b.edgeLabel,H));var E=i.dfsEdgeList.length-1;return e.dfsCode.dfsEdgeList[E]===i.dfsEdgeList[E]&&u(f[b.edgeLabel].projected)}var y={};h=!1;var m=0;a.forEach((function(t){var r=new X(t),i=e.findForwardPureEdges(n,r.edges[d[0]],s,r);i.length>0&&(h=!0,m=c,i.forEach((function(e){var r="".concat(e.label,"-").concat(o[e.to].label);y[r]||(y[r]={projected:[],edgeLabel:e.label,nodeLabel2:o[e.to].label}),y[r].projected.push({graphId:n.id,edge:e,preNode:t})})))}));var L=d.length,N=function(t){if(h)return"break";var r=d[t];a.forEach((function(t){var a=new X(t),d=e.findForwardRmpathEdges(n,a.edges[r],s,a);d.length>0&&(h=!0,m=i.dfsEdgeList[r].fromNode,d.forEach((function(e){var r="".concat(e.label,"-").concat(o[e.to].label);y[r]||(y[r]={projected:[],edgeLabel:e.label,nodeLabel2:o[e.to].label}),y[r].projected.push({graphId:n.id,edge:e,preNode:t})})))}))};for(g=0;g<L&&"break"!==N(g);g++);if(!h)return!0;var w=e.findMinLabel(y);i.dfsEdgeList.push(new J(m,c+1,H,w.edgeLabel,w.nodeLabel2));var k=i.dfsEdgeList.length-1;return t.dfsEdgeList[k]===i.dfsEdgeList[k]&&u(y["".concat(w.edgeLabel,"-").concat(w.nodeLabel2)].projected)},s="".concat(d.nodeLabel1,"-").concat(d.edgeLabel,"-").concat(d.nodeLabel2);return u(a[s].projected)}},e.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var e=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push(I(e))}},e.prototype.subGraphMining=function(e){var t=this;if(!(this.getSupport(e)<this.minSupport)&&this.isMin()){this.report();var r=this.dfsCode.getNodeNum(),n=this.dfsCode.buildRmpath(),o=this.dfsCode.dfsEdgeList[n[0]].toNode,i=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,a={},d={};e.forEach((function(e){for(var u=t.graphs[e.graphId],s=u.nodeMap,c=new X(e),f=n.length-1;f>=0;f--){var h=t.findBackwardEdge(u,c.edges[n[f]],c.edges[n[0]],c);if(h){var l="".concat(t.dfsCode.dfsEdgeList[n[f]].fromNode,"-").concat(h.label);d[l]||(d[l]={projected:[],toNodeId:t.dfsCode.dfsEdgeList[n[f]].fromNode,edgeLabel:h.label}),d[l].projected.push({graphId:e.graphId,edge:h,preNode:e})}}if(!(r>=t.maxNodeNum)){t.findForwardPureEdges(u,c.edges[n[0]],i,c).forEach((function(t){var r="".concat(o,"-").concat(t.label,"-").concat(s[t.to].label);a[r]||(a[r]={projected:[],fromNodeId:o,edgeLabel:t.label,nodeLabel2:s[t.to].label}),a[r].projected.push({graphId:e.graphId,edge:t,preNode:e})}));var v=function(r){t.findForwardRmpathEdges(u,c.edges[n[r]],i,c).forEach((function(o){var i="".concat(t.dfsCode.dfsEdgeList[n[r]].fromNode,"-").concat(o.label,"-").concat(s[o.to].label);a[i]||(a[i]={projected:[],fromNodeId:t.dfsCode.dfsEdgeList[n[r]].fromNode,edgeLabel:o.label,nodeLabel2:s[o.to].label}),a[i].projected.push({graphId:e.graphId,edge:o,preNode:e})}))};for(f=0;f<n.length;f++)v(f)}})),Object.keys(d).forEach((function(e){var r=d[e],n=r.toNodeId,i=r.edgeLabel;t.dfsCode.dfsEdgeList.push(new J(o,n,"-1",i,"-1")),t.subGraphMining(d[e].projected),t.dfsCode.dfsEdgeList.pop()})),Object.keys(a).forEach((function(e){var r=a[e],n=r.fromNodeId,i=r.edgeLabel,d=r.nodeLabel2;t.dfsCode.dfsEdgeList.push(new J(n,o+1,H,i,d)),t.subGraphMining(a[e].projected),t.dfsCode.dfsEdgeList.pop()}))}},e.prototype.generate1EdgeFrequentSubGraphs=function(){var e=this.graphs,t=this.directed,r=this.minSupport,n=this.frequentSize1Subgraphs,o={},i={},a={},d={};return Object.keys(e).forEach((function(r){var n=e[r],u=n.nodeMap;n.nodes.forEach((function(e,n){var s=e.label,c="".concat(r,"-").concat(s);if(!a[c]){var f=o[s]||0;f++,o[s]=f}a[c]={graphKey:r,label:s},e.edges.forEach((function(e){var n=s,o=u[e.to].label;if(!t&&n>o){var a=o;o=n,n=a}var c=e.label,f="".concat(r,"-").concat(n,"-").concat(c,"-").concat(o),h="".concat(n,"-").concat(c,"-").concat(o);if(!i[h]){var l=i[h]||0;l++,i[h]=l}d[f]={graphId:r,nodeLabel1:n,edgeLabel:c,nodeLabel2:o}}))}))})),Object.keys(o).forEach((function(e){if(!(o[e]<r)){var t={nodes:[],edges:[]};t.nodes.push({id:"0",label:e}),n.push(t)}})),n},e.prototype.run=function(){var e=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var t=this.graphs,r=(this.directed,{});Object.keys(t).forEach((function(n){var o=t[n],i=o.nodeMap;o.nodes.forEach((function(t){e.findForwardRootEdges(o,t).forEach((function(e){var o=i[e.to],a="".concat(t.label,"-").concat(e.label,"-").concat(o.label);r[a]||(r[a]={projected:[],nodeLabel1:t.label,edgeLabel:e.label,nodeLabel2:o.label});var d={graphId:n,edge:e,preNode:null};r[a].projected.push(d)}))}))})),Object.keys(r).forEach((function(t){var n=r[t],o=n.projected,i=n.nodeLabel1,a=n.edgeLabel,d=n.nodeLabel2;e.dfsCode.dfsEdgeList.push(new J(0,1,i,a,d)),e.subGraphMining(o),e.dfsCode.dfsEdgeList.pop()}))}},e}(),Z="cluster";var $=function(e,t,r,n){void 0===r&&(r="cluster"),void 0===n&&(n=2);var o=[],i=e.nodes;return t.forEach((function(e,t){o.push(_(i,e,t,r,n))})),o},_=function(e,t,r,n,o){var i=[r],a=[],d={};return t.forEach((function(t,u){if(t<=o&&r!==u){i.push(u),a.push(e[u]);var s=e[u][n];d[s]?(d[s].count++,d[s].dists.push(t)):d[s]={count:1,dists:[t]}}})),Object.keys(d).forEach((function(e){d[e].dists=d[e].dists.sort((function(e,t){return e-t}))})),{nodeIdx:r,nodeId:e[r].id,nodeIdxs:i,neighbors:a,neighborNum:i.length-1,nodeLabelCountMap:d}},ee=function(e,t,r,n){var o=r.nodes;return n||(n={}),Object.keys(e).forEach((function(i){var a,d;if(!n||!n[i]){n[i]={nodes:[],edges:[]};var u=e[i],s=null===(a=t[u.start])||void 0===a?void 0:a.nodeIdxs,c=null===(d=t[u.end])||void 0===d?void 0:d.nodeIdxs;if(s&&c){var f=new Set(c),h=s.filter((function(e){return f.has(e)}));if(h&&h.length){for(var l={},v=h.length,p=0;p<v;p++){var g=o[h[p]];n[i].nodes.push(g),l[g.id]=!0}r.edges.forEach((function(e){l[e.source]&&l[e.target]&&n[i].edges.push(e)}))}}}})),n},te=function(e,t,r,n){var o,i,a={};e.nodes.forEach((function(e){a[e.id]=e}));var d=0;return!(null===(o=null==t?void 0:t.edges)||void 0===o?void 0:o.length)||(null===(i=null==t?void 0:t.nodes)||void 0===i?void 0:i.length)<2?0:(e.edges.forEach((function(e){var o=a[e.source][r],i=a[e.target][r],u=null==t?void 0:t.nodes[0][r],s=null==t?void 0:t.nodes[1][r],c=null==t?void 0:t.edges[0][n];e[n]===c&&(o===u&&i===s||o===s&&i===u)&&d++})),d)},re=function(e,t){var r={},n={};return e.forEach((function(e,o){r[e.id]={idx:o,node:e,degree:0,inDegree:0,outDegree:0};var i=e[t];n[i]||(n[i]=[]),n[i].push(e)})),{nodeMap:r,nodeLabelMap:n}},ne=function(e,t,r){var n={},o={};return e.forEach((function(e,i){n["".concat(s)]={idx:i,edge:e};var a=e[t];o[a]||(o[a]=[]),o[a].push(e);var d=r[e.source];d&&(d.degree++,d.outDegree++);var u=r[e.target];u&&(u.degree++,u.inDegree++)})),{edgeMap:n,edgeLabelMap:o}},oe=function(e,t,r){var n=t.length,o={};return t.forEach((function(t,i){for(var a=r?0:i+1,d=e[i].id,u=a;u<n;u++)if(i!==u){var s=e[u].id,c=t[u];o["".concat(d,"-").concat(s)]=c,r||(o["".concat(s,"-").concat(d)]=c)}})),o},ie=function(e,t,r,n,o,i,a,d,u,s,c){var f,h="".concat(t.id,"-").concat(r.id);if(s&&s[h])return s[h];var l=c?c[h]:void 0;if(!l){var v=((f={})[h]={start:n[t.id].idx,end:n[r.id].idx,distance:o},f);l=(c=ee(v,i,e,c))[h]}return te(l,a,d,u)},ae=function(e,t,r,n){var o,i,a,d=null===(o=e[t])||void 0===o?void 0:o.degree,u=null===(i=e[t])||void 0===i?void 0:i.inDegree,s=null===(a=e[t])||void 0===a?void 0:a.outDegree;return void 0===e[t]&&(d=1/0,u=1/0,s=1/0,n[t].forEach((function(e){var t=r[e.id].degree;d>t&&(d=t);var n=r[e.id].inDegree;u>n&&(u=n);var o=r[e.id].outDegree;s>o&&(s=o)})),e[t]={degree:d,inDegree:u,outDegree:s}),{minPatternNodeLabelDegree:d,minPatternNodeLabelInDegree:u,minPatternNodeLabelOutDegree:s}};var de=function(){function e(e){void 0===e&&(e=10),this.linkedList=new i,this.maxStep=e}return Object.defineProperty(e.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),e.prototype.isEmpty=function(){return!this.linkedList.head},e.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},e.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},e.prototype.push=function(e){this.linkedList.prepend(e),this.length>this.maxStep&&this.linkedList.deleteTail()},e.prototype.pop=function(){var e=this.linkedList.deleteHead();return e?e.value:null},e.prototype.toArray=function(){return this.linkedList.toArray().map((function(e){return e.value}))},e.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},e}();const ue={getAdjMatrix:r,breadthFirstSearch:function(e,t,r,n){void 0===n&&(n=!0);var o=function(e){void 0===e&&(e={});var t,r=e,n=function(){},o=(t={},function(e){var r=e.next;return!t[r]&&(t[r]=!0,!0)});return r.allowTraversal=e.allowTraversal||o,r.enter=e.enter||n,r.leave=e.leave||n,r}(r),i=new a,u=e.edges,s=void 0===u?[]:u;i.enqueue(t);for(var c="",f=function(){var e=i.dequeue();o.enter({current:e,previous:c}),d(e,s,n?"target":void 0).forEach((function(t){o.allowTraversal({previous:c,current:e,next:t})&&i.enqueue(t)})),o.leave({current:e,previous:c}),c=e};!i.isEmpty();)f()},connectedComponent:f,getDegree:l,getInDegree:function(e,t){return h(e)[t]?h(e)[t].inDegree:0},getOutDegree:function(e,t){return h(e)[t]?h(e)[t].outDegree:0},detectCycle:E,detectDirectedCycle:E,detectAllCycles:function(e,t,r,n){return void 0===n&&(n=!0),t?b(e,r,n):g(e,r,n)},detectAllDirectedCycle:b,detectAllUndirectedCycle:g,depthFirstSearch:p,dijkstra:j,findAllPath:function(e,t,r,n){var o;if(t===r)return[[t]];var i=e.edges,a=void 0===i?[]:i,u=[t],s=((o={})[t]=!0,o),c=[],f=[],h=n?d(t,a,"target"):d(t,a);for(c.push(h);u.length>0&&c.length>0;){var l=c[c.length-1];if(l.length){var v=l.shift();if(v&&(u.push(v),s[v]=!0,h=n?d(v,a,"target"):d(v,a),c.push(h.filter((function(e){return!s[e]})))),u[u.length-1]===r){var p=u.map((function(e){return e}));f.push(p),g=u.pop(),s[g]=!1,c.pop()}}else{var g=u.pop();s[g]=!1,c.pop()}}return f},findShortestPath:function(e,t,r,n,o){var i=j(e,t,n,o),a=i.length,d=i.path,u=i.allPath;return{length:a[r],path:d[r],allPath:u[r]}},floydWarshall:D,labelPropagation:function(e,t,n,o){void 0===t&&(t=!1),void 0===n&&(n="weight"),void 0===o&&(o=1e3);var i=e.nodes,a=void 0===i?[]:i,d=e.edges,u=void 0===d?[]:d,c={},f={};a.forEach((function(e,t){var r=s();e.clusterId=r,c[r]={id:r,nodes:[e]},f[e.id]={node:e,idx:t}}));var h=r(e,t),l=[],v={};h.forEach((function(e,t){var r=0,n=a[t].id;v[n]={},e.forEach((function(e,t){if(e){r+=e;var o=a[t].id;v[n][o]=e}})),l.push(r)}));for(var p=0,g=function(){var e=!1;if(a.forEach((function(t){var r={};Object.keys(v[t.id]).forEach((function(e){var n=v[t.id][e],o=f[e].node.clusterId;r[o]||(r[o]=0),r[o]+=n}));var n=-1/0,o=[];if(Object.keys(r).forEach((function(e){n<r[e]?(n=r[e],o=[e]):n===r[e]&&o.push(e)})),1!==o.length||o[0]!==t.clusterId){var i=o.indexOf(t.clusterId);if(i>=0&&o.splice(i,1),o&&o.length){e=!0;var a=c[t.clusterId],d=a.nodes.indexOf(t);a.nodes.splice(d,1);var u=Math.floor(Math.random()*o.length),s=c[o[u]];s.nodes.push(t),t.clusterId=s.id}}})),!e)return"break";p++};p<o&&"break"!==g(););Object.keys(c).forEach((function(e){var t=c[e];t.nodes&&t.nodes.length||delete c[e]}));var b=[],E={};u.forEach((function(e){var t=e.source,r=e.target,o=e[n]||1,i=f[t].node.clusterId,a=f[r].node.clusterId,d="".concat(i,"---").concat(a);if(E[d])E[d].weight+=o,E[d].count++;else{var u={source:i,target:a,weight:o,count:1};E[d]=u,b.push(u)}}));var y=[];return Object.keys(c).forEach((function(e){y.push(c[e])})),{clusters:y,clusterEdges:b}},louvain:q,iLouvain:function(e,t,r,n,o){return void 0===t&&(t=!1),void 0===r&&(r="weight"),void 0===n&&(n=1e-4),void 0===o&&(o=1),q(e,t,r,n,!0,o)},kCore:function(e,t){var r;void 0===t&&(t=1);for(var n=I(e),o=n.nodes,i=void 0===o?[]:o,a=n.edges,d=void 0===a?[]:a,u=function(){var e=l({nodes:i,edges:d}),n=Object.keys(e);n.sort((function(t,r){var n,o;return(null===(n=e[t])||void 0===n?void 0:n.degree)-(null===(o=e[r])||void 0===o?void 0:o.degree)}));var o=n[0];if(!i.length||(null===(r=e[o])||void 0===r?void 0:r.degree)>=t)return"break";var a=i.findIndex((function(e){return e.id===o}));i.splice(a,1),d=d.filter((function(e){return!(e.source===o||e.target===o)}))};"break"!==u(););return{nodes:i,edges:d}},cosineSimilarity:F,nodesCosineSimilarity:function(e,t,r,n){void 0===e&&(e=[]),void 0===r&&(r=[]),void 0===n&&(n=[]);var o=I(e.filter((function(e){return e.id!==t.id}))),i=e.findIndex((function(e){return e.id===t.id})),a=C(e),d=P(a,r,n),u=d[i],s=[];return o.forEach((function(e,r){if(e.id!==t.id){var n=d[r],o=F(n,u);s.push(o),e.cosineSimilarity=o}})),o.sort((function(e,t){return t.cosineSimilarity-e.cosineSimilarity})),{allCosineSimilarity:s,similarNodes:o}},minimumSpanningTree:function(e,t,r){return r?{prim:z,kruskal:B}[r](e,t):B(e,t)},pageRank:function(e,t,r){"number"!=typeof t&&(t=1e-6),"number"!=typeof r&&(r=.85);for(var n,o=1,i=0,a=1e3,u=e.nodes,s=void 0===u?[]:u,c=e.edges,f=void 0===c?[]:c,h=s.length,v={},p={},g=0;g<h;++g)v[E=(w=s[g]).id]=1/h,p[E]=1/h;for(var b=l(e);a>0&&o>t;){for(i=0,g=0;g<h;++g){var E=(w=s[g]).id;if(n=0,0===b[w.id].inDegree)v[E]=0;else{for(var y=d(E,f,"source"),m=0;m<y.length;++m){var L=y[m],N=b[L].outDegree;N>0&&(n+=p[L]/N)}v[E]=r*n,i+=v[E]}}for(i=(1-i)/h,o=0,g=0;g<h;++g){var w;n=v[E=(w=s[g]).id]+i,o+=Math.abs(n-p[E]),p[E]=n}a-=1}return p},getNeighbors:d,Stack:de,GADDI:function(e,t,r,n,o,i,a){var d;if(void 0===r&&(r=!1),void 0===i&&(i="cluster"),void 0===a&&(a="cluster"),e&&e.nodes){var u=e.nodes.length;if(u){var s=D(e,r),c=D(t,r),f=oe(e.nodes,s,r),h=oe(t.nodes,c,r),l=re(e.nodes,i),v=l.nodeMap,p=l.nodeLabelMap,g=re(t.nodes,i),b=g.nodeMap,E=g.nodeLabelMap;ne(e.edges,a,v);var m=ne(t.edges,a,b).edgeLabelMap,L=[];null==c||c.forEach((function(e){L=L.concat(e)})),o||(o=Math.max.apply(Math,y(y([],L,!1),[2],!1))),n||(n=o);var N=$(e,s,i,n),w=$(t,c,i,n),k=function(e,t,r,n,o){var i=Math.ceil(r/t),a={},d=0;return n.forEach((function(e,n){for(var u=0,s=0,c=e.nodeIdxs,f=e.neighborNum-1;u<i;){for(var h=c[1+Math.floor(Math.random()*f)],l=0;(a["".concat(n,"-").concat(h)]||a["".concat(h,"-").concat(n)])&&(h=Math.floor(Math.random()*t),!(++l>2*t)););if(l<2*t&&(a["".concat(n,"-").concat(h)]={start:n,end:h,distance:o[n][h]},u++,++d>=r))return a;if(++s>2*t)break}u<i&&(i=(i+(i-u))/(t-n-1))})),a}(0,u,Math.min(100,u*(u-1)/2),w,s),x=ee(k,N,e),I=function(e){var t=e.graphs,r=e.directed,n=void 0!==r&&r,o=e.nodeLabelProp,i=void 0===o?Z:o,a=e.edgeLabelProp,d=void 0===a?Z:a,u=function(e,t,r,n){var o={};return Object.keys(e).forEach((function(i,a){var d=e[i],u=new V(a,!0,t),s={};d.nodes.forEach((function(e,t){u.addNode(t,e[r]),s[e.id]=t})),d.edges.forEach((function(e,t){var r=s[e.source],o=s[e.target];u.addEdge(-1,r,o,e[n])})),u&&u.getNodeNum()&&(o[u.id]=u)})),o}(t,n,i,d),s=e.minSupport,c=e.maxNodeNum,f=e.minNodeNum,h=e.verbose,l=e.top,v=new Y({graphs:u,minSupport:s,maxNodeNum:c,minNodeNum:f,top:l,verbose:h,directed:n});v.run();var p=function(e,t,r){var n=[];return e.forEach((function(e){var o={nodes:[],edges:[]};e.nodes.forEach((function(e){var r;o.nodes.push(((r={id:"".concat(e.id)})[t]=e.label,r))})),e.edges.forEach((function(e){var t;o.edges.push(((t={source:"".concat(e.from),target:"".concat(e.to)})[r]=e.label,t))})),n.push(o)})),n}(v.frequentSubgraphs,i,d);return p}({graphs:x,nodeLabelProp:i,edgeLabelProp:a,minSupport:1,minNodeNum:1,maxNodeNum:4,directed:r}).slice(0,10),M=I.length,O=[];I.forEach((function(e,t){O[t]={},Object.keys(x).forEach((function(r){var n=x[r],o=te(n,e,i,a);O[t][r]=o}))}));var S=function(e,t,r){for(var n=1/0,o=0,i=function(t){var r=e[t],i=Object.keys(r).sort((function(e,t){return r[e]-r[t]})),a=[];i.forEach((function(e,t){a[t%10]||(a[t%10]={graphs:[],totalCount:0,aveCount:0}),a[t%10].graphs.push(e),a[t%10].totalCount+=r[e]}));var d=0,u=[];a.forEach((function(e){var t=e.totalCount/e.graphs.length;e.aveCount=t,u.push(t);var n=0,o=e.length;e.graphs.forEach((function(t,o){var i=r[t];e.graphs.forEach((function(e,t){o!==t&&(n+=Math.abs(i-r[e]))}))})),d+=n/=o*(o-1)/2})),d/=a.length;var s=0;u.forEach((function(e,t){u.forEach((function(r,n){t!==n&&(s+=Math.abs(e-r))})),s/=u.length*(u.length-1)/2}));var c=s-d;n<c&&(n=c,o=t)},a=0;a<t;a++)i(a);return{structure:r[o],structureCountMap:e[o]}}(O,M,I),C=S.structure,P=S.structureCountMap,A=t.nodes[0],T=[],q=null===(d=t.nodes[0])||void 0===d?void 0:d[i],F=-1/0;t.nodes.forEach((function(e){var t=e[i],r=p[t];(null==r?void 0:r.length)>F&&(F=r.length,T=r,q=t,A=e)}));var R={},G={},U={},z={},B={},H={};Object.keys(E).forEach((function(n,o){B[n]=[],r&&(H[n]=[]);var d=-1/0,u=E[n],s={};u.forEach((function(e){var t=h["".concat(A.id,"-").concat(e.id)];if(t&&B[n].push(t),d<t&&(d=t),s["".concat(A.id,"-").concat(e.id)]={start:0,end:b[e.id].idx,distance:t},r){var o=h["".concat(e.id,"-").concat(A.id)];o&&H[n].push(o)}})),B[n]=B[n].sort((function(e,t){return e-t})),r&&(H[n]=H[n].sort((function(e,t){return e-t}))),G=ee(s,w,t,G);var c=[];if(Object.keys(s).forEach((function(e){if(U[e])c.push(U[e]);else{var t=G[e];U[e]=te(t,C,i,a),c.push(U[e])}})),c=c.sort((function(e,t){return t-e})),z["".concat(A.id,"-").concat(n)]=c,n!==q)for(var l=function(t){var r=T[t],o=N[v[r.id].idx],d=o.nodeLabelCountMap[n],u=E[n].length;if(!d||d.count<u)return T.splice(t,1),"continue";for(var s=!1,h=0;h<u;h++)if(d.dists[h]>B[n][h]){s=!0;break}if(s)return T.splice(t,1),"continue";var l={};o.neighbors.forEach((function(e){var t=f["".concat(r.id,"-").concat(e.id)];l["".concat(r.id,"-").concat(e.id)]={start:v[r.id].idx,end:v[e.id].idx,distance:t}})),x=ee(l,N,e,x);var p=[];Object.keys(l).forEach((function(e){if(P[e])p.push(P[e]);else{var t=x[e];P[e]=te(t,C,i,a),p.push(P[e])}})),p=p.sort((function(e,t){return t-e}));var g=!1;for(h=0;h<u;h++)if(p[h]<c[h]){g=!0;break}return g?(T.splice(t,1),"continue"):void 0},p=((null==T?void 0:T.length)||0)-1;p>=0;p--)l(p)}));var W=[];null==T||T.forEach((function(n){for(var d=v[n.id].idx,u=_(e.nodes,s[d],d,i,o).neighbors,c=!1,h=u.length-1;h>=0;h--){if(u.length+1<t.nodes.length)return void(c=!0);var l=u[h],p=l[i];if(E[p]&&E[p].length)if(B[p]&&B[p].length){var g="".concat(n.id,"-").concat(l.id),y=f[g],m=B[p].length-1;if(y>B[p][m])u.splice(h,1);else{if(r){var L="".concat(l.id,"-").concat(n.id),w=f[L];if(m=H[p].length-1,w>H[p][m]){u.splice(h,1);continue}}var k=P[g]?P[g]:ie(e,n,l,v,y,N,C,i,a,P,x),I="".concat(A.id,"-").concat(p);if(k<z[I][z[I].length-1])u.splice(h,1);else{var M=ae(R,p,b,E),j=M.minPatternNodeLabelDegree;M.minPatternNodeLabelInDegree,M.minPatternNodeLabelOutDegree,v[l.id].degree<j&&u.splice(h,1)}}}else u.splice(h,1);else u.splice(h,1)}c||W.push({nodes:[n].concat(u)})}));var K=j(t,A.id,!1).length,J={};r?(Object.keys(K).forEach((function(e){var t=b[e].node[i];J[t]?J[t].push(K[e]):J[t]=[K[e]]})),Object.keys(J).forEach((function(e){J[e].sort((function(e,t){return e-t}))}))):J=B;for(var Q=function(n){var o=W[n],d=o.nodes[0],u={},s={};o.nodes.forEach((function(e,t){s[e.id]={idx:t,node:e,degree:0,inDegree:0,outDegree:0};var r=e[i];u[r]?u[r]++:u[r]=1}));var c=[],f={};e.edges.forEach((function(e){s[e.source]&&s[e.target]&&(c.push(e),f[e[a]]?f[e[a]]++:f[e[a]]=1,s[e.source].degree++,s[e.target].degree++,s[e.source].outDegree++,s[e.target].inDegree++)}));for(var h=Object.keys(m).length,l=!1,p=0;p<h;p++){var g=Object.keys(m)[p];if(!f[g]||f[g]<m[g].length){l=!0;break}}if(l)return W.splice(n,1),"continue";var y=c.length;if(y<t.edges.length)return W.splice(n,1),"break";var L=!1,N=function(e){var t=c[e],n=t[a],o=m[n];if(!o||!o.length)return f[n]--,o&&f[n]<o.length?(L=!0,"break"):(c.splice(e,1),s[t.source].degree--,s[t.target].degree--,s[t.source].outDegree--,s[t.target].inDegree--,"continue");var d=s[t.source].node[i],u=s[t.target].node[i],h=!1;return o.forEach((function(e){var t=b[e.source].node,n=b[e.target].node;t[i]===d&&n[i]===u&&(h=!0),r||t[i]!==u||n[i]!==d||(h=!0)})),h?void 0:(f[n]--,o&&f[n]<o.length?(L=!0,"break"):(c.splice(e,1),s[t.source].degree--,s[t.target].degree--,s[t.source].outDegree--,s[t.target].inDegree--,"continue"))};for(p=y-1;p>=0&&"break"!==N(p);p--);if(L)return W.splice(n,1),"continue";o.edges=c;var w=j(o,o.nodes[0].id,!1).length;if(Object.keys(w).reverse().forEach((function(e){if(e!==o.nodes[0].id&&!L){if(w[e]===1/0){var t=s[e].node[i];if(u[t]--,u[t]<E[t].length)return void(L=!0);var r=o.nodes.indexOf(s[e].node);return o.nodes.splice(r,1),void(s[e]=void 0)}var n=v[e].node[i];if(!J[n]||!J[n].length||w[e]>J[n][J[n].length-1]){if(t=s[e].node[i],u[t]--,u[t]<E[t].length)return void(L=!0);r=o.nodes.indexOf(s[e].node),o.nodes.splice(r,1),s[e]=void 0}}})),L)return W.splice(n,1),"continue";for(var k=!0,x=0;k&&!L;){if(k=!1,r?s[d.id].degree<b[A.id].degree||s[d.id].inDegree<b[A.id].inDegree||s[d.id].outDegree<b[A.id].outDegree:s[d.id].degree<b[A.id].degree){L=!0;break}if(u[d[i]]<E[d[i]].length){L=!0;break}for(var I=o.nodes.length-1;I>=0;I--){var M=o.nodes[I],O=s[M.id].degree,D=s[M.id].inDegree,S=s[M.id].outDegree,C=M[i],P=ae(R,C,b,E),T=P.minPatternNodeLabelDegree,q=P.minPatternNodeLabelInDegree,F=P.minPatternNodeLabelOutDegree;if(r?O<T||D<q||S<F:O<T){if(u[M[i]]--,u[M[i]]<E[M[i]].length){L=!0;break}o.nodes.splice(I,1),s[M.id]=void 0,k=!0}}if(L||!k&&0!==x)break;for(var G=(y=c.length)-1;G>=0;G--){var U=c[G];if(!s[U.source]||!s[U.target]){c.splice(G,1);var z=U[a];if(f[z]--,s[U.source]&&(s[U.source].degree--,s[U.source].outDegree--),s[U.target]&&(s[U.target].degree--,s[U.target].inDegree--),m[z]&&f[z]<m[z].length){L=!0;break}k=!0}}x++}return L||L||o.nodes.length<t.nodes.length||c.length<t.edges.length?(W.splice(n,1),"continue"):void 0},X=W.length-1;X>=0&&"break"!==Q(X);X--);var de=W.length,ue=function(e){var t=W[e],r={};t.edges.forEach((function(e){var t="".concat(e.source,"-").concat(e.target,"-").concat(e.label);r[t]?r[t]++:r[t]=1}));for(var n=function(e){var t=W[e],n={};t.edges.forEach((function(e){var t="".concat(e.source,"-").concat(e.target,"-").concat(e.label);n[t]?n[t]++:n[t]=1}));var o=!0;Object.keys(n).length!==Object.keys(r).length?o=!1:Object.keys(r).forEach((function(e){n[e]!==r[e]&&(o=!1)})),o&&W.splice(e,1)},o=de-1;o>e;o--)n(o);de=W.length};for(X=0;X<=de-1;X++)ue(X);return W}}}};return t.default})()}));
//# sourceMappingURL=index.min.js.map