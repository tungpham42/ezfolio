!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("@antv/x6"),require("react-dom"),require("@antv/x6-react-shape"),require("@antv/layout"),require("lodash"),require("antd"),require("@antv/x6-react-components")):"function"==typeof define&&define.amd?define(["exports","react","@antv/x6","react-dom","@antv/x6-react-shape","@antv/layout","lodash","antd","@antv/x6-react-components"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).XFlowExtension={},e.React,e.X6,e.ReactDOM,e.X6ReactShape,e.layout,e.lodash,e.antd,e.X6ReactComponents)}(this,(function(e,t,n,r,o,i,a,s,l){"use strict";function c(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function u(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var d=c(t),f=u(t),h=c(r),p=u(i),g=function(e,t){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},g(e,t)};function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}g(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function y(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function m(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function b(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function w(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))}var x,_="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function E(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}
/*! *****************************************************************************
    Copyright (C) Microsoft. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */!function(e){!function(t){var n="object"==typeof _?_:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),r=o(e);function o(e,t){return function(n,r){"function"!=typeof e[n]&&Object.defineProperty(e,n,{configurable:!0,writable:!0,value:r}),t&&t(n,r)}}void 0===n.Reflect?n.Reflect=e:r=o(n.Reflect,r),function(e){var t=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,r=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",o=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",i="function"==typeof Object.create,a={__proto__:[]}instanceof Array,s=!i&&!a,l={create:i?function(){return re(Object.create(null))}:a?function(){return re({__proto__:null})}:function(){return re({})},has:s?function(e,n){return t.call(e,n)}:function(e,t){return t in e},get:s?function(e,n){return t.call(e,n)?e[n]:void 0}:function(e,t){return e[t]}},c=Object.getPrototypeOf(Function),u="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,d=u||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?ee():Map,f=u||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?te():Set,h=new(u||"function"!=typeof WeakMap?ne():WeakMap);function p(e,t,n,r){if(D(n)){if(!z(e))throw new TypeError;if(!$(t))throw new TypeError;return O(e,t)}if(!z(e))throw new TypeError;if(!G(t))throw new TypeError;if(!G(r)&&!D(r)&&!I(r))throw new TypeError;return I(r)&&(r=void 0),S(e,t,n=V(n),r)}function g(e,t){function n(n,r){if(!G(n))throw new TypeError;if(!D(r)&&!W(r))throw new TypeError;A(e,t,n,r)}return n}function v(e,t,n,r){if(!G(n))throw new TypeError;return D(r)||(r=V(r)),A(e,t,n,r)}function y(e,t,n){if(!G(t))throw new TypeError;return D(n)||(n=V(n)),k(e,t,n)}function m(e,t,n){if(!G(t))throw new TypeError;return D(n)||(n=V(n)),P(e,t,n)}function b(e,t,n){if(!G(t))throw new TypeError;return D(n)||(n=V(n)),M(e,t,n)}function w(e,t,n){if(!G(t))throw new TypeError;return D(n)||(n=V(n)),T(e,t,n)}function x(e,t){if(!G(e))throw new TypeError;return D(t)||(t=V(t)),N(e,t)}function _(e,t){if(!G(e))throw new TypeError;return D(t)||(t=V(t)),R(e,t)}function E(e,t,n){if(!G(t))throw new TypeError;D(n)||(n=V(n));var r=C(t,n,!1);if(D(r))return!1;if(!r.delete(e))return!1;if(r.size>0)return!0;var o=h.get(t);return o.delete(n),o.size>0||h.delete(t),!0}function O(e,t){for(var n=e.length-1;n>=0;--n){var r=(0,e[n])(t);if(!D(r)&&!I(r)){if(!$(r))throw new TypeError;t=r}}return t}function S(e,t,n,r){for(var o=e.length-1;o>=0;--o){var i=(0,e[o])(t,n,r);if(!D(i)&&!I(i)){if(!G(i))throw new TypeError;r=i}}return r}function C(e,t,n){var r=h.get(e);if(D(r)){if(!n)return;r=new d,h.set(e,r)}var o=r.get(t);if(D(o)){if(!n)return;o=new d,r.set(t,o)}return o}function k(e,t,n){if(P(e,t,n))return!0;var r=Q(t);return!I(r)&&k(e,r,n)}function P(e,t,n){var r=C(t,n,!1);return!D(r)&&B(r.has(e))}function M(e,t,n){if(P(e,t,n))return T(e,t,n);var r=Q(t);return I(r)?void 0:M(e,r,n)}function T(e,t,n){var r=C(t,n,!1);if(!D(r))return r.get(e)}function A(e,t,n,r){C(n,r,!0).set(e,t)}function N(e,t){var n=R(e,t),r=Q(e);if(null===r)return n;var o=N(r,t);if(o.length<=0)return n;if(n.length<=0)return o;for(var i=new f,a=[],s=0,l=n;s<l.length;s++){var c=l[s];i.has(c)||(i.add(c),a.push(c))}for(var u=0,d=o;u<d.length;u++){c=d[u];i.has(c)||(i.add(c),a.push(c))}return a}function R(e,t){var n=[],r=C(e,t,!1);if(D(r))return n;for(var o=q(r.keys()),i=0;;){var a=Z(o);if(!a)return n.length=i,n;var s=X(a);try{n[i]=s}catch(e){try{J(o)}finally{throw e}}i++}}function j(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function D(e){return void 0===e}function I(e){return null===e}function F(e){return"symbol"==typeof e}function G(e){return"object"==typeof e?null!==e:"function"==typeof e}function L(e,t){switch(j(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var n=3===t?"string":5===t?"number":"default",o=K(e,r);if(void 0!==o){var i=o.call(e,n);if(G(i))throw new TypeError;return i}return H(e,"default"===n?"number":n)}function H(e,t){if("string"===t){var n=e.toString;if(Y(n))if(!G(o=n.call(e)))return o;if(Y(r=e.valueOf))if(!G(o=r.call(e)))return o}else{var r;if(Y(r=e.valueOf))if(!G(o=r.call(e)))return o;var o,i=e.toString;if(Y(i))if(!G(o=i.call(e)))return o}throw new TypeError}function B(e){return!!e}function U(e){return""+e}function V(e){var t=L(e,3);return F(t)?t:U(t)}function z(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function Y(e){return"function"==typeof e}function $(e){return"function"==typeof e}function W(e){switch(j(e)){case 3:case 4:return!0;default:return!1}}function K(e,t){var n=e[t];if(null!=n){if(!Y(n))throw new TypeError;return n}}function q(e){var t=K(e,o);if(!Y(t))throw new TypeError;var n=t.call(e);if(!G(n))throw new TypeError;return n}function X(e){return e.value}function Z(e){var t=e.next();return!t.done&&t}function J(e){var t=e.return;t&&t.call(e)}function Q(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===c)return t;if(t!==c)return t;var n=e.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return t;var o=r.constructor;return"function"!=typeof o||o===e?t:o}function ee(){var e={},t=[],n=function(){function e(e,t,n){this._index=0,this._keys=e,this._values=t,this._selector=n}return e.prototype["@@iterator"]=function(){return this},e.prototype[o]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var n=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var n=this._find(e,!0);return this._values[n]=t,this},t.prototype.delete=function(t){var n=this._find(t,!1);if(n>=0){for(var r=this._keys.length,o=n+1;o<r;o++)this._keys[o-1]=this._keys[o],this._values[o-1]=this._values[o];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new n(this._keys,this._values,r)},t.prototype.values=function(){return new n(this._keys,this._values,i)},t.prototype.entries=function(){return new n(this._keys,this._values,a)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[o]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function r(e,t){return e}function i(e,t){return t}function a(e,t){return[e,t]}}function te(){return function(){function e(){this._map=new d}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[o]=function(){return this.keys()},e}()}function ne(){var e=16,n=l.create(),r=o();return function(){function e(){this._key=o()}return e.prototype.has=function(e){var t=i(e,!1);return void 0!==t&&l.has(t,this._key)},e.prototype.get=function(e){var t=i(e,!1);return void 0!==t?l.get(t,this._key):void 0},e.prototype.set=function(e,t){return i(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=i(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=o()},e}();function o(){var e;do{e="@@WeakMap@@"+c()}while(l.has(n,e));return n[e]=!0,e}function i(e,n){if(!t.call(e,r)){if(!n)return;Object.defineProperty(e,r,{value:l.create()})}return e[r]}function a(e,t){for(var n=0;n<t;++n)e[n]=255*Math.random()|0;return e}function s(e){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(e)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(e)):a(new Uint8Array(e),e):a(new Array(e),e)}function c(){var t=s(e);t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var n="",r=0;r<e;++r){var o=t[r];4!==r&&6!==r&&8!==r||(n+="-"),o<16&&(n+="0"),n+=o.toString(16).toLowerCase()}return n}}function re(e){return e.__=void 0,delete e.__,e}e("decorate",p),e("metadata",g),e("defineMetadata",v),e("hasMetadata",y),e("hasOwnMetadata",m),e("getMetadata",b),e("getOwnMetadata",w),e("getMetadataKeys",x),e("getOwnMetadataKeys",_),e("deleteMetadata",E)}(r)}()}(x||(x={}));var O={},S={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.NON_CUSTOM_TAG_KEYS=e.POST_CONSTRUCT=e.DESIGN_PARAM_TYPES=e.PARAM_TYPES=e.TAGGED_PROP=e.TAGGED=e.MULTI_INJECT_TAG=e.INJECT_TAG=e.OPTIONAL_TAG=e.UNMANAGED_TAG=e.NAME_TAG=e.NAMED_TAG=void 0,e.NAMED_TAG="named",e.NAME_TAG="name",e.UNMANAGED_TAG="unmanaged",e.OPTIONAL_TAG="optional",e.INJECT_TAG="inject",e.MULTI_INJECT_TAG="multi_inject",e.TAGGED="inversify:tagged",e.TAGGED_PROP="inversify:tagged_props",e.PARAM_TYPES="inversify:paramtypes",e.DESIGN_PARAM_TYPES="design:paramtypes",e.POST_CONSTRUCT="post_construct",e.NON_CUSTOM_TAG_KEYS=[e.INJECT_TAG,e.MULTI_INJECT_TAG,e.NAME_TAG,e.UNMANAGED_TAG,e.NAMED_TAG,e.OPTIONAL_TAG]}(S);var C={},k={},P={};Object.defineProperty(P,"__esModule",{value:!0}),P.TargetTypeEnum=P.BindingTypeEnum=P.BindingScopeEnum=void 0;P.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"};P.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};P.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"};var M={};Object.defineProperty(M,"__esModule",{value:!0}),M.id=void 0;var T=0;M.id=function(){return T++},Object.defineProperty(k,"__esModule",{value:!0}),k.Binding=void 0;var A=P,N=M,R=function(){function e(e,t){this.id=N.id(),this.activated=!1,this.serviceIdentifier=e,this.scope=t,this.type=A.BindingTypeEnum.Invalid,this.constraint=function(e){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return e.prototype.clone=function(){var t=new e(this.serviceIdentifier,this.scope);return t.activated=t.scope===A.BindingScopeEnum.Singleton&&this.activated,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.factory=this.factory,t.provider=this.provider,t.constraint=this.constraint,t.onActivation=this.onActivation,t.cache=this.cache,t},e}();k.Binding=R;var j={};Object.defineProperty(j,"__esModule",{value:!0}),j.STACK_OVERFLOW=j.CIRCULAR_DEPENDENCY_IN_FACTORY=j.POST_CONSTRUCT_ERROR=j.MULTIPLE_POST_CONSTRUCT_METHODS=j.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=j.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=j.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=j.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=j.ARGUMENTS_LENGTH_MISMATCH=j.INVALID_DECORATOR_OPERATION=j.INVALID_TO_SELF_VALUE=j.INVALID_FUNCTION_BINDING=j.INVALID_MIDDLEWARE_RETURN=j.NO_MORE_SNAPSHOTS_AVAILABLE=j.INVALID_BINDING_TYPE=j.NOT_IMPLEMENTED=j.CIRCULAR_DEPENDENCY=j.UNDEFINED_INJECT_ANNOTATION=j.MISSING_INJECT_ANNOTATION=j.MISSING_INJECTABLE_ANNOTATION=j.NOT_REGISTERED=j.CANNOT_UNBIND=j.AMBIGUOUS_MATCH=j.KEY_NOT_FOUND=j.NULL_ARGUMENT=j.DUPLICATED_METADATA=j.DUPLICATED_INJECTABLE_DECORATOR=void 0,j.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",j.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",j.NULL_ARGUMENT="NULL argument",j.KEY_NOT_FOUND="Key Not Found",j.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",j.CANNOT_UNBIND="Could not unbind serviceIdentifier:",j.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",j.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",j.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:";j.UNDEFINED_INJECT_ANNOTATION=function(e){return"@inject called with undefined this could mean that the class "+e+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},j.CIRCULAR_DEPENDENCY="Circular dependency found:",j.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",j.INVALID_BINDING_TYPE="Invalid binding type:",j.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",j.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",j.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",j.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",j.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.";j.ARGUMENTS_LENGTH_MISMATCH=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"The number of constructor arguments in the derived class "+e[0]+" must be >= than the number of constructor arguments of its base class."},j.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",j.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",j.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",j.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",j.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class";j.POST_CONSTRUCT_ERROR=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"@postConstruct error in class "+e[0]+": "+e[1]};j.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"It looks like there is a circular dependency in one of the '"+e[0]+"' bindings. Please investigate bindings withservice identifier '"+e[1]+"'."},j.STACK_OVERFLOW="Maximum call stack size exceeded";var D={};Object.defineProperty(D,"__esModule",{value:!0}),D.MetadataReader=void 0;var I=S,F=function(){function e(){}return e.prototype.getConstructorMetadata=function(e){return{compilerGeneratedMetadata:Reflect.getMetadata(I.PARAM_TYPES,e),userGeneratedMetadata:Reflect.getMetadata(I.TAGGED,e)||{}}},e.prototype.getPropertiesMetadata=function(e){return Reflect.getMetadata(I.TAGGED_PROP,e)||[]},e}();D.MetadataReader=F;var G={},L={};Object.defineProperty(L,"__esModule",{value:!0}),L.BindingCount=void 0;L.BindingCount={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};var H={};Object.defineProperty(H,"__esModule",{value:!0}),H.isStackOverflowExeption=void 0;var B=j;H.isStackOverflowExeption=function(e){return e instanceof RangeError||e.message===B.STACK_OVERFLOW};var U={};Object.defineProperty(U,"__esModule",{value:!0}),U.circularDependencyToException=U.listMetadataForTarget=U.listRegisteredBindingsForServiceIdentifier=U.getServiceIdentifierAsString=U.getFunctionName=void 0;var V=j;function z(e){return"function"==typeof e?e.name:"symbol"==typeof e?e.toString():e}function Y(e,t){return null!==e.parentRequest&&(e.parentRequest.serviceIdentifier===t||Y(e.parentRequest,t))}function $(e){if(e.name)return e.name;var t=e.toString(),n=t.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+t}U.getServiceIdentifierAsString=z,U.listRegisteredBindingsForServiceIdentifier=function(e,t,n){var r="",o=n(e,t);return 0!==o.length&&(r="\nRegistered bindings:",o.forEach((function(e){var t="Object";null!==e.implementationType&&(t=$(e.implementationType)),r=r+"\n "+t,e.constraint.metaData&&(r=r+" - "+e.constraint.metaData)}))),r},U.circularDependencyToException=function e(t){t.childRequests.forEach((function(t){if(Y(t,t.serviceIdentifier)){var n=function(e){return function e(t,n){void 0===n&&(n=[]);var r=z(t.serviceIdentifier);return n.push(r),null!==t.parentRequest?e(t.parentRequest,n):n}(e).reverse().join(" --\x3e ")}(t);throw new Error(V.CIRCULAR_DEPENDENCY+" "+n)}e(t)}))},U.listMetadataForTarget=function(e,t){if(t.isTagged()||t.isNamed()){var n="",r=t.getNamedTag(),o=t.getCustomTags();return null!==r&&(n+=r.toString()+"\n"),null!==o&&o.forEach((function(e){n+=e.toString()+"\n"}))," "+e+"\n "+e+" - "+n}return" "+e},U.getFunctionName=$;var W={};Object.defineProperty(W,"__esModule",{value:!0}),W.Context=void 0;var K=M,q=function(){function e(e){this.id=K.id(),this.container=e}return e.prototype.addPlan=function(e){this.plan=e},e.prototype.setCurrentRequest=function(e){this.currentRequest=e},e}();W.Context=q;var X={};Object.defineProperty(X,"__esModule",{value:!0}),X.Metadata=void 0;var Z=S,J=function(){function e(e,t){this.key=e,this.value=t}return e.prototype.toString=function(){return this.key===Z.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},e}();X.Metadata=J;var Q={};Object.defineProperty(Q,"__esModule",{value:!0}),Q.Plan=void 0;var ee=function(e,t){this.parentContext=e,this.rootRequest=t};Q.Plan=ee;var te={},ne={},re={};Object.defineProperty(re,"__esModule",{value:!0}),re.tagProperty=re.tagParameter=re.decorate=void 0;var oe=j,ie=S;function ae(e,t,n,r,o){var i={},a="number"==typeof o,s=void 0!==o&&a?o.toString():n;if(a&&void 0!==n)throw new Error(oe.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(e,t)&&(i=Reflect.getMetadata(e,t));var l=i[s];if(Array.isArray(l))for(var c=0,u=l;c<u.length;c++){var d=u[c];if(d.key===r.key)throw new Error(oe.DUPLICATED_METADATA+" "+d.key.toString())}else l=[];l.push(r),i[s]=l,Reflect.defineMetadata(e,i,t)}function se(e,t){Reflect.decorate(e,t)}function le(e,t){return function(n,r){t(n,r,e)}}re.tagParameter=function(e,t,n,r){ae(ie.TAGGED,e,t,r,n)},re.tagProperty=function(e,t,n){ae(ie.TAGGED_PROP,e.constructor,t,n)},re.decorate=function(e,t,n){"number"==typeof n?se([le(n,e)],t):"string"==typeof n?Reflect.decorate([e],t,n):se([e],t)},Object.defineProperty(ne,"__esModule",{value:!0}),ne.inject=ne.LazyServiceIdentifer=void 0;var ce=j,ue=S,de=X,fe=re,he=function(){function e(e){this._cb=e}return e.prototype.unwrap=function(){return this._cb()},e}();ne.LazyServiceIdentifer=he,ne.inject=function(e){return function(t,n,r){if(void 0===e)throw new Error(ce.UNDEFINED_INJECT_ANNOTATION(t.name));var o=new de.Metadata(ue.INJECT_TAG,e);"number"==typeof r?fe.tagParameter(t,n,r,o):fe.tagProperty(t,n,o)}};var pe={},ge={};Object.defineProperty(ge,"__esModule",{value:!0}),ge.QueryableString=void 0;var ve=function(){function e(e){this.str=e}return e.prototype.startsWith=function(e){return 0===this.str.indexOf(e)},e.prototype.endsWith=function(e){var t,n=e.split("").reverse().join("");return t=this.str.split("").reverse().join(""),this.startsWith.call({str:t},n)},e.prototype.contains=function(e){return-1!==this.str.indexOf(e)},e.prototype.equals=function(e){return this.str===e},e.prototype.value=function(){return this.str},e}();ge.QueryableString=ve,Object.defineProperty(pe,"__esModule",{value:!0}),pe.Target=void 0;var ye=S,me=M,be=X,we=ge,xe=function(){function e(e,t,n,r){this.id=me.id(),this.type=e,this.serviceIdentifier=n,this.name=new we.QueryableString(t||""),this.metadata=new Array;var o=null;"string"==typeof r?o=new be.Metadata(ye.NAMED_TAG,r):r instanceof be.Metadata&&(o=r),null!==o&&this.metadata.push(o)}return e.prototype.hasTag=function(e){for(var t=0,n=this.metadata;t<n.length;t++){if(n[t].key===e)return!0}return!1},e.prototype.isArray=function(){return this.hasTag(ye.MULTI_INJECT_TAG)},e.prototype.matchesArray=function(e){return this.matchesTag(ye.MULTI_INJECT_TAG)(e)},e.prototype.isNamed=function(){return this.hasTag(ye.NAMED_TAG)},e.prototype.isTagged=function(){return this.metadata.some((function(e){return ye.NON_CUSTOM_TAG_KEYS.every((function(t){return e.key!==t}))}))},e.prototype.isOptional=function(){return this.matchesTag(ye.OPTIONAL_TAG)(!0)},e.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(e){return e.key===ye.NAMED_TAG}))[0]:null},e.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(e){return ye.NON_CUSTOM_TAG_KEYS.every((function(t){return e.key!==t}))})):null},e.prototype.matchesNamedTag=function(e){return this.matchesTag(ye.NAMED_TAG)(e)},e.prototype.matchesTag=function(e){var t=this;return function(n){for(var r=0,o=t.metadata;r<o.length;r++){var i=o[r];if(i.key===e&&i.value===n)return!0}return!1}},e}();pe.Target=xe,function(e){var t=_&&_.__spreadArray||function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e};Object.defineProperty(e,"__esModule",{value:!0}),e.getFunctionName=e.getBaseClassDependencyCount=e.getDependencies=void 0;var n=ne,r=j,o=P,i=S,a=U;Object.defineProperty(e,"getFunctionName",{enumerable:!0,get:function(){return a.getFunctionName}});var s=pe;function l(e,n,o,i){var a=e.getConstructorMetadata(o),s=a.compilerGeneratedMetadata;if(void 0===s){var l=r.MISSING_INJECTABLE_ANNOTATION+" "+n+".";throw new Error(l)}var d=a.userGeneratedMetadata,f=Object.keys(d),h=0===o.length&&f.length>0,p=f.length>o.length,g=function(e,t,n,r,o){for(var i=[],a=0;a<o;a++){var s=c(a,e,t,n,r);null!==s&&i.push(s)}return i}(i,n,s,d,h||p?f.length:o.length),v=u(e,o);return t(t([],g),v)}function c(e,t,i,a,l){var c=l[e.toString()]||[],u=d(c),f=!0!==u.unmanaged,h=a[e],p=u.inject||u.multiInject;if((h=p||h)instanceof n.LazyServiceIdentifer&&(h=h.unwrap()),f){if(!t&&(h===Object||h===Function||void 0===h)){var g=r.MISSING_INJECT_ANNOTATION+" argument "+e+" in class "+i+".";throw new Error(g)}var v=new s.Target(o.TargetTypeEnum.ConstructorArgument,u.targetName,h);return v.metadata=c,v}return null}function u(e,n){for(var r=e.getPropertiesMetadata(n),i=[],a=0,l=Object.keys(r);a<l.length;a++){var c=l[a],f=r[c],h=d(r[c]),p=h.targetName||c,g=h.inject||h.multiInject,v=new s.Target(o.TargetTypeEnum.ClassProperty,p,g);v.metadata=f,i.push(v)}var y=Object.getPrototypeOf(n.prototype).constructor;if(y!==Object){var m=u(e,y);i=t(t([],i),m)}return i}function d(e){var t={};return e.forEach((function(e){t[e.key.toString()]=e.value})),{inject:t[i.INJECT_TAG],multiInject:t[i.MULTI_INJECT_TAG],targetName:t[i.NAME_TAG],unmanaged:t[i.UNMANAGED_TAG]}}e.getDependencies=function(e,t){return l(e,a.getFunctionName(t),t,!1)},e.getBaseClassDependencyCount=function e(t,n){var r=Object.getPrototypeOf(n.prototype).constructor;if(r!==Object){var o=l(t,a.getFunctionName(r),r,!0),s=o.map((function(e){return e.metadata.filter((function(e){return e.key===i.UNMANAGED_TAG}))})),c=[].concat.apply([],s).length,u=o.length-c;return u>0?u:e(t,r)}return 0}}(te);var _e={};Object.defineProperty(_e,"__esModule",{value:!0}),_e.Request=void 0;var Ee=M,Oe=function(){function e(e,t,n,r,o){this.id=Ee.id(),this.serviceIdentifier=e,this.parentContext=t,this.parentRequest=n,this.target=o,this.childRequests=[],this.bindings=Array.isArray(r)?r:[r],this.requestScope=null===n?new Map:null}return e.prototype.addChildRequest=function(t,n,r){var o=new e(t,this.parentContext,this,n,r);return this.childRequests.push(o),o},e}();_e.Request=Oe,Object.defineProperty(G,"__esModule",{value:!0}),G.getBindingDictionary=G.createMockRequest=G.plan=void 0;var Se=L,Ce=j,ke=P,Pe=S,Me=H,Te=U,Ae=W,Ne=X,Re=Q,je=te,De=_e,Ie=pe;function Fe(e){return e._bindingDictionary}function Ge(e,t,n,r,o){var i=He(n.container,o.serviceIdentifier),a=[];return i.length===Se.BindingCount.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"==typeof o.serviceIdentifier&&e.getConstructorMetadata(o.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(o.serviceIdentifier).toSelf(),i=He(n.container,o.serviceIdentifier)),a=t?i:i.filter((function(e){var t=new De.Request(e.serviceIdentifier,n,r,e,o);return e.constraint(t)})),function(e,t,n,r){switch(t.length){case Se.BindingCount.NoBindingsAvailable:if(n.isOptional())return t;var o=Te.getServiceIdentifierAsString(e),i=Ce.NOT_REGISTERED;throw i+=Te.listMetadataForTarget(o,n),i+=Te.listRegisteredBindingsForServiceIdentifier(r,o,He),new Error(i);case Se.BindingCount.OnlyOneBindingAvailable:if(!n.isArray())return t;case Se.BindingCount.MultipleBindingsAvailable:default:if(n.isArray())return t;o=Te.getServiceIdentifierAsString(e),i=Ce.AMBIGUOUS_MATCH+" "+o;throw i+=Te.listRegisteredBindingsForServiceIdentifier(r,o,He),new Error(i)}}(o.serviceIdentifier,a,o,n.container),a}function Le(e,t,n,r,o,i){var a,s;if(null===o){a=Ge(e,t,r,null,i),s=new De.Request(n,r,null,a,i);var l=new Re.Plan(r,s);r.addPlan(l)}else a=Ge(e,t,r,o,i),s=o.addChildRequest(i.serviceIdentifier,a,i);a.forEach((function(t){var n=null;if(i.isArray())n=s.addChildRequest(t.serviceIdentifier,t,i);else{if(t.cache)return;n=s}if(t.type===ke.BindingTypeEnum.Instance&&null!==t.implementationType){var o=je.getDependencies(e,t.implementationType);if(!r.container.options.skipBaseClassChecks){var a=je.getBaseClassDependencyCount(e,t.implementationType);if(o.length<a){var l=Ce.ARGUMENTS_LENGTH_MISMATCH(je.getFunctionName(t.implementationType));throw new Error(l)}}o.forEach((function(t){Le(e,!1,t.serviceIdentifier,r,n,t)}))}}))}function He(e,t){var n=[],r=Fe(e);return r.hasKey(t)?n=r.get(t):null!==e.parent&&(n=He(e.parent,t)),n}G.getBindingDictionary=Fe,G.plan=function(e,t,n,r,o,i,a,s){void 0===s&&(s=!1);var l=new Ae.Context(t),c=function(e,t,n,r,o,i){var a=e?Pe.MULTI_INJECT_TAG:Pe.INJECT_TAG,s=new Ne.Metadata(a,n),l=new Ie.Target(t,r,n,s);if(void 0!==o){var c=new Ne.Metadata(o,i);l.metadata.push(c)}return l}(n,r,o,"",i,a);try{return Le(e,s,o,l,null,c),l}catch(e){throw Me.isStackOverflowExeption(e)&&l.plan&&Te.circularDependencyToException(l.plan.rootRequest),e}},G.createMockRequest=function(e,t,n,r){var o=new Ie.Target(ke.TargetTypeEnum.Variable,"",t,new Ne.Metadata(n,r)),i=new Ae.Context(e);return new De.Request(t,i,null,[],o)};var Be={},Ue={},Ve=_&&_.__spreadArray||function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e};Object.defineProperty(Ue,"__esModule",{value:!0}),Ue.resolveInstance=void 0;var ze=j,Ye=P,$e=S;Ue.resolveInstance=function(e,t,n){var r,o,i=null;if(t.length>0){var a=t.filter((function(e){return null!==e.target&&e.target.type===Ye.TargetTypeEnum.ConstructorArgument})).map(n);o=a,i=function(e,t,n){var r=t.filter((function(e){return null!==e.target&&e.target.type===Ye.TargetTypeEnum.ClassProperty})),o=r.map(n);return r.forEach((function(t,n){var r;r=t.target.name.value();var i=o[n];e[r]=i})),e}(i=new((r=e).bind.apply(r,Ve([void 0],o))),t,n)}else i=new e;return function(e,t){if(Reflect.hasMetadata($e.POST_CONSTRUCT,e)){var n=Reflect.getMetadata($e.POST_CONSTRUCT,e);try{t[n.value]()}catch(t){throw new Error(ze.POST_CONSTRUCT_ERROR(e.name,t.message))}}}(e,i),i},Object.defineProperty(Be,"__esModule",{value:!0}),Be.resolve=void 0;var We=j,Ke=P,qe=H,Xe=U,Ze=Ue,Je=function(e,t,n){try{return n()}catch(n){throw qe.isStackOverflowExeption(n)?new Error(We.CIRCULAR_DEPENDENCY_IN_FACTORY(e,t.toString())):n}},Qe=function(e){return function(t){t.parentContext.setCurrentRequest(t);var n=t.bindings,r=t.childRequests,o=t.target&&t.target.isArray(),i=!(t.parentRequest&&t.parentRequest.target&&t.target&&t.parentRequest.target.matchesArray(t.target.serviceIdentifier));if(o&&i)return r.map((function(t){return Qe(e)(t)}));var a=null;if(!t.target.isOptional()||0!==n.length){var s=n[0],l=s.scope===Ke.BindingScopeEnum.Singleton,c=s.scope===Ke.BindingScopeEnum.Request;if(l&&s.activated)return s.cache;if(c&&null!==e&&e.has(s.id))return e.get(s.id);if(s.type===Ke.BindingTypeEnum.ConstantValue)a=s.cache,s.activated=!0;else if(s.type===Ke.BindingTypeEnum.Function)a=s.cache,s.activated=!0;else if(s.type===Ke.BindingTypeEnum.Constructor)a=s.implementationType;else if(s.type===Ke.BindingTypeEnum.DynamicValue&&null!==s.dynamicValue)a=Je("toDynamicValue",s.serviceIdentifier,(function(){return s.dynamicValue(t.parentContext)}));else if(s.type===Ke.BindingTypeEnum.Factory&&null!==s.factory)a=Je("toFactory",s.serviceIdentifier,(function(){return s.factory(t.parentContext)}));else if(s.type===Ke.BindingTypeEnum.Provider&&null!==s.provider)a=Je("toProvider",s.serviceIdentifier,(function(){return s.provider(t.parentContext)}));else{if(s.type!==Ke.BindingTypeEnum.Instance||null===s.implementationType){var u=Xe.getServiceIdentifierAsString(t.serviceIdentifier);throw new Error(We.INVALID_BINDING_TYPE+" "+u)}a=Ze.resolveInstance(s.implementationType,r,Qe(e))}return"function"==typeof s.onActivation&&(a=s.onActivation(t.parentContext,a)),l&&(s.cache=a,s.activated=!0),c&&null!==e&&!e.has(s.id)&&e.set(s.id,a),a}}};Be.resolve=function(e){return Qe(e.plan.rootRequest.requestScope)(e.plan.rootRequest)};var et={},tt={},nt={},rt={},ot={},it={},at={};Object.defineProperty(at,"__esModule",{value:!0}),at.typeConstraint=at.namedConstraint=at.taggedConstraint=at.traverseAncerstors=void 0;var st=S,lt=X,ct=function(e,t){var n=e.parentRequest;return null!==n&&(!!t(n)||ct(n,t))};at.traverseAncerstors=ct;var ut=function(e){return function(t){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(e)(t)};return n.metaData=new lt.Metadata(e,t),n}};at.taggedConstraint=ut;var dt=ut(st.NAMED_TAG);at.namedConstraint=dt;at.typeConstraint=function(e){return function(t){var n=null;if(null!==t){if(n=t.bindings[0],"string"==typeof e)return n.serviceIdentifier===e;var r=t.bindings[0].implementationType;return e===r}return!1}},Object.defineProperty(it,"__esModule",{value:!0}),it.BindingWhenSyntax=void 0;var ft=ot,ht=at,pt=function(){function e(e){this._binding=e}return e.prototype.when=function(e){return this._binding.constraint=e,new ft.BindingOnSyntax(this._binding)},e.prototype.whenTargetNamed=function(e){return this._binding.constraint=ht.namedConstraint(e),new ft.BindingOnSyntax(this._binding)},e.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(e){return null!==e.target&&!e.target.isNamed()&&!e.target.isTagged()},new ft.BindingOnSyntax(this._binding)},e.prototype.whenTargetTagged=function(e,t){return this._binding.constraint=ht.taggedConstraint(e)(t),new ft.BindingOnSyntax(this._binding)},e.prototype.whenInjectedInto=function(e){return this._binding.constraint=function(t){return ht.typeConstraint(e)(t.parentRequest)},new ft.BindingOnSyntax(this._binding)},e.prototype.whenParentNamed=function(e){return this._binding.constraint=function(t){return ht.namedConstraint(e)(t.parentRequest)},new ft.BindingOnSyntax(this._binding)},e.prototype.whenParentTagged=function(e,t){return this._binding.constraint=function(n){return ht.taggedConstraint(e)(t)(n.parentRequest)},new ft.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorIs=function(e){return this._binding.constraint=function(t){return ht.traverseAncerstors(t,ht.typeConstraint(e))},new ft.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorIs=function(e){return this._binding.constraint=function(t){return!ht.traverseAncerstors(t,ht.typeConstraint(e))},new ft.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorNamed=function(e){return this._binding.constraint=function(t){return ht.traverseAncerstors(t,ht.namedConstraint(e))},new ft.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorNamed=function(e){return this._binding.constraint=function(t){return!ht.traverseAncerstors(t,ht.namedConstraint(e))},new ft.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._binding.constraint=function(n){return ht.traverseAncerstors(n,ht.taggedConstraint(e)(t))},new ft.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorTagged=function(e,t){return this._binding.constraint=function(n){return!ht.traverseAncerstors(n,ht.taggedConstraint(e)(t))},new ft.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorMatches=function(e){return this._binding.constraint=function(t){return ht.traverseAncerstors(t,e)},new ft.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorMatches=function(e){return this._binding.constraint=function(t){return!ht.traverseAncerstors(t,e)},new ft.BindingOnSyntax(this._binding)},e}();it.BindingWhenSyntax=pt,Object.defineProperty(ot,"__esModule",{value:!0}),ot.BindingOnSyntax=void 0;var gt=it,vt=function(){function e(e){this._binding=e}return e.prototype.onActivation=function(e){return this._binding.onActivation=e,new gt.BindingWhenSyntax(this._binding)},e}();ot.BindingOnSyntax=vt,Object.defineProperty(rt,"__esModule",{value:!0}),rt.BindingWhenOnSyntax=void 0;var yt=ot,mt=it,bt=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new mt.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new yt.BindingOnSyntax(this._binding)}return e.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},e.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},e.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},e.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},e.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},e.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},e.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},e.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},e.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},e.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},e.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},e.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},e.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},e}();rt.BindingWhenOnSyntax=bt,Object.defineProperty(nt,"__esModule",{value:!0}),nt.BindingInSyntax=void 0;var wt=P,xt=rt,_t=function(){function e(e){this._binding=e}return e.prototype.inRequestScope=function(){return this._binding.scope=wt.BindingScopeEnum.Request,new xt.BindingWhenOnSyntax(this._binding)},e.prototype.inSingletonScope=function(){return this._binding.scope=wt.BindingScopeEnum.Singleton,new xt.BindingWhenOnSyntax(this._binding)},e.prototype.inTransientScope=function(){return this._binding.scope=wt.BindingScopeEnum.Transient,new xt.BindingWhenOnSyntax(this._binding)},e}();nt.BindingInSyntax=_t,Object.defineProperty(tt,"__esModule",{value:!0}),tt.BindingInWhenOnSyntax=void 0;var Et=nt,Ot=ot,St=it,Ct=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new St.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new Ot.BindingOnSyntax(this._binding),this._bindingInSyntax=new Et.BindingInSyntax(e)}return e.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},e.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},e.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},e.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},e.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},e.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},e.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},e.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},e.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},e.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},e.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},e.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},e.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},e.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},e.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},e.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},e}();tt.BindingInWhenOnSyntax=Ct,Object.defineProperty(et,"__esModule",{value:!0}),et.BindingToSyntax=void 0;var kt=j,Pt=P,Mt=tt,Tt=rt,At=function(){function e(e){this._binding=e}return e.prototype.to=function(e){return this._binding.type=Pt.BindingTypeEnum.Instance,this._binding.implementationType=e,new Mt.BindingInWhenOnSyntax(this._binding)},e.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error(""+kt.INVALID_TO_SELF_VALUE);var e=this._binding.serviceIdentifier;return this.to(e)},e.prototype.toConstantValue=function(e){return this._binding.type=Pt.BindingTypeEnum.ConstantValue,this._binding.cache=e,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=Pt.BindingScopeEnum.Singleton,new Tt.BindingWhenOnSyntax(this._binding)},e.prototype.toDynamicValue=function(e){return this._binding.type=Pt.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=e,this._binding.implementationType=null,new Mt.BindingInWhenOnSyntax(this._binding)},e.prototype.toConstructor=function(e){return this._binding.type=Pt.BindingTypeEnum.Constructor,this._binding.implementationType=e,this._binding.scope=Pt.BindingScopeEnum.Singleton,new Tt.BindingWhenOnSyntax(this._binding)},e.prototype.toFactory=function(e){return this._binding.type=Pt.BindingTypeEnum.Factory,this._binding.factory=e,this._binding.scope=Pt.BindingScopeEnum.Singleton,new Tt.BindingWhenOnSyntax(this._binding)},e.prototype.toFunction=function(e){if("function"!=typeof e)throw new Error(kt.INVALID_FUNCTION_BINDING);var t=this.toConstantValue(e);return this._binding.type=Pt.BindingTypeEnum.Function,this._binding.scope=Pt.BindingScopeEnum.Singleton,t},e.prototype.toAutoFactory=function(e){return this._binding.type=Pt.BindingTypeEnum.Factory,this._binding.factory=function(t){return function(){return t.container.get(e)}},this._binding.scope=Pt.BindingScopeEnum.Singleton,new Tt.BindingWhenOnSyntax(this._binding)},e.prototype.toProvider=function(e){return this._binding.type=Pt.BindingTypeEnum.Provider,this._binding.provider=e,this._binding.scope=Pt.BindingScopeEnum.Singleton,new Tt.BindingWhenOnSyntax(this._binding)},e.prototype.toService=function(e){this.toDynamicValue((function(t){return t.container.get(e)}))},e}();et.BindingToSyntax=At;var Nt={};Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.ContainerSnapshot=void 0;var Rt=function(){function e(){}return e.of=function(t,n){var r=new e;return r.bindings=t,r.middleware=n,r},e}();Nt.ContainerSnapshot=Rt;var jt={};Object.defineProperty(jt,"__esModule",{value:!0}),jt.Lookup=void 0;var Dt=j,It=function(){function e(){this._map=new Map}return e.prototype.getMap=function(){return this._map},e.prototype.add=function(e,t){if(null==e)throw new Error(Dt.NULL_ARGUMENT);if(null==t)throw new Error(Dt.NULL_ARGUMENT);var n=this._map.get(e);void 0!==n?(n.push(t),this._map.set(e,n)):this._map.set(e,[t])},e.prototype.get=function(e){if(null==e)throw new Error(Dt.NULL_ARGUMENT);var t=this._map.get(e);if(void 0!==t)return t;throw new Error(Dt.KEY_NOT_FOUND)},e.prototype.remove=function(e){if(null==e)throw new Error(Dt.NULL_ARGUMENT);if(!this._map.delete(e))throw new Error(Dt.KEY_NOT_FOUND)},e.prototype.removeByCondition=function(e){var t=this;this._map.forEach((function(n,r){var o=n.filter((function(t){return!e(t)}));o.length>0?t._map.set(r,o):t._map.delete(r)}))},e.prototype.hasKey=function(e){if(null==e)throw new Error(Dt.NULL_ARGUMENT);return this._map.has(e)},e.prototype.clone=function(){var t=new e;return this._map.forEach((function(e,n){e.forEach((function(e){return t.add(n,e.clone())}))})),t},e.prototype.traverse=function(e){this._map.forEach((function(t,n){e(n,t)}))},e}();jt.Lookup=It;var Ft=_&&_.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},Gt=_&&_.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Lt=_&&_.__spreadArray||function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e};Object.defineProperty(C,"__esModule",{value:!0}),C.Container=void 0;var Ht=k,Bt=j,Ut=P,Vt=S,zt=D,Yt=G,$t=Be,Wt=et,Kt=M,qt=U,Xt=Nt,Zt=jt,Jt=function(){function e(e){this._appliedMiddleware=[];var t=e||{};if("object"!=typeof t)throw new Error(""+Bt.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0===t.defaultScope)t.defaultScope=Ut.BindingScopeEnum.Transient;else if(t.defaultScope!==Ut.BindingScopeEnum.Singleton&&t.defaultScope!==Ut.BindingScopeEnum.Transient&&t.defaultScope!==Ut.BindingScopeEnum.Request)throw new Error(""+Bt.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0===t.autoBindInjectable)t.autoBindInjectable=!1;else if("boolean"!=typeof t.autoBindInjectable)throw new Error(""+Bt.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(void 0===t.skipBaseClassChecks)t.skipBaseClassChecks=!1;else if("boolean"!=typeof t.skipBaseClassChecks)throw new Error(""+Bt.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:t.autoBindInjectable,defaultScope:t.defaultScope,skipBaseClassChecks:t.skipBaseClassChecks},this.id=Kt.id(),this._bindingDictionary=new Zt.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new zt.MetadataReader}return e.merge=function(t,n){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];var i=new e,a=Lt([t,n],r).map((function(e){return Yt.getBindingDictionary(e)})),s=Yt.getBindingDictionary(i);function l(e,t){e.traverse((function(e,n){n.forEach((function(e){t.add(e.serviceIdentifier,e.clone())}))}))}return a.forEach((function(e){l(e,s)})),i},e.prototype.load=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=this._getContainerModuleHelpersFactory(),r=0,o=e;r<o.length;r++){var i=o[r],a=n(i.id);i.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)}},e.prototype.loadAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Ft(this,void 0,void 0,(function(){var t,n,r,o,i;return Gt(this,(function(a){switch(a.label){case 0:t=this._getContainerModuleHelpersFactory(),n=0,r=e,a.label=1;case 1:return n<r.length?(o=r[n],i=t(o.id),[4,o.registry(i.bindFunction,i.unbindFunction,i.isboundFunction,i.rebindFunction)]):[3,4];case 2:a.sent(),a.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},e.prototype.unload=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(e){return function(t){return t.moduleId===e}};t.forEach((function(t){var n=r(t.id);e._bindingDictionary.removeByCondition(n)}))},e.prototype.bind=function(e){var t=this.options.defaultScope||Ut.BindingScopeEnum.Transient,n=new Ht.Binding(e,t);return this._bindingDictionary.add(e,n),new Wt.BindingToSyntax(n)},e.prototype.rebind=function(e){return this.unbind(e),this.bind(e)},e.prototype.unbind=function(e){try{this._bindingDictionary.remove(e)}catch(t){throw new Error(Bt.CANNOT_UNBIND+" "+qt.getServiceIdentifierAsString(e))}},e.prototype.unbindAll=function(){this._bindingDictionary=new Zt.Lookup},e.prototype.isBound=function(e){var t=this._bindingDictionary.hasKey(e);return!t&&this.parent&&(t=this.parent.isBound(e)),t},e.prototype.isBoundNamed=function(e,t){return this.isBoundTagged(e,Vt.NAMED_TAG,t)},e.prototype.isBoundTagged=function(e,t,n){var r=!1;if(this._bindingDictionary.hasKey(e)){var o=this._bindingDictionary.get(e),i=Yt.createMockRequest(this,e,t,n);r=o.some((function(e){return e.constraint(i)}))}return!r&&this.parent&&(r=this.parent.isBoundTagged(e,t,n)),r},e.prototype.snapshot=function(){this._snapshots.push(Xt.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},e.prototype.restore=function(){var e=this._snapshots.pop();if(void 0===e)throw new Error(Bt.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=e.bindings,this._middleware=e.middleware},e.prototype.createChild=function(t){var n=new e(t||this.options);return n.parent=this,n},e.prototype.applyMiddleware=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._appliedMiddleware=this._appliedMiddleware.concat(e);var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=e.reduce((function(e,t){return t(e)}),n)},e.prototype.applyCustomMetadataReader=function(e){this._metadataReader=e},e.prototype.get=function(e){return this._get(!1,!1,Ut.TargetTypeEnum.Variable,e)},e.prototype.getTagged=function(e,t,n){return this._get(!1,!1,Ut.TargetTypeEnum.Variable,e,t,n)},e.prototype.getNamed=function(e,t){return this.getTagged(e,Vt.NAMED_TAG,t)},e.prototype.getAll=function(e){return this._get(!0,!0,Ut.TargetTypeEnum.Variable,e)},e.prototype.getAllTagged=function(e,t,n){return this._get(!1,!0,Ut.TargetTypeEnum.Variable,e,t,n)},e.prototype.getAllNamed=function(e,t){return this.getAllTagged(e,Vt.NAMED_TAG,t)},e.prototype.resolve=function(e){var t=this.createChild();return t.bind(e).toSelf(),this._appliedMiddleware.forEach((function(e){t.applyMiddleware(e)})),t.get(e)},e.prototype._getContainerModuleHelpersFactory=function(){var e=this,t=function(e,t){e._binding.moduleId=t},n=function(n){return function(r){var o=e.rebind.bind(e)(r);return t(o,n),o}};return function(r){return{bindFunction:(o=r,function(n){var r=e.bind.bind(e)(n);return t(r,o),r}),isboundFunction:function(t){return e.isBound.bind(e)(t)},rebindFunction:n(r),unbindFunction:function(t){e.unbind.bind(e)(t)}};var o}},e.prototype._get=function(e,t,n,r,o,i){var a=null,s={avoidConstraints:e,contextInterceptor:function(e){return e},isMultiInject:t,key:o,serviceIdentifier:r,targetType:n,value:i};if(this._middleware){if(null==(a=this._middleware(s)))throw new Error(Bt.INVALID_MIDDLEWARE_RETURN)}else a=this._planAndResolve()(s);return a},e.prototype._planAndResolve=function(){var e=this;return function(t){var n=Yt.plan(e._metadataReader,e,t.isMultiInject,t.targetType,t.serviceIdentifier,t.key,t.value,t.avoidConstraints);return n=t.contextInterceptor(n),$t.resolve(n)}},e}();C.Container=Jt;var Qt={};Object.defineProperty(Qt,"__esModule",{value:!0}),Qt.AsyncContainerModule=Qt.ContainerModule=void 0;var en=M,tn=function(e){this.id=en.id(),this.registry=e};Qt.ContainerModule=tn;var nn=function(e){this.id=en.id(),this.registry=e};Qt.AsyncContainerModule=nn;var rn={};Object.defineProperty(rn,"__esModule",{value:!0}),rn.injectable=void 0;var on=j,an=S;rn.injectable=function(){return function(e){if(Reflect.hasOwnMetadata(an.PARAM_TYPES,e))throw new Error(on.DUPLICATED_INJECTABLE_DECORATOR);var t=Reflect.getMetadata(an.DESIGN_PARAM_TYPES,e)||[];return Reflect.defineMetadata(an.PARAM_TYPES,t,e),e}};var sn={};Object.defineProperty(sn,"__esModule",{value:!0}),sn.tagged=void 0;var ln=X,cn=re;sn.tagged=function(e,t){return function(n,r,o){var i=new ln.Metadata(e,t);"number"==typeof o?cn.tagParameter(n,r,o,i):cn.tagProperty(n,r,i)}};var un={};Object.defineProperty(un,"__esModule",{value:!0}),un.named=void 0;var dn=S,fn=X,hn=re;un.named=function(e){return function(t,n,r){var o=new fn.Metadata(dn.NAMED_TAG,e);"number"==typeof r?hn.tagParameter(t,n,r,o):hn.tagProperty(t,n,o)}};var pn={};Object.defineProperty(pn,"__esModule",{value:!0}),pn.optional=void 0;var gn=S,vn=X,yn=re;pn.optional=function(){return function(e,t,n){var r=new vn.Metadata(gn.OPTIONAL_TAG,!0);"number"==typeof n?yn.tagParameter(e,t,n,r):yn.tagProperty(e,t,r)}};var mn={};Object.defineProperty(mn,"__esModule",{value:!0}),mn.unmanaged=void 0;var bn=S,wn=X,xn=re;mn.unmanaged=function(){return function(e,t,n){var r=new wn.Metadata(bn.UNMANAGED_TAG,!0);xn.tagParameter(e,t,n,r)}};var _n={};Object.defineProperty(_n,"__esModule",{value:!0}),_n.multiInject=void 0;var En=S,On=X,Sn=re;_n.multiInject=function(e){return function(t,n,r){var o=new On.Metadata(En.MULTI_INJECT_TAG,e);"number"==typeof r?Sn.tagParameter(t,n,r,o):Sn.tagProperty(t,n,o)}};var Cn={};Object.defineProperty(Cn,"__esModule",{value:!0}),Cn.targetName=void 0;var kn=S,Pn=X,Mn=re;Cn.targetName=function(e){return function(t,n,r){var o=new Pn.Metadata(kn.NAME_TAG,e);Mn.tagParameter(t,n,r,o)}};var Tn={};Object.defineProperty(Tn,"__esModule",{value:!0}),Tn.postConstruct=void 0;var An=j,Nn=S,Rn=X;Tn.postConstruct=function(){return function(e,t,n){var r=new Rn.Metadata(Nn.POST_CONSTRUCT,t);if(Reflect.hasOwnMetadata(Nn.POST_CONSTRUCT,e.constructor))throw new Error(An.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(Nn.POST_CONSTRUCT,r,e.constructor)}};var jn={};Object.defineProperty(jn,"__esModule",{value:!0}),jn.multiBindToService=void 0;var Dn,In,Fn;function Gn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ln(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gn(Object(n),!0).forEach((function(t){zn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Hn(e){return Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hn(e)}function Bn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Un(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vn(e,t,n){return t&&Un(e.prototype,t),n&&Un(e,n),e}function zn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yn(e){return function(e){if(Array.isArray(e))return $n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return $n(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $n(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}
/*! *****************************************************************************
    Copyright (C) Microsoft. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */()}function $n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Wn(e,t){return t.lifecycle===In.Lifecycle.singleton?function(e){return e.inSingletonScope()}(e):function(e){return e.inTransientScope()}(e)}function Kn(e,t){e.whenTargetNamed(Zn(t))}function qn(e,t){return t.container.bind(Jn(e))}function Xn(e,t){var n=t.container.parent,r=n&&n.isBound(Jn(e));return t.container.isBound(Jn(e))&&!r?t.container.rebind(Jn(e)):t.container.bind(Jn(e))}function Zn(e){return Fn.isDefinedToken(e)?e.symbol:e}function Jn(e){return Fn.isDefinedToken(e)?e.symbol:e}jn.multiBindToService=function(e){return function(t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.forEach((function(n){return e.bind(n).toService(t)}))}}},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.multiBindToService=e.getServiceIdentifierAsString=e.typeConstraint=e.namedConstraint=e.taggedConstraint=e.traverseAncerstors=e.decorate=e.id=e.MetadataReader=e.postConstruct=e.targetName=e.multiInject=e.unmanaged=e.optional=e.LazyServiceIdentifer=e.inject=e.named=e.tagged=e.injectable=e.ContainerModule=e.AsyncContainerModule=e.TargetTypeEnum=e.BindingTypeEnum=e.BindingScopeEnum=e.Container=e.METADATA_KEY=void 0;var t=S;e.METADATA_KEY=t;var n=C;Object.defineProperty(e,"Container",{enumerable:!0,get:function(){return n.Container}});var r=P;Object.defineProperty(e,"BindingScopeEnum",{enumerable:!0,get:function(){return r.BindingScopeEnum}}),Object.defineProperty(e,"BindingTypeEnum",{enumerable:!0,get:function(){return r.BindingTypeEnum}}),Object.defineProperty(e,"TargetTypeEnum",{enumerable:!0,get:function(){return r.TargetTypeEnum}});var o=Qt;Object.defineProperty(e,"AsyncContainerModule",{enumerable:!0,get:function(){return o.AsyncContainerModule}}),Object.defineProperty(e,"ContainerModule",{enumerable:!0,get:function(){return o.ContainerModule}});var i=rn;Object.defineProperty(e,"injectable",{enumerable:!0,get:function(){return i.injectable}});var a=sn;Object.defineProperty(e,"tagged",{enumerable:!0,get:function(){return a.tagged}});var s=un;Object.defineProperty(e,"named",{enumerable:!0,get:function(){return s.named}});var l=ne;Object.defineProperty(e,"inject",{enumerable:!0,get:function(){return l.inject}}),Object.defineProperty(e,"LazyServiceIdentifer",{enumerable:!0,get:function(){return l.LazyServiceIdentifer}});var c=pn;Object.defineProperty(e,"optional",{enumerable:!0,get:function(){return c.optional}});var u=mn;Object.defineProperty(e,"unmanaged",{enumerable:!0,get:function(){return u.unmanaged}});var d=_n;Object.defineProperty(e,"multiInject",{enumerable:!0,get:function(){return d.multiInject}});var f=Cn;Object.defineProperty(e,"targetName",{enumerable:!0,get:function(){return f.targetName}});var h=Tn;Object.defineProperty(e,"postConstruct",{enumerable:!0,get:function(){return h.postConstruct}});var p=D;Object.defineProperty(e,"MetadataReader",{enumerable:!0,get:function(){return p.MetadataReader}});var g=M;Object.defineProperty(e,"id",{enumerable:!0,get:function(){return g.id}});var v=re;Object.defineProperty(e,"decorate",{enumerable:!0,get:function(){return v.decorate}});var y=at;Object.defineProperty(e,"traverseAncerstors",{enumerable:!0,get:function(){return y.traverseAncerstors}}),Object.defineProperty(e,"taggedConstraint",{enumerable:!0,get:function(){return y.taggedConstraint}}),Object.defineProperty(e,"namedConstraint",{enumerable:!0,get:function(){return y.namedConstraint}}),Object.defineProperty(e,"typeConstraint",{enumerable:!0,get:function(){return y.typeConstraint}});var m=U;Object.defineProperty(e,"getServiceIdentifierAsString",{enumerable:!0,get:function(){return m.getServiceIdentifierAsString}});var b=jn;Object.defineProperty(e,"multiBindToService",{enumerable:!0,get:function(){return b.multiBindToService}})}(O),function(e){!function(t){var n="object"==typeof global?global:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),r=o(e);function o(e,t){return function(n,r){"function"!=typeof e[n]&&Object.defineProperty(e,n,{configurable:!0,writable:!0,value:r}),t&&t(n,r)}}void 0===n.Reflect?n.Reflect=e:r=o(n.Reflect,r),function(e){var t=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,r=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",o=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",i="function"==typeof Object.create,a={__proto__:[]}instanceof Array,s=!i&&!a,l={create:i?function(){return re(Object.create(null))}:a?function(){return re({__proto__:null})}:function(){return re({})},has:s?function(e,n){return t.call(e,n)}:function(e,t){return t in e},get:s?function(e,n){return t.call(e,n)?e[n]:void 0}:function(e,t){return e[t]}},c=Object.getPrototypeOf(Function),u="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,d=u||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?ee():Map,f=u||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?te():Set,h=new(u||"function"!=typeof WeakMap?ne():WeakMap);function p(e,t,n,r){if(D(n)){if(!z(e))throw new TypeError;if(!$(t))throw new TypeError;return O(e,t)}if(!z(e))throw new TypeError;if(!G(t))throw new TypeError;if(!G(r)&&!D(r)&&!I(r))throw new TypeError;return I(r)&&(r=void 0),S(e,t,n=V(n),r)}function g(e,t){function n(n,r){if(!G(n))throw new TypeError;if(!D(r)&&!W(r))throw new TypeError;A(e,t,n,r)}return n}function v(e,t,n,r){if(!G(n))throw new TypeError;return D(r)||(r=V(r)),A(e,t,n,r)}function y(e,t,n){if(!G(t))throw new TypeError;return D(n)||(n=V(n)),k(e,t,n)}function m(e,t,n){if(!G(t))throw new TypeError;return D(n)||(n=V(n)),P(e,t,n)}function b(e,t,n){if(!G(t))throw new TypeError;return D(n)||(n=V(n)),M(e,t,n)}function w(e,t,n){if(!G(t))throw new TypeError;return D(n)||(n=V(n)),T(e,t,n)}function x(e,t){if(!G(e))throw new TypeError;return D(t)||(t=V(t)),N(e,t)}function _(e,t){if(!G(e))throw new TypeError;return D(t)||(t=V(t)),R(e,t)}function E(e,t,n){if(!G(t))throw new TypeError;D(n)||(n=V(n));var r=C(t,n,!1);if(D(r))return!1;if(!r.delete(e))return!1;if(r.size>0)return!0;var o=h.get(t);return o.delete(n),o.size>0||h.delete(t),!0}function O(e,t){for(var n=e.length-1;n>=0;--n){var r=(0,e[n])(t);if(!D(r)&&!I(r)){if(!$(r))throw new TypeError;t=r}}return t}function S(e,t,n,r){for(var o=e.length-1;o>=0;--o){var i=(0,e[o])(t,n,r);if(!D(i)&&!I(i)){if(!G(i))throw new TypeError;r=i}}return r}function C(e,t,n){var r=h.get(e);if(D(r)){if(!n)return;r=new d,h.set(e,r)}var o=r.get(t);if(D(o)){if(!n)return;o=new d,r.set(t,o)}return o}function k(e,t,n){if(P(e,t,n))return!0;var r=Q(t);return!I(r)&&k(e,r,n)}function P(e,t,n){var r=C(t,n,!1);return!D(r)&&B(r.has(e))}function M(e,t,n){if(P(e,t,n))return T(e,t,n);var r=Q(t);return I(r)?void 0:M(e,r,n)}function T(e,t,n){var r=C(t,n,!1);if(!D(r))return r.get(e)}function A(e,t,n,r){C(n,r,!0).set(e,t)}function N(e,t){var n=R(e,t),r=Q(e);if(null===r)return n;var o=N(r,t);if(o.length<=0)return n;if(n.length<=0)return o;for(var i=new f,a=[],s=0,l=n;s<l.length;s++){var c=l[s];i.has(c)||(i.add(c),a.push(c))}for(var u=0,d=o;u<d.length;u++){c=d[u];i.has(c)||(i.add(c),a.push(c))}return a}function R(e,t){var n=[],r=C(e,t,!1);if(D(r))return n;for(var o=q(r.keys()),i=0;;){var a=Z(o);if(!a)return n.length=i,n;var s=X(a);try{n[i]=s}catch(e){try{J(o)}finally{throw e}}i++}}function j(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function D(e){return void 0===e}function I(e){return null===e}function F(e){return"symbol"==typeof e}function G(e){return"object"==typeof e?null!==e:"function"==typeof e}function L(e,t){switch(j(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var n=3===t?"string":5===t?"number":"default",o=K(e,r);if(void 0!==o){var i=o.call(e,n);if(G(i))throw new TypeError;return i}return H(e,"default"===n?"number":n)}function H(e,t){if("string"===t){var n=e.toString;if(Y(n))if(!G(o=n.call(e)))return o;if(Y(r=e.valueOf))if(!G(o=r.call(e)))return o}else{var r;if(Y(r=e.valueOf))if(!G(o=r.call(e)))return o;var o,i=e.toString;if(Y(i))if(!G(o=i.call(e)))return o}throw new TypeError}function B(e){return!!e}function U(e){return""+e}function V(e){var t=L(e,3);return F(t)?t:U(t)}function z(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function Y(e){return"function"==typeof e}function $(e){return"function"==typeof e}function W(e){switch(j(e)){case 3:case 4:return!0;default:return!1}}function K(e,t){var n=e[t];if(null!=n){if(!Y(n))throw new TypeError;return n}}function q(e){var t=K(e,o);if(!Y(t))throw new TypeError;var n=t.call(e);if(!G(n))throw new TypeError;return n}function X(e){return e.value}function Z(e){var t=e.next();return!t.done&&t}function J(e){var t=e.return;t&&t.call(e)}function Q(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===c)return t;if(t!==c)return t;var n=e.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return t;var o=r.constructor;return"function"!=typeof o||o===e?t:o}function ee(){var e={},t=[],n=function(){function e(e,t,n){this._index=0,this._keys=e,this._values=t,this._selector=n}return e.prototype["@@iterator"]=function(){return this},e.prototype[o]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var n=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var n=this._find(e,!0);return this._values[n]=t,this},t.prototype.delete=function(t){var n=this._find(t,!1);if(n>=0){for(var r=this._keys.length,o=n+1;o<r;o++)this._keys[o-1]=this._keys[o],this._values[o-1]=this._values[o];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new n(this._keys,this._values,r)},t.prototype.values=function(){return new n(this._keys,this._values,i)},t.prototype.entries=function(){return new n(this._keys,this._values,a)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[o]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function r(e,t){return e}function i(e,t){return t}function a(e,t){return[e,t]}}function te(){return function(){function e(){this._map=new d}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[o]=function(){return this.keys()},e}()}function ne(){var e=16,n=l.create(),r=o();return function(){function e(){this._key=o()}return e.prototype.has=function(e){var t=i(e,!1);return void 0!==t&&l.has(t,this._key)},e.prototype.get=function(e){var t=i(e,!1);return void 0!==t?l.get(t,this._key):void 0},e.prototype.set=function(e,t){return i(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=i(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=o()},e}();function o(){var e;do{e="@@WeakMap@@"+c()}while(l.has(n,e));return n[e]=!0,e}function i(e,n){if(!t.call(e,r)){if(!n)return;Object.defineProperty(e,r,{value:l.create()})}return e[r]}function a(e,t){for(var n=0;n<t;++n)e[n]=255*Math.random()|0;return e}function s(e){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(e)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(e)):a(new Uint8Array(e),e):a(new Array(e),e)}function c(){var t=s(e);t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var n="",r=0;r<e;++r){var o=t[r];4!==r&&6!==r&&8!==r||(n+="-"),o<16&&(n+="0"),n+=o.toString(16).toLowerCase()}return n}}function re(e){return e.__=void 0,delete e.__,e}e("decorate",p),e("metadata",g),e("defineMetadata",v),e("hasMetadata",y),e("hasOwnMetadata",m),e("getMetadata",b),e("getOwnMetadata",w),e("getMetadataKeys",x),e("getOwnMetadataKeys",_),e("deleteMetadata",E)}(r)}()}(Dn||(Dn={})),function(e){e.defineToken=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{multiple:!0};return new e.DefinedToken(t,n)};var t;e.DefinedToken=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Bn(this,e),this.prototype={},this.name=void 0,this.multiple=void 0,this.symbol=void 0;var r=n.multiple,o=void 0!==r&&r;this.name=t,this.symbol=Symbol(this.name),this.multiple=o},e.isModule=function(e){return!!e&&"object"===Hn(e)&&"id"in e&&"registry"in e},function(e){e.singleton="singleton",e.transient="transient"}(t=e.Lifecycle||(e.Lifecycle={})),e.ClassOptionSymbol=Symbol("SyringeClassOptionSymbol"),e.DefaultOption={lifecycle:t.transient}}(In||(In={})),function(e){e.maybeArrayToArray=function(e){return e instanceof Array?e:void 0!==e?[e]:[]},e.isClass=function(e){return!(!e||"function"!=typeof e||!("prototype"in e))},e.isDefinedToken=function(e){return!!(e&&"object"===Hn(e)&&"symbol"in e&&"multiple"in e)},e.isInjectOption=function(e){return!(!e||"object"!==Hn(e)||!("token"in e))},e.isNamedToken=function(e){return!!(e&&"object"===Hn(e)&&"token"in e&&"named"in e)},e.isMultipleEnabled=function(t){return e.isDefinedToken(t)&&t.multiple}}(Fn||(Fn={}));var Qn=new O.Container;function er(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=O.injectable();return function(n){Reflect.defineMetadata(In.ClassOptionSymbol,Ln(Ln({},e),{},{target:n}),n),t(n)}}function tr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return er(Ln(Ln({},e),{},{lifecycle:In.Lifecycle.singleton}))}function nr(e){return O.inject(Jn(e))}function rr(e){return O.named(Zn(e))}var or=Symbol("SyringeOptionSymbol");var ir=function(){function e(t,n,r){Bn(this,e),this.token=void 0,this.rawToken=void 0,this.named=void 0,this.generalToken=void 0,this.option=void 0,this.context=void 0,this.mutiple=void 0,this.context=t,this.token=n,this.option=r,this.rawToken=Fn.isNamedToken(n)?n.token:n,this.named=Fn.isNamedToken(n)?n.named:void 0,this.mutiple=!!this.named||Fn.isMultipleEnabled(this.rawToken),this.generalToken=this.rawToken}return Vn(e,[{key:"resolve",value:function(){var e,t=this,n=this.context;(e=n)&&"object"===Hn(e)&&"container"in e&&"inversify"in e&&(this.mutiple?this.resolveMutilple(n):(this.resolveMono(n),!this.named&&this.option.contrib.length>0&&this.option.contrib.forEach((function(e){Fn.isMultipleEnabled(e)?qn(e,n).toService(t.generalToken):Xn(e,n).toService(t.generalToken)}))))}},{key:"resolveMono",value:function(e){var t=this;if("useValue"in this.option)return Xn(this.generalToken,e).toConstantValue(this.option.useValue);if(this.option.useDynamic.length>0){var n=this.option.useDynamic[this.option.useDynamic.length-1];return Wn(Xn(this.generalToken,e).toDynamicValue((function(){return n({container:t.context})})),this.option)}if(this.option.useFactory.length>0){var r=this.option.useFactory[this.option.useFactory.length-1];return Xn(this.generalToken,e).toFactory((function(){return r({container:t.context})}))}if(this.option.useClass.length>0){var o=this.option.useClass[this.option.useClass.length-1];return Wn(Xn(this.generalToken,e).to(o),this.option)}}},{key:"resolveMutilple",value:function(e){var t=this,n=this.option.useClass.map((function(n){return Wn(qn(t.generalToken,e).to(n),t.option)})),r=this.option.useDynamic.map((function(n){return Wn(qn(t.generalToken,e).toDynamicValue((function(){return n({container:t.context})})),t.option)})),o=this.option.useFactory.map((function(n){return qn(t.generalToken,e).toFactory((function(){return n({container:t.context})}))})),i="useValue"in this.option?qn(this.generalToken,e).toConstantValue(this.option.useValue):void 0;this.named&&(n.forEach((function(e){return t.named&&Kn(e,t.named)})),r.forEach((function(e){return t.named&&Kn(e,t.named)})),o.forEach((function(e){return t.named&&Kn(e,t.named)})),i&&Kn(i,this.named))}}],[{key:"resolveTarget",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{try{var o=Reflect.getMetadata(or,n);o&&e.resolveOption(t,o)}catch(e){}if(Fn.isClass(n))if(r.useClass){var i=Fn.maybeArrayToArray(r.useClass);i.unshift(n),r.useClass=i}else r.useClass=[n];var a;try{a=Reflect.getMetadata(In.ClassOptionSymbol,n)}catch(e){}if((a=Ln(Ln({},a||{}),r)).token){var s=Fn.maybeArrayToArray(a.token);s.unshift(n),a.token=s}else a.token=[n];e.resolveOption(t,a)}catch(e){}}},{key:"resolveOption",value:function(t,n){var r=function(e){var t=Fn.maybeArrayToArray(e.token),n=Fn.maybeArrayToArray(e.useClass),r=Fn.maybeArrayToArray(e.useDynamic),o=Fn.maybeArrayToArray(e.useFactory),i=Fn.maybeArrayToArray(e.contrib),a=e.lifecycle||In.Lifecycle.transient,s={token:t,useClass:n,lifecycle:i.length>0?In.Lifecycle.singleton:a,contrib:i,useDynamic:r,useFactory:o};return"useValue"in e&&(s.useValue=e.useValue),s}(Ln(Ln({},e.globalConfig),n));(0!==r.useClass.length||0!==r.useDynamic.length||0!==r.useFactory.length||"useValue"in r)&&r.token.forEach((function(n){new e(t,n,Ln({},r)).resolve()}))}}]),e}();ir.globalConfig=In.DefaultOption;var ar=function(){function e(t){Bn(this,e),this.loadedModules=[],this.container=void 0,this.inversify=!0,this.parent=void 0,this.container=t||new O.Container}return Vn(e,[{key:"load",value:function(e,t){!t&&this.loadedModules.includes(e.id)||(e.registry(this.register.bind(this),this.resolveContext()),this.loadedModules.push(e.id))}},{key:"remove",value:function(e){return this.container.unbind(Jn(e))}},{key:"get",value:function(e){return this.container.get(Jn(e))}},{key:"getNamed",value:function(e,t){return this.container.getNamed(Jn(e),Zn(t))}},{key:"getAll",value:function(e){return this.container.getAll(Jn(e))}},{key:"getAllNamed",value:function(e,t){return this.container.getAllNamed(Jn(e),Zn(t))}},{key:"isBound",value:function(e){return this.container.isBound(Jn(e))}},{key:"isBoundNamed",value:function(e,t){return this.container.isBoundNamed(Jn(e),Zn(t))}},{key:"createChild",value:function(){var t=new e(this.container.createChild());return t.parent=this,t}},{key:"register",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Fn.isInjectOption(e)?ir.resolveOption(this,e):ir.resolveTarget(this,e,t)}},{key:"resolveContext",value:function(){return{container:this}}}],[{key:"config",value:function(e){ir.globalConfig=e}}]),e}(),sr=new ar(Qn),lr=sr.register.bind(sr),cr=In.defineToken("ContributionProvider"),ur=function(){function e(t,n,r){Bn(this,e),this.option={recursive:!1,cache:!0},this.services=void 0,this.serviceIdentifier=void 0,this.container=void 0,this.container=n,this.serviceIdentifier=t,r&&(this.option=Ln(Ln({},this.option),r))}return Vn(e,[{key:"setServices",value:function(e){for(var t=[],n=this.container;n;){if(n.isBound(this.serviceIdentifier)){var r=n.getAll(this.serviceIdentifier);t.push.apply(t,Yn(r))}n=e?n.parent:void 0}return t}},{key:"getContributions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Ln(Ln({},this.option),e),n=t.cache,r=t.recursive;return n&&void 0!==this.services||(this.services=this.setServices(!!r)),this.services}}]),e}();function dr(e,t){return{token:{token:cr,named:e},useDynamic:function(n){return new ur(e,n.container,t)},lifecycle:In.Lifecycle.singleton}}function fr(e,t,n){e({token:{token:cr,named:t},useDynamic:function(e){return new ur(t,e.container,n)},lifecycle:In.Lifecycle.singleton})}var hr=function(){function e(t){Bn(this,e),this.id=void 0,this.baseRegistry=void 0,this.optionCollection=void 0,e.moduleId+=1,this.id=e.moduleId,this.baseRegistry=t}return Vn(e,[{key:"registry",get:function(){var e=this;return function(t,n){e.baseRegistry&&e.baseRegistry(t,n),e.optionCollection&&e.optionCollection.forEach((function(e){return t(e)}))}}},{key:"options",get:function(){return this.optionCollection||(this.optionCollection=[]),this.optionCollection}},{key:"register",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){return e.options.push(t)})),this}},{key:"contribution",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){return e.options.push(dr(t))})),this}}]),e}();function pr(e){return new hr(e)}hr.moduleId=0;var gr,vr=function(e){return function(t,n,r){rr(e)(t,n,r),nr(cr)(t,n,r)}};!function(e){e.Provider=cr,e.register=fr}(gr||(gr={}));var yr,mr=Object.freeze({__proto__:null,Container:ar,get Contribution(){return gr},DefaultContributionProvider:ur,GlobalContainer:sr,Module:pr,OptionSymbol:or,Provider:cr,get Syringe(){return In},SyringeModule:hr,get Utils(){return Fn},contrib:vr,inject:nr,injectable:er,named:rr,register:lr,registerSideOption:function(e,t){Reflect.defineMetadata(or,e,t)},singleton:tr,transient:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return er(Ln(Ln({},e),{},{lifecycle:In.Lifecycle.transient}))},decorate:O.decorate,optional:O.optional,postConstruct:O.postConstruct,unmanaged:O.unmanaged});!function(e){var t;!function(e){e.TOP="top",e.BOTTOM="bottom",e.RIGHT="right",e.LEFT="left"}(e.AnchorGroup||(e.AnchorGroup={})),(t=e.AnchorType||(e.AnchorType={})).INPUT="input",t.OUTPUT="output"}(yr||(yr={}));var br={exports:{}};
/*!
      Copyright (c) 2018 Jed Watson.
      Licensed under the MIT License (MIT), see
      http://jedwatson.github.io/classnames
    */!function(e){!function(){var t={}.hasOwnProperty;function n(){for(var e=[],r=0;r<arguments.length;r++){var o=arguments[r];if(o){var i=typeof o;if("string"===i||"number"===i)e.push(o);else if(Array.isArray(o)){if(o.length){var a=n.apply(null,o);a&&e.push(a)}}else if("object"===i)if(o.toString===Object.prototype.toString)for(var s in o)t.call(o,s)&&o[s]&&e.push(s);else e.push(o.toString())}}return e.join(" ")}e.exports?(n.default=n,e.exports=n):window.classNames=n}()}(br);var wr,xr,_r=br.exports;function Er(e){return Er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Er(e)}function Or(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function Sr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kr(e,t,n){return t&&Cr(e.prototype,t),n&&Cr(e,n),e}function Pr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Mr(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Pr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pr(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}!function(e){function t(e){return{dispose:e}}e.is=function(e){return!!e&&"object"===Er(e)&&"dispose"in e&&"function"==typeof e.dispose},e.create=t,e.NONE=t((function(){}))}(wr||(wr={})),function(e){e.None=function(){return wr.NONE},e.map=function(e,t){return function(n,r){return e((function(e){return n.call(r,t(e))}),void 0)}}}(xr||(xr={}));var Tr=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Sr(this,t),this.mono=void 0,this._callbacks=void 0,this.mono=e}return kr(t,[{key:"callbacks",get:function(){return this._callbacks||(this._callbacks=[]),this._callbacks}},{key:"length",get:function(){return this.callbacks.length}},{key:"add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;this.callbacks.push([e,t])}},{key:"remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(!this.isEmpty()){for(var n=!1,r=0;r<this.length;r+=1)if(this.callbacks[r][0]===e){if(this.callbacks[r][1]===t)return void this.callbacks.splice(r,1);n=!0}if(n)throw new Error("You should remove it with the same context you add it")}}},{key:e,value:function(){return this.isEmpty()?[][Symbol.iterator]():this.callbacks.slice(0).map((function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e[0].apply(e[1],n)}}))[Symbol.iterator]()}},{key:"invoke",value:function(){var e,t=[],n=Mr(this);try{for(n.s();!(e=n.n()).done;){var r=e.value;try{t.push(r.apply(void 0,arguments))}catch(e){console.error(e)}}}catch(e){n.e(e)}finally{n.f()}return t}},{key:"isEmpty",value:function(){return 0===this.callbacks.length}},{key:"dispose",value:function(){this._callbacks=void 0}}]),t}(Symbol.iterator),Ar=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Sr(this,e),this.options=void 0,this._event=void 0,this._callbacks=void 0,this.disposed=!1,this.options=t}var t;return kr(e,[{key:"callbacks",get:function(){return this._callbacks||(this._callbacks=new Tr),this._callbacks}},{key:"event",get:function(){var t=this;return this._event||(this._event=function(n,r){t.options.onFirstListenerAdd&&t.callbacks.isEmpty()&&t.options.onFirstListenerAdd(t),t.callbacks.add(n,r);var o={dispose:function(){o.dispose=e.noop,t.disposed||(t.callbacks.remove(n,r),o.dispose=e.noop,t.options.onLastListenerRemove&&t.callbacks.isEmpty()&&t.options.onLastListenerRemove(t))}};return o}),this._event}},{key:"fire",value:function(e){this._callbacks&&this.callbacks.invoke(e)}},{key:"sequence",value:(t=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Or(i,r,o,a,s,"next",e)}function s(e){Or(i,r,o,a,s,"throw",e)}a(void 0)}))}}(regeneratorRuntime.mark((function e(t){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Mr(this.callbacks),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=12;break}return o=r.value,e.next=7,t(o);case 7:if(e.sent){e.next=10;break}return e.abrupt("break",12);case 10:e.next=3;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),n.e(e.t0);case 17:return e.prev=17,n.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[1,14,17,20]])}))),function(e){return t.apply(this,arguments)})},{key:"dispose",value:function(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0),this.disposed=!0}}]),e}();Ar.noop=function(){};var Nr,Rr=Object.freeze(Object.assign((function(e,t){var n=setTimeout(e.bind(t),0);return{dispose:function(){clearTimeout(n)}}}),{maxListeners:0}));!function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:xr.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Rr})}(Nr||(Nr={}));var jr,Dr=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};!function(e){function t(e){return{dispose:e}}e.is=function(e){return!!e&&"object"==typeof e&&"dispose"in e&&"function"==typeof e.dispose},e.create=t,e.NULL=t((()=>{}))}(jr||(jr={}));class Ir{constructor(...e){this.disposables=[],this.onDisposeEmitter=new Ar,this.disposingElements=!1,e.forEach((e=>this.push(e)))}get onDispose(){return this.onDisposeEmitter.event}checkDisposed(){this.disposed&&!this.disposingElements&&(this.onDisposeEmitter.fire(void 0),this.onDisposeEmitter.dispose())}get disposed(){return 0===this.disposables.length}dispose(){return Dr(this,void 0,void 0,(function*(){if(!this.disposed&&!this.disposingElements){for(this.disposingElements=!0;!this.disposed;)try{const e=this.disposables.pop();yield e.dispose()}catch(e){console.error(e)}this.disposingElements=!1,this.checkDisposed()}}))}push(e){const{disposables:t}=this;t.push(e);const n=e.dispose.bind(e),r=jr.create((()=>{const n=t.indexOf(e);-1!==n&&t.splice(n,1),this.checkDisposed()}));return e.dispose=()=>{r.dispose(),n()},r}pushAll(e){return e.map((e=>this.push(e)))}}class Fr{constructor(){this.isResolved=!1,this.isRejected=!1,this.promise=new Promise(((e,t)=>{this.resolve=(...t)=>{this.isResolved=!0,e(...t)},this.reject=(...e)=>{this.isRejected=!0,t(...e)}}))}}const Gr="X6_NODE_PORTAL_NODE_VIEW",Lr="XFLOW_DEFAULT_NODE",Hr="XFLOW_DEFAULT_EDGE",Br="XFLOW_COPY_ITEMS",Ur={width:180,height:36};function Vr(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}var zr=t.createContext({});function Yr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$r(Object(n),!0).forEach((function(t){Yr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Kr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Kr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xr(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Zr(e){return Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zr(e)}function Jr(e,t){(function(e){return"string"==typeof e&&-1!==e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!==e.indexOf("%")}(e);return e=360===t?e:Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:e=360===t?(e<0?e%t+t:e%t)/parseFloat(String(t)):e%t/parseFloat(String(t))}function Qr(e){return e<=1?100*Number(e)+"%":e}function eo(e){return 1===e.length?"0"+e:String(e)}function to(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*n*(t-e):n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function no(e){return ro(e)/255}function ro(e){return parseInt(e,16)}var oo={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function io(e){var t={r:0,g:0,b:0},n=1,r=null,o=null,i=null,a=!1,s=!1;return"string"==typeof e&&(e=function(e){if(0===(e=e.trim().toLowerCase()).length)return!1;var t=!1;if(oo[e])e=oo[e],t=!0;else if("transparent"===e)return{r:0,g:0,b:0,a:0,format:"name"};var n=co.rgb.exec(e);if(n)return{r:n[1],g:n[2],b:n[3]};if(n=co.rgba.exec(e))return{r:n[1],g:n[2],b:n[3],a:n[4]};if(n=co.hsl.exec(e))return{h:n[1],s:n[2],l:n[3]};if(n=co.hsla.exec(e))return{h:n[1],s:n[2],l:n[3],a:n[4]};if(n=co.hsv.exec(e))return{h:n[1],s:n[2],v:n[3]};if(n=co.hsva.exec(e))return{h:n[1],s:n[2],v:n[3],a:n[4]};if(n=co.hex8.exec(e))return{r:ro(n[1]),g:ro(n[2]),b:ro(n[3]),a:no(n[4]),format:t?"name":"hex8"};if(n=co.hex6.exec(e))return{r:ro(n[1]),g:ro(n[2]),b:ro(n[3]),format:t?"name":"hex"};if(n=co.hex4.exec(e))return{r:ro(n[1]+n[1]),g:ro(n[2]+n[2]),b:ro(n[3]+n[3]),a:no(n[4]+n[4]),format:t?"name":"hex8"};if(n=co.hex3.exec(e))return{r:ro(n[1]+n[1]),g:ro(n[2]+n[2]),b:ro(n[3]+n[3]),format:t?"name":"hex"};return!1}(e)),"object"==typeof e&&(uo(e.r)&&uo(e.g)&&uo(e.b)?(t=function(e,t,n){return{r:255*Jr(e,255),g:255*Jr(t,255),b:255*Jr(n,255)}}(e.r,e.g,e.b),a=!0,s="%"===String(e.r).substr(-1)?"prgb":"rgb"):uo(e.h)&&uo(e.s)&&uo(e.v)?(r=Qr(e.s),o=Qr(e.v),t=function(e,t,n){e=6*Jr(e,360),t=Jr(t,100),n=Jr(n,100);var r=Math.floor(e),o=e-r,i=n*(1-t),a=n*(1-o*t),s=n*(1-(1-o)*t),l=r%6;return{r:255*[n,a,i,i,s,n][l],g:255*[s,n,n,a,i,i][l],b:255*[i,i,s,n,n,a][l]}}(e.h,r,o),a=!0,s="hsv"):uo(e.h)&&uo(e.s)&&uo(e.l)&&(r=Qr(e.s),i=Qr(e.l),t=function(e,t,n){var r,o,i;if(e=Jr(e,360),t=Jr(t,100),n=Jr(n,100),0===t)o=n,i=n,r=n;else{var a=n<.5?n*(1+t):n+t-n*t,s=2*n-a;r=to(s,a,e+1/3),o=to(s,a,e),i=to(s,a,e-1/3)}return{r:255*r,g:255*o,b:255*i}}(e.h,r,i),a=!0,s="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(n=e.a)),n=function(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}(n),{ok:a,format:e.format||s,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}var ao="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",so="[\\s|\\(]+("+ao+")[,|\\s]+("+ao+")[,|\\s]+("+ao+")\\s*\\)?",lo="[\\s|\\(]+("+ao+")[,|\\s]+("+ao+")[,|\\s]+("+ao+")[,|\\s]+("+ao+")\\s*\\)?",co={CSS_UNIT:new RegExp(ao),rgb:new RegExp("rgb"+so),rgba:new RegExp("rgba"+lo),hsl:new RegExp("hsl"+so),hsla:new RegExp("hsla"+lo),hsv:new RegExp("hsv"+so),hsva:new RegExp("hsva"+lo),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function uo(e){return Boolean(co.CSS_UNIT.exec(String(e)))}var fo=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function ho(e){var t=function(e,t,n){e=Jr(e,255),t=Jr(t,255),n=Jr(n,255);var r=Math.max(e,t,n),o=Math.min(e,t,n),i=0,a=r,s=r-o,l=0===r?0:s/r;if(r===o)i=0;else{switch(r){case e:i=(t-n)/s+(t<n?6:0);break;case t:i=(n-e)/s+2;break;case n:i=(e-t)/s+4}i/=6}return{h:i,s:l,v:a}}(e.r,e.g,e.b);return{h:360*t.h,s:t.s,v:t.v}}function po(e){var t=e.r,n=e.g,r=e.b;return"#".concat(function(e,t,n,r){var o=[eo(Math.round(e).toString(16)),eo(Math.round(t).toString(16)),eo(Math.round(n).toString(16))];return r&&o[0].startsWith(o[0].charAt(1))&&o[1].startsWith(o[1].charAt(1))&&o[2].startsWith(o[2].charAt(1))?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}(t,n,r,!1))}function go(e,t,n){var r=n/100;return{r:(t.r-e.r)*r+e.r,g:(t.g-e.g)*r+e.g,b:(t.b-e.b)*r+e.b}}function vo(e,t,n){var r;return(r=Math.round(e.h)>=60&&Math.round(e.h)<=240?n?Math.round(e.h)-2*t:Math.round(e.h)+2*t:n?Math.round(e.h)+2*t:Math.round(e.h)-2*t)<0?r+=360:r>=360&&(r-=360),r}function yo(e,t,n){return 0===e.h&&0===e.s?e.s:((r=n?e.s-.16*t:4===t?e.s+.16:e.s+.05*t)>1&&(r=1),n&&5===t&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2)));var r}function mo(e,t,n){var r;return(r=n?e.v+.05*t:e.v-.15*t)>1&&(r=1),Number(r.toFixed(2))}function bo(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],r=io(e),o=5;o>0;o-=1){var i=ho(r),a=po(io({h:vo(i,o,!0),s:yo(i,o,!0),v:mo(i,o,!0)}));n.push(a)}n.push(po(r));for(var s=1;s<=4;s+=1){var l=ho(r),c=po(io({h:vo(l,s),s:yo(l,s),v:mo(l,s)}));n.push(c)}return"dark"===t.theme?fo.map((function(e){var r=e.index,o=e.opacity;return po(go(io(t.backgroundColor||"#141414"),io(n[r]),100*o))})):n}var wo={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},xo={},_o={};Object.keys(wo).forEach((function(e){xo[e]=bo(wo[e]),xo[e].primary=xo[e][5],_o[e]=bo(wo[e],{theme:"dark",backgroundColor:"#141414"}),_o[e].primary=_o[e][5]})),xo.red,xo.volcano,xo.gold,xo.orange,xo.yellow,xo.lime,xo.green,xo.cyan,xo.blue,xo.geekblue,xo.purple,xo.magenta,xo.grey;var Eo={};function Oo(e,t){}function So(e,t){!function(e,t,n){t||Eo[n]||(e(!1,n),Eo[n]=!0)}(Oo,e,t)}function Co(){return!("undefined"==typeof window||!window.document||!window.document.createElement)}var ko="rc-util-key";function Po(e){return e.attachTo?e.attachTo:document.querySelector("head")||document.body}function Mo(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Co())return null;var r,o=document.createElement("style");(null===(t=n.csp)||void 0===t?void 0:t.nonce)&&(o.nonce=null===(r=n.csp)||void 0===r?void 0:r.nonce);o.innerHTML=e;var i=Po(n),a=i.firstChild;return n.prepend&&i.prepend?i.prepend(o):n.prepend&&a?i.insertBefore(o,a):i.appendChild(o),o}var To=new Map;function Ao(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Po(n);if(!To.has(r)){var o=Mo("",n),i=o.parentNode;To.set(r,i),i.removeChild(o)}var a=Array.from(To.get(r).children).find((function(e){return"STYLE"===e.tagName&&e[ko]===t}));if(a){var s,l,c;if((null===(s=n.csp)||void 0===s?void 0:s.nonce)&&a.nonce!==(null===(l=n.csp)||void 0===l?void 0:l.nonce))a.nonce=null===(c=n.csp)||void 0===c?void 0:c.nonce;return a.innerHTML!==e&&(a.innerHTML=e),a}var u=Mo(e,n);return u[ko]=t,u}function No(e){return"object"===Zr(e)&&"string"==typeof e.name&&"string"==typeof e.theme&&("object"===Zr(e.icon)||"function"==typeof e.icon)}function Ro(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,n){var r=e[n];if("class"===n)t.className=r,delete t.class;else t[n]=r;return t}),{})}function jo(e,t,n){return n?d.default.createElement(e.tag,Wr(Wr({key:t},Ro(e.attrs)),n),(e.children||[]).map((function(n,r){return jo(n,"".concat(t,"-").concat(e.tag,"-").concat(r))}))):d.default.createElement(e.tag,Wr({key:t},Ro(e.attrs)),(e.children||[]).map((function(n,r){return jo(n,"".concat(t,"-").concat(e.tag,"-").concat(r))})))}function Do(e){return bo(e)[0]}function Io(e){return e?Array.isArray(e)?e:[e]:[]}var Fo="\n.anticon {\n  display: inline-block;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n",Go=["icon","className","onClick","style","primaryColor","secondaryColor"],Lo={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};var Ho=function(e){var n,r,o=e.icon,i=e.className,a=e.onClick,s=e.style,l=e.primaryColor,c=e.secondaryColor,u=Xr(e,Go),d=Lo;if(l&&(d={primaryColor:l,secondaryColor:c||Do(l)}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fo,n=t.useContext(zr).csp;t.useEffect((function(){Ao(e,"@ant-design-icons",{prepend:!0,csp:n})}),[])}(),n=No(o),r="icon should be icon definiton, but got ".concat(o),So(n,"[@ant-design/icons] ".concat(r)),!No(o))return null;var f=o;return f&&"function"==typeof f.icon&&(f=Wr(Wr({},f),{},{icon:f.icon(d.primaryColor,d.secondaryColor)})),jo(f.icon,"svg-".concat(f.name),Wr({className:i,onClick:a,style:s,"data-icon":f.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},u))};Ho.displayName="IconReact",Ho.getTwoToneColors=function(){return Wr({},Lo)},Ho.setTwoToneColors=function(e){var t=e.primaryColor,n=e.secondaryColor;Lo.primaryColor=t,Lo.secondaryColor=n||Do(t),Lo.calculated=!!n};var Bo=Ho;function Uo(e){var t=qr(Io(e),2),n=t[0],r=t[1];return Bo.setTwoToneColors({primaryColor:n,secondaryColor:r})}var Vo=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];Uo("#1890ff");var zo=f.forwardRef((function(e,t){var n,r=e.className,o=e.icon,i=e.spin,a=e.rotate,s=e.tabIndex,l=e.onClick,c=e.twoToneColor,u=Xr(e,Vo),d=f.useContext(zr).prefixCls,h=void 0===d?"anticon":d,p=_r(h,(Yr(n={},"".concat(h,"-").concat(o.name),!!o.name),Yr(n,"".concat(h,"-spin"),!!i||"loading"===o.name),n),r),g=s;void 0===g&&l&&(g=-1);var v=a?{msTransform:"rotate(".concat(a,"deg)"),transform:"rotate(".concat(a,"deg)")}:void 0,y=qr(Io(c),2),m=y[0],b=y[1];return f.createElement("span",Wr(Wr({role:"img","aria-label":o.name},u),{},{ref:t,tabIndex:g,onClick:l,className:p}),f.createElement(Bo,{icon:o,primaryColor:m,secondaryColor:b,style:v}))}));zo.displayName="AntdIcon",zo.getTwoToneColor=function(){var e=Bo.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor},zo.setTwoToneColor=Uo;var Yo=zo,$o={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"},Wo=function(e,t){return f.createElement(Yo,Wr(Wr({},e),{},{ref:t,icon:$o}))};Wo.displayName="CaretRightOutlined";var Ko=f.forwardRef(Wo),qo={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"},Xo=function(e,t){return f.createElement(Yo,Wr(Wr({},e),{},{ref:t,icon:qo}))};Xo.displayName="CheckCircleOutlined";var Zo=f.forwardRef(Xo),Jo={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M685.4 354.8c0-4.4-3.6-8-8-8l-66 .3L512 465.6l-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155L340.5 670a8.32 8.32 0 00-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3L512 564.4l99.3 118.4 66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.5 515l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z"}},{tag:"path",attrs:{d:"M512 65C264.6 65 64 265.6 64 513s200.6 448 448 448 448-200.6 448-448S759.4 65 512 65zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"close-circle",theme:"outlined"},Qo=function(e,t){return f.createElement(Yo,Wr(Wr({},e),{},{ref:t,icon:Jo}))};Qo.displayName="CloseCircleOutlined";var ei=f.forwardRef(Qo),ti={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M326 664H104c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h174v176c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V696c0-17.7-14.3-32-32-32zm16-576h-48c-8.8 0-16 7.2-16 16v176H104c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h222c17.7 0 32-14.3 32-32V104c0-8.8-7.2-16-16-16zm578 576H698c-17.7 0-32 14.3-32 32v224c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V744h174c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16zm0-384H746V104c0-8.8-7.2-16-16-16h-48c-8.8 0-16 7.2-16 16v224c0 17.7 14.3 32 32 32h222c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16z"}}]},name:"compress",theme:"outlined"},ni=function(e,t){return f.createElement(Yo,Wr(Wr({},e),{},{ref:t,icon:ti}))};ni.displayName="CompressOutlined";var ri=f.forwardRef(ni),oi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-600 72h560v208H232V136zm560 480H232V408h560v208zm0 272H232V680h560v208zM304 240a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"database",theme:"outlined"},ii=function(e,t){return f.createElement(Yo,Wr(Wr({},e),{},{ref:t,icon:oi}))};ii.displayName="DatabaseOutlined";var ai=f.forwardRef(ii),si={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M272.9 512l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L186.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H532c6.7 0 10.4-7.7 6.3-12.9L272.9 512zm304 0l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L490.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H836c6.7 0 10.4-7.7 6.3-12.9L576.9 512z"}}]},name:"double-left",theme:"outlined"},li=function(e,t){return f.createElement(Yo,Wr(Wr({},e),{},{ref:t,icon:si}))};li.displayName="DoubleLeftOutlined";var ci=f.forwardRef(li),ui={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M533.2 492.3L277.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H188c-6.7 0-10.4 7.7-6.3 12.9L447.1 512 181.7 851.1A7.98 7.98 0 00188 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5zm304 0L581.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H492c-6.7 0-10.4 7.7-6.3 12.9L751.1 512 485.7 851.1A7.98 7.98 0 00492 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5z"}}]},name:"double-right",theme:"outlined"},di=function(e,t){return f.createElement(Yo,Wr(Wr({},e),{},{ref:t,icon:ui}))};di.displayName="DoubleRightOutlined";var fi=f.forwardRef(di),hi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},pi=function(e,t){return f.createElement(Yo,Wr(Wr({},e),{},{ref:t,icon:hi}))};pi.displayName="ExclamationCircleOutlined";var gi=f.forwardRef(pi),vi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32z"}}]},name:"folder",theme:"filled"},yi=function(e,t){return f.createElement(Yo,Wr(Wr({},e),{},{ref:t,icon:vi}))};yi.displayName="FolderFilled";var mi=f.forwardRef(yi),bi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zm-180 0H238c-13 0-24.8 7.9-29.7 20L136 643.2V256h188.5l119.6 114.4H748V444z"}}]},name:"folder-open",theme:"filled"},wi=function(e,t){return f.createElement(Yo,Wr(Wr({},e),{},{ref:t,icon:bi}))};wi.displayName="FolderOpenFilled";var xi=f.forwardRef(wi),_i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"},Ei=function(e,t){return f.createElement(Yo,Wr(Wr({},e),{},{ref:t,icon:_i}))};Ei.displayName="InfoCircleOutlined";var Oi=f.forwardRef(Ei),Si={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"minus-square",theme:"outlined"},Ci=function(e,t){return f.createElement(Yo,Wr(Wr({},e),{},{ref:t,icon:Si}))};Ci.displayName="MinusSquareOutlined";var ki=f.forwardRef(Ci),Pi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M316 672h60c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8zm196-50c22.1 0 40-17.9 40-39 0-23.1-17.9-41-40-41s-40 17.9-40 41c0 21.1 17.9 39 40 39zm0-140c22.1 0 40-17.9 40-39 0-23.1-17.9-41-40-41s-40 17.9-40 41c0 21.1 17.9 39 40 39z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}},{tag:"path",attrs:{d:"M648 672h60c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8z"}}]},name:"one-to-one",theme:"outlined"},Mi=function(e,t){return f.createElement(Yo,Wr(Wr({},e),{},{ref:t,icon:Pi}))};Mi.displayName="OneToOneOutlined";var Ti=f.forwardRef(Mi),Ai={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"plus-square",theme:"outlined"},Ni=function(e,t){return f.createElement(Yo,Wr(Wr({},e),{},{ref:t,icon:Ai}))};Ni.displayName="PlusSquareOutlined";var Ri=f.forwardRef(Ni),ji={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"question-circle",theme:"outlined"},Di=function(e,t){return f.createElement(Yo,Wr(Wr({},e),{},{ref:t,icon:ji}))};Di.displayName="QuestionCircleOutlined";var Ii=f.forwardRef(Di),Fi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"},Gi=function(e,t){return f.createElement(Yo,Wr(Wr({},e),{},{ref:t,icon:Fi}))};Gi.displayName="RedoOutlined";var Li=f.forwardRef(Gi),Hi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-in",theme:"outlined"},Bi=function(e,t){return f.createElement(Yo,Wr(Wr({},e),{},{ref:t,icon:Hi}))};Bi.displayName="ZoomInOutlined";var Ui=f.forwardRef(Bi),Vi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-out",theme:"outlined"},zi=function(e,t){return f.createElement(Yo,Wr(Wr({},e),{},{ref:t,icon:Vi}))};zi.displayName="ZoomOutOutlined";var Yi=f.forwardRef(zi);const $i=d.default.createContext(null);$i.displayName="XFlowAppContext";const Wi=()=>{const e=d.default.useContext($i);return e&&e.getApp?e.getApp():null};var Ki,qi,Xi,Zi,Ji;!function(e){const t="节点操作";e.ADD_NODE={id:"xflow:add-node",label:"添加节点",category:t},e.MOVE_NODE={id:"xflow:move-node",label:"Move Node",category:t},e.DEL_NODE={id:"xflow:del-node",label:"删除节点",category:t},e.UPDATE_NODE={id:"xflow:update-node",label:"更新节点",category:t},e.HIGHLIGHT_NODE={id:"xflow:highlight-node",label:"高亮节点",category:t},e.SELECT_NODE={id:"xflow:select-node",label:"选中节点",category:t},e.CENTER_NODE={id:"xflow:center-node",label:"居中节点",category:t},e.FRONT_NODE={id:"xflow:front-node",label:"前置节点",category:t},e.BACK_NODE={id:"xflow:back-node",label:"后置节点",category:t}}(Ki||(Ki={})),function(e){const t="边操作";e.ADD_EDGE={id:"xflow:add-edge",label:"添加边",category:t},e.DEL_EDGE={id:"xflow:del-edge",label:"删除边",category:t},e.UPDATE_EDGE={id:"xflow:update-edge",label:"更新边",category:t},e.HIGHLIGHT_EDGE={id:"xflow:highlight-edge",label:"高亮边",category:t},e.FRONT_EDGE={id:"xflow:front-edge",label:"前置变",category:t},e.BACK_EDGE={id:"xflow:back-edge",label:"后置边",category:t}}(qi||(qi={})),function(e){const t="画布操作";e.LOAD_META={id:"xflow:load-meta",label:"获取元数据",category:t},e.LOAD_DATA={id:"xflow:load-data",label:"获取图数据",category:t},e.SAVE_GRAPH_DATA={id:"xflow:save-graph-data",label:"保存",category:t},e.GRAPH_LAYOUT={id:"xflow:layout",label:"计算布局",category:t},e.GRAPH_RENDER={id:"xflow:graph-render",label:"渲染画布",category:t},e.UNDO_CMD={id:"xflow:undo-cmd",label:"撤销",category:t},e.REDO_CMD={id:"xflow:redo-cmd",label:"重做",category:t},e.GRAPH_INSTANCE_COMMAND={id:"xflow:graph-instacne-cmd",label:"Graph通用Command",category:t},e.GRAPH_ZOOM={id:"xflow:graph-zoom",label:"缩放画布",category:t},e.GRAPH_RESIZE={id:"xflow:graph-resize",label:"调整窗口大小",category:t},e.GRAPH_COPY={id:"xflow:graph-copy-selection",label:"复制",category:t},e.GRAPH_PASTE={id:"xflow:graph-paste-selection",label:"粘贴",category:t},e.GRAPH_TOGGLE_MULTI_SELECT={id:"xflow:graph-toggle-multi-select",label:"启用框选",category:t},e.GRAPH_ADD_TOOL={id:"xflow:add-tool",label:"添加工具",category:t},e.GRAPH_DEL_TOOL={id:"xflow:del-tool",label:"删除工具",category:t},e.GRAPH_HISTORY_UNDO={id:"xflow:history-undo",label:"history undo",category:t},e.GRAPH_HISTORY_REDO={id:"xflow:history-redo",label:"history redo",category:t},e.GRAPH_HISTORY_RESET={id:"xflow:history-reset",label:"history reset",category:t},e.GRAPH_HISTORY_TOGGLE={id:"xflow:history-toggle",label:"history toggle",category:t}}(Xi||(Xi={})),function(e){e.UPDATE_MODEL={id:"xflow:update-model",label:"设置状态值",category:"状态操作"}}(Zi||(Zi={})),function(e){const t="群组操作";e.INIT_GROUP={id:"xflow:init-group",label:"初始化群组",category:t},e.ADD_GROUP={id:"xflow:add-group",label:"新建群组",category:t},e.DEL_GROUP={id:"xflow:del-group",label:"解散群组",category:t},e.COLLAPSE_GROUP={id:"xflow:collapse-group",label:"折叠群组",category:t}}(Ji||(Ji={}));const Qi=e=>{const{cell:t}=e,n=Wi(),r=e.data.isCollapsed||!1;return d.default.createElement("div",{className:"xflow-default-group-node"},d.default.createElement("div",{className:"xflow-group-header"},d.default.createElement("div",{className:"header-left"},e.data.label),d.default.createElement("div",{className:"header-right"},r&&d.default.createElement(Ri,{onClick:e=>{e.preventDefault(),n.executeCommand(Ji.COLLAPSE_GROUP.id,{nodeId:t.id,isCollapsed:!1})}}),!r&&d.default.createElement(ki,{onClick:e=>{e.preventDefault(),n.executeCommand(Ji.COLLAPSE_GROUP.id,{nodeId:t.id,isCollapsed:!0,gap:3})}}))))};Qi.displayName="XFlowDefaultGroupNode";const ea={fontSize:"16px",color:"#3057e3"};var ta;!function(e){e.SUCCESS="success",e.PROCESSING="processing",e.ERROR="error",e.DEFAULT="default",e.WARNING="warning"}(ta||(ta={}));const na=e=>{if(e.hide)return null;switch(e.status){case ta.PROCESSING:return d.default.createElement(Li,{spin:!0,style:{color:"#c1cdf7",fontSize:"16px"}});case ta.ERROR:return d.default.createElement(ei,{style:{color:"#ff4d4f",fontSize:"16px"}});case ta.SUCCESS:return d.default.createElement(Zo,{style:{color:"#39ca74cc",fontSize:"16px"}});case ta.WARNING:return d.default.createElement(gi,{style:{color:"#faad14",fontSize:"16px"}});case ta.DEFAULT:return d.default.createElement(Oi,{style:{color:"#d9d9d9",fontSize:"16px"}});default:return null}},ra=e=>{const t=d.default.isValidElement(e.data.icon)?e.data.icon:d.default.createElement(ai,{style:ea});return d.default.createElement("div",{className:"xflow-default-node "+(e.isNodeTreePanel?"panel-node":"")},d.default.createElement("span",{className:"icon"},t),d.default.createElement("span",{className:"label"},e.data.label),d.default.createElement("span",{className:"status"},d.default.createElement(na,{status:e.data&&e.data.status,hide:e.isNodeTreePanel})))};ra.displayName="XFlowDefaultNode";var oa,ia=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};!function(e){e.CONFIG_TYPE="GraphConfig",e.defaultNodeTypeParser=e=>e.renderKey,e.defaultEdgeTypeParser=e=>e.renderKey,e.defaultNodeMapValue=[[Lr,ra],["XFLOW_DEFAULT_GROUP_NODE",Qi]]}(oa||(oa={}));class aa{constructor(){this.CONFIG_TYPE=oa.CONFIG_TYPE,this.x6Options=new Fr,this.rootContainer=new Fr,this.graphContainer=new Fr,this.nodeRender=new Map(oa.defaultNodeMapValue),this.edgeRender=new Map,this.nodeTypeParser=oa.defaultNodeTypeParser,this.edgeTypeParser=oa.defaultEdgeTypeParser,this.events=[],this.mergeX6Config=e=>ia(this,void 0,void 0,(function*(){const t=yield this.getX6Config();return Object.assign(t,e)})),this.getX6Config=()=>ia(this,void 0,void 0,(function*(){return yield this.x6Options.promise})),this.setX6Config=e=>{var t;const n=this.getDefaultGraphOptions();null===(t=this.x6Options)||void 0===t||t.resolve(Object.assign(Object.assign({},n),e))},this.setRootContainer=e=>{e&&(null==this||this.rootContainer.resolve(e))},this.setGraphContainer=e=>{var t;e&&(null===(t=this.graphContainer)||void 0===t||t.resolve(e))},this.setEvents=e=>{this.events=e},this.setDefaultNodeRender=e=>{this.nodeRender.set(Lr,e)},this.setDefaultEdgeRender=e=>{this.edgeRender.set(Hr,e)},this.setNodeRender=(e,t)=>{this.nodeRender.set(e,t)},this.setEdgeRender=(e,t)=>{this.edgeRender.set(e,t)},this.setNodeTypeParser=e=>{this.nodeTypeParser=e},this.setEdgeTypeParser=e=>{this.edgeTypeParser=e},this.getConfig=()=>ia(this,void 0,void 0,(function*(){const[e,t,n]=yield Promise.all([this.rootContainer.promise,this.graphContainer.promise,this.x6Options.promise]);return{xflowInstanceId:this.xflowInstanceId,graphId:this.graphId,nodeViewId:this.graphId,rootContainer:e,graphContainer:t,x6Options:n,events:this.events,nodeRender:this.nodeRender,edgeRender:this.edgeRender,nodeTypeParser:this.nodeTypeParser,edgeTypeParser:this.edgeTypeParser}})),this.getDefaultGraphOptions=()=>({rotating:!1,resizing:!1,connecting:{snap:!0,dangling:!1,highlight:!1,connectionPoint:"rect",router:{name:"er"},connector:{name:"rounded",args:{radius:15}}},background:{},grid:{visible:!0},selecting:{strict:!0,enabled:!0,multiple:!0,selectCellOnMoved:!0,showNodeSelectionBox:!1,rubberEdge:!0,rubberNode:!0,movable:!0},snapline:{enabled:!1},history:{enabled:!1},clipboard:{enabled:!0,useLocalStorage:!0},scroller:{enabled:!1},mousewheel:{enabled:!0,minScale:.01,maxScale:1.5,factor:1.1,modifiers:["ctrl","meta"]},panning:{enabled:!0},scaling:{min:.01,max:1.5},keyboard:{enabled:!0},interacting:{nodeMovable:!0,edgeLabelMovable:!1},async:!1}),this.dispose=()=>{this.rootContainer=new Fr,this.graphContainer=new Fr,this.x6Options=new Fr},this.graphId=Vr()}}const sa=Symbol("IGraphOptionProvider");function la(e){return"function"==typeof e}var ca=!1,ua={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack;ca=e},get useDeprecatedSynchronousErrorHandling(){return ca}};function da(e){setTimeout((function(){throw e}),0)}var fa={closed:!0,next:function(e){},error:function(e){if(ua.useDeprecatedSynchronousErrorHandling)throw e;da(e)},complete:function(){}},ha=function(){return Array.isArray||function(e){return e&&"number"==typeof e.length}}();function pa(e){return null!==e&&"object"==typeof e}var ga=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),va=ga,ya=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var t;if(!this.closed){var n=this,r=n._parentOrParents,o=n._ctorUnsubscribe,i=n._unsubscribe,a=n._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof e)r.remove(this);else if(null!==r)for(var s=0;s<r.length;++s){r[s].remove(this)}if(la(i)){o&&(this._unsubscribe=void 0);try{i.call(this)}catch(e){t=e instanceof va?ma(e.errors):[e]}}if(ha(a)){s=-1;for(var l=a.length;++s<l;){var c=a[s];if(pa(c))try{c.unsubscribe()}catch(e){t=t||[],e instanceof va?t=t.concat(ma(e.errors)):t.push(e)}}}if(t)throw new va(t)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var o=n._parentOrParents;if(null===o)n._parentOrParents=this;else if(o instanceof e){if(o===this)return n;n._parentOrParents=[o,this]}else{if(-1!==o.indexOf(this))return n;o.push(this)}var i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();function ma(e){return e.reduce((function(e,t){return e.concat(t instanceof va?t.errors:t)}),[])}var ba=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),wa=function(e){function t(n,r,o){var i=e.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=fa;break;case 1:if(!n){i.destination=fa;break}if("object"==typeof n){n instanceof t?(i.syncErrorThrowable=n.syncErrorThrowable,i.destination=n,n.add(i)):(i.syncErrorThrowable=!0,i.destination=new xa(i,n));break}default:i.syncErrorThrowable=!0,i.destination=new xa(i,n,r,o)}return i}return v(t,e),t.prototype[ba]=function(){return this},t.create=function(e,n,r){var o=new t(e,n,r);return o.syncErrorThrowable=!1,o},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(ya),xa=function(e){function t(t,n,r,o){var i,a=e.call(this)||this;a._parentSubscriber=t;var s=a;return la(n)?i=n:n&&(i=n.next,r=n.error,o=n.complete,n!==fa&&(la((s=Object.create(n)).unsubscribe)&&a.add(s.unsubscribe.bind(s)),s.unsubscribe=a.unsubscribe.bind(a))),a._context=s,a._next=i,a._error=r,a._complete=o,a}return v(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;ua.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=ua.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):da(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;da(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};ua.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),ua.useDeprecatedSynchronousErrorHandling)throw e;da(e)}},t.prototype.__tryOrSetError=function(e,t,n){if(!ua.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(t){return ua.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(da(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(wa);var _a=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function Ea(e){return e}function Oa(e){return 0===e.length?Ea:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var Sa=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,o=function(e,t,n){if(e){if(e instanceof wa)return e;if(e[ba])return e[ba]()}return e||t||n?new wa(e,t,n):new wa(fa)}(e,t,n);if(r?o.add(r.call(o,this.source)):o.add(this.source||ua.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),ua.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){ua.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),!function(e){for(;e;){var t=e,n=t.closed,r=t.destination,o=t.isStopped;if(n||o)return!1;e=r&&r instanceof wa?r:null}return!0}(e)?console.warn(t):e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=Ca(t))((function(t,r){var o;o=n.subscribe((function(t){try{e(t)}catch(e){r(e),o&&o.unsubscribe()}}),r,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[_a]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:Oa(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=Ca(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function Ca(e){if(e||(e=Promise),!e)throw new Error("no Promise impl found");return e}var ka=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),Pa=function(e){function t(t,n){var r=e.call(this)||this;return r.subject=t,r.subscriber=n,r.closed=!1,r}return v(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},t}(ya),Ma=function(e){function t(t){var n=e.call(this,t)||this;return n.destination=t,n}return v(t,e),t}(wa),Ta=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return v(t,e),t.prototype[ba]=function(){return new Ma(this)},t.prototype.lift=function(e){var t=new Aa(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new ka;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),o=0;o<n;o++)r[o].next(e)},t.prototype.error=function(e){if(this.closed)throw new ka;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),o=0;o<n;o++)r[o].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new ka;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new ka;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new ka;return this.hasError?(e.error(this.thrownError),ya.EMPTY):this.isStopped?(e.complete(),ya.EMPTY):(this.observers.push(e),new Pa(this,e))},t.prototype.asObservable=function(){var e=new Sa;return e.source=this,e},t.create=function(e,t){return new Aa(e,t)},t}(Sa),Aa=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return v(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):ya.EMPTY},t}(Ta),Na=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return v(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n&&!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ka;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(Ta),Ra=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return v(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(e){n=!0,r=!!e&&e||new Error(e)}if(n)return this.unsubscribe(),r},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(function(e){function t(t,n){return e.call(this)||this}return v(t,e),t.prototype.schedule=function(e,t){return this},t}(ya)),ja=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=function(){return Date.now()},e}(),Da=function(e){function t(n,r){void 0===r&&(r=ja.now);var o=e.call(this,n,(function(){return t.delegate&&t.delegate!==o?t.delegate.now():r()}))||this;return o.actions=[],o.active=!1,o.scheduled=void 0,o}return v(t,e),t.prototype.schedule=function(n,r,o){return void 0===r&&(r=0),t.delegate&&t.delegate!==this?t.delegate.schedule(n,r,o):e.prototype.schedule.call(this,n,r,o)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(ja),Ia=new Da(Ra),Fa=Ia;var Ga=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new La(e,this.predicate,this.thisArg))},e}(),La=function(e){function t(t,n,r){var o=e.call(this,t)||this;return o.predicate=n,o.thisArg=r,o.count=0,o}return v(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(wa);var Ha=function(){function e(e,t){this.compare=e,this.keySelector=t}return e.prototype.call=function(e,t){return t.subscribe(new Ba(e,this.compare,this.keySelector))},e}(),Ba=function(e){function t(t,n,r){var o=e.call(this,t)||this;return o.keySelector=r,o.hasKey=!1,"function"==typeof n&&(o.compare=n),o}return v(t,e),t.prototype.compare=function(e,t){return e===t},t.prototype._next=function(e){var t;try{var n=this.keySelector;t=n?n(e):e}catch(e){return this.destination.error(e)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,t)}catch(e){return this.destination.error(e)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))},t}(wa),Ua={leading:!0,trailing:!1};var Va=function(){function e(e,t,n,r){this.duration=e,this.scheduler=t,this.leading=n,this.trailing=r}return e.prototype.call=function(e,t){return t.subscribe(new za(e,this.duration,this.scheduler,this.leading,this.trailing))},e}(),za=function(e){function t(t,n,r,o,i){var a=e.call(this,t)||this;return a.duration=n,a.scheduler=r,a.leading=o,a.trailing=i,a._hasTrailingValue=!1,a._trailingValue=null,a}return v(t,e),t.prototype._next=function(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(Ya,this.duration,{subscriber:this})),this.leading?this.destination.next(e):this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0))},t.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},t.prototype.clearThrottle=function(){var e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)},t}(wa);function Ya(e){e.subscriber.clearThrottle()}function $a(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Wa(e){return!!e&&!!e[Ns]}function Ka(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===js}(e)||Array.isArray(e)||!!e[As]||!!e.constructor[As]||Qa(e)||es(e))}function qa(e,t,n){void 0===n&&(n=!1),0===Xa(e)?(n?Object.keys:Ds)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function Xa(e){var t=e[Ns];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Qa(e)?2:es(e)?3:0}function Za(e,t){return 2===Xa(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Ja(e,t,n){var r=Xa(e);2===r?e.set(t,n):3===r?(e.delete(t),e.add(n)):e[t]=n}function Qa(e){return ks&&e instanceof Map}function es(e){return Ps&&e instanceof Set}function ts(e){return e.o||e.t}function ns(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Is(e);delete t[Ns];for(var n=Ds(t),r=0;r<n.length;r++){var o=n[r],i=t[o];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[o]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[o]})}return Object.create(Object.getPrototypeOf(e),t)}function rs(e,t){return void 0===t&&(t=!1),is(e)||Wa(e)||!Ka(e)||(Xa(e)>1&&(e.set=e.add=e.clear=e.delete=os),Object.freeze(e),t&&qa(e,(function(e,t){return rs(t,!0)}),!0)),e}function os(){$a(2)}function is(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function as(e){var t=Fs[e];return t||$a(18,e),t}function ss(){return Ss}function ls(e,t){t&&(as("Patches"),e.u=[],e.s=[],e.v=t)}function cs(e){us(e),e.p.forEach(fs),e.p=null}function us(e){e===Ss&&(Ss=e.l)}function ds(e){return Ss={p:[],l:Ss,h:e,m:!0,_:0}}function fs(e){var t=e[Ns];0===t.i||1===t.i?t.j():t.O=!0}function hs(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.g||as("ES5").S(t,e,r),r?(n[Ns].P&&(cs(t),$a(4)),Ka(e)&&(e=ps(t,e),t.l||vs(t,e)),t.u&&as("Patches").M(n[Ns],e,t.u,t.s)):e=ps(t,n,[]),cs(t),t.u&&t.v(t.u,t.s),e!==Ts?e:void 0}function ps(e,t,n){if(is(t))return t;var r=t[Ns];if(!r)return qa(t,(function(o,i){return gs(e,r,t,o,i,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return vs(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var o=4===r.i||5===r.i?r.o=ns(r.k):r.o;qa(3===r.i?new Set(o):o,(function(t,i){return gs(e,r,o,t,i,n)})),vs(e,o,!1),n&&e.u&&as("Patches").R(r,n,e.u,e.s)}return r.o}function gs(e,t,n,r,o,i){if(Wa(o)){var a=ps(e,o,i&&t&&3!==t.i&&!Za(t.D,r)?i.concat(r):void 0);if(Ja(n,r,a),!Wa(a))return;e.m=!1}if(Ka(o)&&!is(o)){if(!e.h.F&&e._<1)return;ps(e,o),t&&t.A.l||vs(e,o)}}function vs(e,t,n){void 0===n&&(n=!1),e.h.F&&e.m&&rs(t,n)}function ys(e,t){var n=e[Ns];return(n?ts(n):e)[t]}function ms(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function bs(e){e.P||(e.P=!0,e.l&&bs(e.l))}function ws(e){e.o||(e.o=ns(e.t))}function xs(e,t,n){var r=Qa(t)?as("MapSet").N(t,n):es(t)?as("MapSet").T(t,n):e.g?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:ss(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},o=r,i=Gs;n&&(o=[r],i=Ls);var a=Proxy.revocable(o,i),s=a.revoke,l=a.proxy;return r.k=l,r.j=s,l}(t,n):as("ES5").J(t,n);return(n?n.A:ss()).p.push(r),r}function _s(e){return Wa(e)||$a(22,e),function e(t){if(!Ka(t))return t;var n,r=t[Ns],o=Xa(t);if(r){if(!r.P&&(r.i<4||!as("ES5").K(r)))return r.t;r.I=!0,n=Es(t,o),r.I=!1}else n=Es(t,o);return qa(n,(function(t,o){r&&function(e,t){return 2===Xa(e)?e.get(t):e[t]}(r.t,t)===o||Ja(n,t,e(o))})),3===o?new Set(n):n}(e)}function Es(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return ns(e)}var Os,Ss,Cs="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),ks="undefined"!=typeof Map,Ps="undefined"!=typeof Set,Ms="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,Ts=Cs?Symbol.for("immer-nothing"):((Os={})["immer-nothing"]=!0,Os),As=Cs?Symbol.for("immer-draftable"):"__$immer_draftable",Ns=Cs?Symbol.for("immer-state"):"__$immer_state",Rs="undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator",js=""+Object.prototype.constructor,Ds="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Is=Object.getOwnPropertyDescriptors||function(e){var t={};return Ds(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},Fs={},Gs={get:function(e,t){if(t===Ns)return e;var n=ts(e);if(!Za(n,t))return function(e,t,n){var r,o=ms(t,n);return o?"value"in o?o.value:null===(r=o.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!Ka(r)?r:r===ys(e.t,t)?(ws(e),e.o[t]=xs(e.A.h,r,e)):r},has:function(e,t){return t in ts(e)},ownKeys:function(e){return Reflect.ownKeys(ts(e))},set:function(e,t,n){var r=ms(ts(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var o=ys(ts(e),t),i=null==o?void 0:o[Ns];if(i&&i.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(n,o)&&(void 0!==n||Za(e.t,t)))return!0;ws(e),bs(e)}return e.o[t]===n&&"number"!=typeof n&&(void 0!==n||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==ys(e.t,t)||t in e.t?(e.D[t]=!1,ws(e),bs(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=ts(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){$a(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){$a(12)}},Ls={};qa(Gs,(function(e,t){Ls[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Ls.deleteProperty=function(e,t){return Gs.deleteProperty.call(this,e[0],t)},Ls.set=function(e,t,n){return Gs.set.call(this,e[0],t,n,e[0])};var Hs=function(){function e(e){var t=this;this.g=Ms,this.F=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var o=n;n=e;var i=t;return function(e){var t=this;void 0===e&&(e=o);for(var r=arguments.length,a=Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];return i.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(a))}))}}var a;if("function"!=typeof n&&$a(6),void 0!==r&&"function"!=typeof r&&$a(7),Ka(e)){var s=ds(t),l=xs(t,e,void 0),c=!0;try{a=n(l),c=!1}finally{c?cs(s):us(s)}return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(e){return ls(s,r),hs(e,s)}),(function(e){throw cs(s),e})):(ls(s,r),hs(a,s))}if(!e||"object"!=typeof e){if((a=n(e))===Ts)return;return void 0===a&&(a=e),t.F&&rs(a,!0),a}$a(21,e)},this.produceWithPatches=function(e,n){return"function"==typeof e?function(n){for(var r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(o))}))}:[t.produce(e,n,(function(e,t){r=e,o=t})),r,o];var r,o},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){Ka(e)||$a(8),Wa(e)&&(e=_s(e));var t=ds(this),n=xs(this,e,void 0);return n[Ns].C=!0,us(t),n},t.finishDraft=function(e,t){var n=(e&&e[Ns]).A;return ls(n,t),hs(void 0,n)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!Ms&&$a(20),this.g=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var o=as("Patches").$;return Wa(e)?o(e,t):this.produce(e,(function(e){return o(e,t)}))},e}(),Bs=new Hs,Us=Bs.produce;Bs.produceWithPatches.bind(Bs);var Vs=Bs.setAutoFreeze.bind(Bs);Bs.setUseProxies.bind(Bs),Bs.applyPatches.bind(Bs);var zs,Ys=Bs.createDraft.bind(Bs),$s=Bs.finishDraft.bind(Bs),Ws=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};!function(){function e(e,t){function n(){this.constructor=e}o(e,t),e.prototype=(n.prototype=t.prototype,new n)}function t(e){e.o||(e.D=new Map,e.o=new Map(e.t))}function n(e){e.o||(e.o=new Set,e.t.forEach((function(t){if(Ka(t)){var n=xs(e.A.h,t,e);e.p.set(t,n),e.o.add(n)}else e.o.add(t)})))}function r(e){e.O&&$a(3,JSON.stringify(ts(e)))}var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},i=function(){function n(e,t){return this[Ns]={i:2,l:t,A:t?t.A:ss(),P:!1,I:!1,o:void 0,D:void 0,t:e,k:this,C:!1,O:!1},this}e(n,Map);var o=n.prototype;return Object.defineProperty(o,"size",{get:function(){return ts(this[Ns]).size}}),o.has=function(e){return ts(this[Ns]).has(e)},o.set=function(e,n){var o=this[Ns];return r(o),ts(o).has(e)&&ts(o).get(e)===n||(t(o),bs(o),o.D.set(e,!0),o.o.set(e,n),o.D.set(e,!0)),this},o.delete=function(e){if(!this.has(e))return!1;var n=this[Ns];return r(n),t(n),bs(n),n.D.set(e,!1),n.o.delete(e),!0},o.clear=function(){var e=this[Ns];r(e),ts(e).size&&(t(e),bs(e),e.D=new Map,qa(e.t,(function(t){e.D.set(t,!1)})),e.o.clear())},o.forEach=function(e,t){var n=this;ts(this[Ns]).forEach((function(r,o){e.call(t,n.get(o),o,n)}))},o.get=function(e){var n=this[Ns];r(n);var o=ts(n).get(e);if(n.I||!Ka(o))return o;if(o!==n.t.get(e))return o;var i=xs(n.A.h,o,n);return t(n),n.o.set(e,i),i},o.keys=function(){return ts(this[Ns]).keys()},o.values=function(){var e,t=this,n=this.keys();return(e={})[Rs]=function(){return t.values()},e.next=function(){var e=n.next();return e.done?e:{done:!1,value:t.get(e.value)}},e},o.entries=function(){var e,t=this,n=this.keys();return(e={})[Rs]=function(){return t.entries()},e.next=function(){var e=n.next();if(e.done)return e;var r=t.get(e.value);return{done:!1,value:[e.value,r]}},e},o[Rs]=function(){return this.entries()},n}(),a=function(){function t(e,t){return this[Ns]={i:3,l:t,A:t?t.A:ss(),P:!1,I:!1,o:void 0,t:e,k:this,p:new Map,O:!1,C:!1},this}e(t,Set);var o=t.prototype;return Object.defineProperty(o,"size",{get:function(){return ts(this[Ns]).size}}),o.has=function(e){var t=this[Ns];return r(t),t.o?!!t.o.has(e)||!(!t.p.has(e)||!t.o.has(t.p.get(e))):t.t.has(e)},o.add=function(e){var t=this[Ns];return r(t),this.has(e)||(n(t),bs(t),t.o.add(e)),this},o.delete=function(e){if(!this.has(e))return!1;var t=this[Ns];return r(t),n(t),bs(t),t.o.delete(e)||!!t.p.has(e)&&t.o.delete(t.p.get(e))},o.clear=function(){var e=this[Ns];r(e),ts(e).size&&(n(e),bs(e),e.o.clear())},o.values=function(){var e=this[Ns];return r(e),n(e),e.o.values()},o.entries=function(){var e=this[Ns];return r(e),n(e),e.o.entries()},o.keys=function(){return this.values()},o[Rs]=function(){return this.values()},o.forEach=function(e,t){for(var n=this.values(),r=n.next();!r.done;)e.call(t,r.value,r.value,this),r=n.next()},t}();!function(e,t){Fs[e]||(Fs[e]=t)}("MapSet",{N:function(e,t){return new i(e,t)},T:function(e,t){return new a(e,t)}})}(),Vs(!1),function(e){function t(t){return t!==e.EMPTY_VALUE}e.EMPTY_VALUE=Symbol("EMPTY_MODEL_VALUE"),e.isValidValue=t,e.defaultPipeFunction=function(e){return e.pipe((function(e){return e.lift(new Ha(o,i))}),(n=e=>t(e),function(e){return e.lift(new Ga(n,r))}),function(e,t,n){return void 0===t&&(t=Fa),void 0===n&&(n=Ua),function(r){return r.lift(new Va(e,t,n.leading,n.trailing))}}(17,Ia,{leading:!1,trailing:!0}));var n,r,o,i}}(zs||(zs={}));class Ks{constructor(e=zs.EMPTY_VALUE,t=30){this.toDispose=new Ir,this.watch=(e,t=zs.defaultPipeFunction)=>{this.subject$.observers.length+1>this.maxSubscription&&console.warn(`${this.subject$} reach maxSubscription limitation, please check`);const n=(t?t(this.subject$):this.subject$).subscribe(e);return jr.create((()=>{n.unsubscribe()}))},this.getValue=()=>this.subject$.getValue(),this.setValue=e=>{if(this.subject$)if("function"!=typeof e)this.subject$.next(e);else{const t=this.subject$.getValue(),n=Us(t,(t=>{e(t)}));zs.isValidValue(n)&&this.setValue(n)}},this.hasValidValue=()=>{const e=this.getValue();return zs.isValidValue(e)},this.getValidValue=()=>Ws(this,void 0,void 0,(function*(){const e=new Fr;if(this.hasValidValue())return this.getValue();const t=this.watch((n=>{zs.isValidValue(n)&&(e.resolve(n),t.dispose())}));return e.promise})),this.dispose=()=>{this.toDispose.dispose()},this.subject$=new Na(e||zs.EMPTY_VALUE),this.maxSubscription=t,this.toDispose.push(jr.create((()=>{this.subject$.complete(),this.subject$.unsubscribe(),this.subject$=null})))}}const qs=In.defineToken("IFrontendApplicationContribution"),Xs=Symbol("IGraphCommandService"),Zs=In.defineToken("ICommandHandler"),Js=Symbol("ICommandContextProvider"),Qs=Symbol("IGraphCommandFactory"),el=In.defineToken("IGraphCommandContribution");var tl,nl=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},rl=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ol=function(e,t){return function(n,r){t(n,r,e)}},il=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};!function(e){e.is=function(e){return!!e&&e===Object(e)&&"id"in e},e.compareCommands=function(e,t){if(e.label&&t.label){const n=(e.category?`${e.category}: ${e.label}`:e.label).toLowerCase(),r=(t.category?`${t.category}: ${t.label}`:t.label).toLowerCase();return n.localeCompare(r)}return 0},e.equals=function(e,t){return e.id===t.id&&e.label===t.label&&e.iconName===t.iconName&&e.category===t.category}}(tl||(tl={}));let al=class{constructor(e){this.contributionProvider=e,this.redoStack=[],this.undoStack=[],this.commands=new Map,this.factories=new Map,this.disposables=new Map,this.cmdChangeEvent=new Ks(null),this.Globals=new Ks(new Map),this.setGlobal=(e,t)=>{this.Globals.setValue((n=>{n.set(e,t)}))},this.getGlobal=e=>this.Globals.getValue().get(e),this.undoCommand=()=>il(this,void 0,void 0,(function*(){const e=this.undoStack.pop();e?(yield e.undo(),this.redoStack.push(e),this.cmdChangeEvent.setValue(null)):console.error("empty undo stack")})),this.redoCommand=()=>il(this,void 0,void 0,(function*(){const e=this.redoStack.pop();e?(yield e.redo(),this.undoStack.push(e),this.cmdChangeEvent.setValue(null)):console.error("empty undo stack")})),this.registerDisposableCommand=e=>{const t=new Ir;return e({registerCommand:(e,n)=>{const r=this.registerCommand(e,n);return t.push(r),r}}),t}}get watchChange(){return this.cmdChangeEvent.watch}onStart(){const e=this.contributionProvider.getContributions();for(const t of e)t.registerGraphCommands(this)}executeCommandPipeline(e){return il(this,void 0,void 0,(function*(){let t=null;for(const n of e){const e=null==t?void 0:t.contextProvider(),{args:r,hooks:o}=yield null==n?void 0:n.getCommandOption(e);t=yield this.executeCommand(null==n?void 0:n.commandId,r,o)}return this.cmdChangeEvent.setValue(null),t}))}executeCommand(e,t,n=[]){return il(this,void 0,void 0,(function*(){const r=this.getFactory(e);if(r){const o=yield r.createCommand(e,t,n);return yield o.execute(),o.isUndoable()&&this.undoStack.push(o),this.cmdChangeEvent.setValue(null),o}throw Object.assign(new Error(`The command '${e}' cannot be executed. There are no active handlers available for the command.`),{code:"NO_ACTIVE_HANDLER"})}))}executeUndoCommand(e,t,n=[]){return il(this,void 0,void 0,(function*(){const r=this.getFactory(e);if(r){const o=yield r.createCommand(e,t,n);return yield o.execute(),o}throw Object.assign(new Error(`The command '${e}' cannot be executed. There are no active handlers available for the command.`),{code:"NO_ACTIVE_HANDLER"})}))}createCommand(e,t,n=[]){return il(this,void 0,void 0,(function*(){const r=this.getFactory(e);if(r){return yield r.createCommand(e,t,n)}throw Object.assign(new Error(`The command '${e}' cannot be executed. There are no active handlers available for the command.`),{code:"NO_ACTIVE_HANDLER"})}))}get isUndoable(){return this.undoStack.length>0}get isRedoable(){return this.redoStack.length>0}hasCommand(e){return this.commands.has(e)}getCommand(e){return this.commands.get(e)}registerCommand(e,t){if(this.factories.has(e.id))return console.warn(`A command ${e.id} is already registered.`),jr.NULL;const n=new Ir(this.doRegisterCommand(e),this.registerFactory(e.id,t),jr.create((()=>this.disposables.delete(e.id))));return this.disposables.set(e.id,n),n}doRegisterCommand(e){return this.commands.set(e.id,e),jr.create((()=>this.disposables.delete(e.id)))}unregisterCommand(e){const t=tl.is(e)?e.id:e,n=this.disposables.get(t);n&&n.dispose()}hasFactory(e){return!!this.factories.get(e)}getFactory(e){return this.factories.get(e)}registerFactory(e,t,n=!1){return this.hasFactory(e)&&!1===n&&console.error("cannot register command:",e),this.factories.set(e,t),jr.create((()=>{this.factories.delete(e)}))}getAllFactories(){return Array.from(this.factories.entries())}};al=nl([tr({contrib:[qs,Xs]}),ol(0,vr(el)),rl("design:paramtypes",[Object])],al),pr((e=>{gr.register(e,el),e(al)}));const sl=In.defineToken("IModelService"),ll=In.defineToken("IModelContribution"),cl=Symbol("IModelOptionProvider");var ul;!function(e){e.ASYNC_SRRIES="ASYNC_SRRIES",e.ASYNC_PARALLEL="ASYNC_PARALLEL"}(ul||(ul={}));var dl={exports:{}};function fl(e,t){var n=e.length,r=new Array(n),o={},i=n,a=function(e){for(var t=new Map,n=0,r=e.length;n<r;n++){var o=e[n];t.has(o[0])||t.set(o[0],new Set),t.has(o[1])||t.set(o[1],new Set),t.get(o[0]).add(o[1])}return t}(t),s=function(e){for(var t=new Map,n=0,r=e.length;n<r;n++)t.set(e[n],n);return t}(e);for(t.forEach((function(e){if(!s.has(e[0])||!s.has(e[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")}));i--;)o[i]||l(e[i],i,new Set);return r;function l(e,t,i){if(i.has(e)){var c;try{c=", node was:"+JSON.stringify(e)}catch(e){c=""}throw new Error("Cyclic dependency"+c)}if(!s.has(e))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(e));if(!o[t]){o[t]=!0;var u=a.get(e)||new Set;if(t=(u=Array.from(u)).length){i.add(e);do{var d=u[--t];l(d,s.get(d),i)}while(t);i.delete(e)}r[--n]=e}}}dl.exports=function(e){return fl(function(e){for(var t=new Set,n=0,r=e.length;n<r;n++){var o=e[n];t.add(o[0]),t.add(o[1])}return Array.from(t)}(e),e)},dl.exports.array=fl;var hl,pl,gl=dl.exports;!function(e){let t;!function(e){e.INVALID_HOOK_BEFORE="INVALID_HOOK_BEFORE",e.INVALID_HOOK_AFTER="INVALID_HOOK_AFTER",e.INVALID_HOOK_ARGS_LENGTH="INVALID_HOOK_ARGS_LENGTH"}(t=e.ErrorEnum||(e.ErrorEnum={}));class n extends Error{constructor(e,t,...r){Array.isArray(t)&&(t=t.filter((function(e){return!!e})).join(" ")),super(`${e}: ${t}`),Error.captureStackTrace&&Error.captureStackTrace(this,n),this.code=e,this.contexts={},r.forEach((e=>{"object"==typeof e&&Object.entries(e).forEach((e=>{const[t,n]=e;"key"!==t&&n&&(this.contexts[t]=JSON.parse(JSON.stringify(n)))}))}))}toString(){return`${this.code}: ${this.message}`}}e.HookError=n;const r=(e,t,...r)=>new n(e,t,...r);e.HookBeforeError=()=>r(t.INVALID_HOOK_BEFORE,["hook require a before dependency but not exist in hookmap"]),e.HookAfterError=()=>r(t.INVALID_HOOK_AFTER,["hook require a after dependency but not exist in hookmap"]),e.InvalidHookArguments=e=>r(t.INVALID_HOOK_ARGS_LENGTH,["hook handlers must have 0 to 2 arguments",`but got ${e.handler.length}`])}(hl||(hl={})),function(e){e.normalize=(e=[],t)=>{const n=Array.isArray(e)?e:[e],r=[];return t.forEach((e=>{r.push(e)})),[...r,...n].filter((e=>e&&!!e.handler))},e.sort=(e=[],t)=>{const n=[];e.forEach((e=>{if(e.before){if(!t.has(e.before))throw hl.HookBeforeError();const r=[e,t.get(e.before)];n.push(r)}if(e.after){if(!t.has(e.after))throw hl.HookBeforeError();const r=[t.get(e.after),e];n.push(r)}}));return gl.array(e,n)}}(pl||(pl={}));class vl{constructor(){this.isResolved=!1,this.isRejected=!1,this.promise=new Promise(((e,t)=>{this.resolve=t=>{this.isResolved=!0,e(t)},this.reject=e=>{this.isRejected=!0,t(e)}}))}}var yl=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};class ml{constructor(e){this.scheduleType=ul.ASYNC_SRRIES,this.hasHook=e=>this.hookMap.has(e),this.getHooks=(e=[],t=!0)=>{const n=pl.normalize(e,this.hookMap);return t?pl.sort(n,this.hookMap):n},this.registerHook=e=>(this.hookMap.has(e.name)&&console.error(`${e.name} is duplicated in hookmap`),this.hookMap.set(e.name,e),{dispose:()=>{this.hookMap.delete(e.name)}}),this.call=(e,t=(e=>yl(this,void 0,void 0,(function*(){return e}))),n=[])=>yl(this,void 0,void 0,(function*(){const r=this.getHooks(n,!0);return(0,this.schedulers[this.scheduleType])(e,t,r)})),this.schedulers={[ul.ASYNC_SRRIES]:(e,t,n=[])=>yl(this,void 0,void 0,(function*(){let r=t;for(const t of n){if([0,1].includes(t.handler.length)){yield t.handler.call(this,e);continue}if([2].includes(t.handler.length)&&null!==r){const n=yield t.handler.call(this,e,r);if(null===n){r=null;break}if("function"==typeof n){r=n;continue}}throw hl.InvalidHookArguments(t)}if(r)return yield r.call(this,e)})),[ul.ASYNC_PARALLEL]:(e,t,n=[])=>yl(this,void 0,void 0,(function*(){const r=n.map((n=>{if([0,1].includes(n.handler.length))return n.handler.call(this,e);if([2].includes(n.handler.length))return n.handler.call(this,e,t);throw hl.InvalidHookArguments(n)})),o=new vl;if(Promise.all(r).then((e=>o.resolve(e))),t)return yield t.call(this,o)}))},this.hookMap=new Map,e&&e.type&&(this.scheduleType=e.type)}}const bl=In.defineToken("IHookService"),wl=In.defineToken("IHookContribution");var xl=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};const _l=()=>({dispose:()=>{}});var El;!function(e){e.CONFIG_TYPE="XFlowHook"}(El||(El={}));class Ol{constructor(){this.CONFIG_TYPE=El.CONFIG_TYPE,this.time=Date.now(),this.setRegisterHook=e=>{this.hookRegisterFunc=e},this.setRegisterHookhub=e=>{this.hookhubRegisterFn=e},this.getConfig=()=>xl(this,void 0,void 0,(function*(){return{CONFIG_TYPE:this.CONFIG_TYPE,hookRegisterFn:this.hookRegisterFunc||_l,hookhubRegisterFn:this.hookhubRegisterFn||_l}})),this.dispose=()=>{}}}var Sl=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Cl=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},kl=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};let Pl=class{constructor(){this.toDispose=new Ir,this.hookProvider=()=>this.hooks,this.registerHook=e=>e(this.hooks),this.registerHookHub=(e,t)=>(this.hooks[e]=t,{dispose:()=>{delete this.hooks[e]}}),this.onStart=()=>kl(this,void 0,void 0,(function*(){const e=this.contributionProvider.getContributions();for(const t of e)t.registerHookHub(this);for(const t of e)t.registerHook(this.hooks)})),this.hooks={graphOptions:new ml,reactNodeRender:new ml,reactEdgeLabelRender:new ml,afterGraphInit:new ml,beforeGraphDestroy:new ml,x6Events:new ml}}onStop(){this.toDispose.dispose()}};Sl([vr(wl),Cl("design:type",Object)],Pl.prototype,"contributionProvider",void 0),Pl=Sl([tr({contrib:[qs,bl]}),Cl("design:paramtypes",[])],Pl);var Ml,Tl=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Al=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Nl=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};!function(e){e.pluginId="GraphEventPlugin"}(Ml||(Ml={}));let Rl=class{constructor(){this.toDispose=new Ir,this.registerHook=e=>Nl(this,void 0,void 0,(function*(){const{hookRegisterFn:t}=yield this.hookConfig.getConfig(),n=t(e);return jr.create((()=>{n.dispose()}))})),this.registerHookHub=e=>Nl(this,void 0,void 0,(function*(){const{hookhubRegisterFn:t}=yield this.hookConfig.getConfig(),n=t(e);return jr.create((()=>{n.dispose()}))}))}};Tl([nr(Ol),Al("design:type",Ol)],Rl.prototype,"hookConfig",void 0),Rl=Tl([tr({contrib:wl})],Rl);const jl={dispose:()=>null};const Dl=e=>{const t=document.createElement("style");return t.setAttribute("type","text/css"),document.head.appendChild(t),t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),t};function Il(e){return function(e){return"function"==typeof e&&!!e.prototype.isReactComponent}(e)||function(e){return"function"==typeof e&&String(e).includes("return React.createElement")}(e)}var Fl,Gl=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Ll=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Hl=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};!function(e){e.pluginId="base-graph-events"}(Fl||(Fl={}));let Bl=class{constructor(){this.toDispose=new Ir,this.registerHookHub=()=>Hl(this,void 0,void 0,(function*(){return jr.create((()=>{}))})),this.registerHook=e=>Hl(this,void 0,void 0,(function*(){const t=new Ir,n=[e.x6Events.registerHook({name:Fl.pluginId,handler:e=>Hl(this,void 0,void 0,(function*(){const{events:t}=yield this.graphOptions.getOptions();t.forEach((t=>{e.push(t)}))}))}),e.afterGraphInit.registerHook({name:Fl.pluginId,handler:n=>Hl(this,void 0,void 0,(function*(){const{commandService:r,modelService:o,graph:i}=n,a=yield e.x6Events.call([],(e=>Hl(this,void 0,void 0,(function*(){return e.map((e=>{const t=t=>{e.callback(t,r,o)};return i.on(e.eventName,t),{dispose:()=>{i.off(e.eventName,t)}}}))}))));t.pushAll(a)}))}),e.afterGraphInit.registerHook({name:"add auto resize event",handler:e=>Hl(this,void 0,void 0,(function*(){const{commandService:n}=e,r=function(e){let t;return()=>{t||(t=requestAnimationFrame((()=>{t=null,e()})))}}((()=>{n.executeCommand(Xi.GRAPH_RESIZE.id,{})}));window.addEventListener("resize",r),t.push(jr.create((()=>{window.removeEventListener("resize",r)})))}))}),e.beforeGraphDestroy.registerHook({name:Fl.pluginId,handler:()=>Hl(this,void 0,void 0,(function*(){t.dispose()}))})];return t.pushAll(n),t}))}};Gl([nr(sa),Ll("design:type",Object)],Bl.prototype,"graphOptions",void 0),Bl=Gl([tr({contrib:wl})],Bl);const Ul=d.default.createContext({}),Vl=()=>d.default.useContext(Ul),zl=d.default.createContext({cell:null,x6Graph:null,commands:null,modelService:null});function Yl(e,t,n){return function(r){const o=this,i=null==r?void 0:r.getData(),a=null==r?void 0:r.getSize(),s=null==r?void 0:r.getPosition();return d.default.createElement((()=>d.default.createElement(zl.Provider,{value:{cell:r,x6Graph:o,commands:t,modelService:n}},d.default.createElement(e,{cell:r,data:i,size:a,position:s}))),null)}}var $l=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Wl=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Kl=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};const ql=Symbol("IGraphProvider"),Xl=Symbol("ICommandServiceProvider"),Zl=Symbol("IModelServiceProvider");let Jl=class{constructor(){this.toDisposce=new Ir,this.graphMap=new Map,this.getGraph=e=>Kl(this,void 0,void 0,(function*(){let t=this.graphMap.get(e);if(!t){t=new Fr,this.graphMap.set(e,t);const r=yield this.optionProvider.getOptions(),o=this.hookService.hookProvider(),i=yield o.graphOptions.call(r.x6Options),{graphContainer:a,edgeRender:s,nodeRender:l,edgeTypeParser:c}=r,u=yield o.reactEdgeLabelRender.call(s);yield o.reactNodeRender.call(l);const{clientHeight:d,clientWidth:f}=a,h=yield this.commandServiceProvider.getCommandService(),p=yield this.modelServiceProvider.getModelService(),g=new n.Graph(Object.assign(Object.assign({container:a,width:f,height:d},i),{onEdgeLabelRendered:e=>{const{edge:t,container:n}=e;this.renderEdgeReactLabel({edge:t,container:n,edgeRenderMap:u,edgeTypeParser:c,modelService:p,commandService:h})}}));yield o.afterGraphInit.call({graph:g,commandService:h,modelService:p}),t.resolve(g),g.on("node:moved",(({node:e})=>{const t=e.getData(),n=e.position();e.setData(Object.assign(Object.assign({},t),{x:null==n?void 0:n.x,y:null==n?void 0:n.y}))})),g.on("node:resized",(({node:e})=>{const t=e.getData(),n=e.size();e.setData(Object.assign(Object.assign({},t),{width:null==n?void 0:n.width,height:null==n?void 0:n.height}))})),this.toDisposce.push(jr.create((()=>Kl(this,void 0,void 0,(function*(){yield o.beforeGraphDestroy.call({graph:g,commandService:h,modelService:p}),this.graphMap.delete(e),g.dispose()})))))}return t.promise})),this.renderEdgeReactLabel=e=>Kl(this,void 0,void 0,(function*(){const{container:t,edgeTypeParser:n,edge:r,edgeRenderMap:o,commandService:i,modelService:a}=e,s=n(null==r?void 0:r.data)||Hr,l=o.get(s);if(l&&r&&(null==r?void 0:r.data)&&l){const e=this.edgeAppendForeignObject(r,t),n=function(e,t,n){return function(r){const o=this,i=null==r?void 0:r.getData();return d.default.createElement((()=>d.default.createElement(zl.Provider,{value:{cell:r,x6Graph:o,commands:t,modelService:n}},d.default.createElement(e,{data:i,cell:r}))),null)}}(l,i,a)(r);h.default.render(n,e)}}))}edgeAppendForeignObject(e,t){const r=n.Dom.createSvgElement("foreignObject"),o=n.Dom.createElementNS("body",n.Dom.ns.xhtml),i=n.Dom.createElementNS("div",n.Dom.ns.xhtml),a=null==e?void 0:e.data,s=(null==a?void 0:a.edgeContentWidth)||100,l=(null==a?void 0:a.edgeContentHeigt)||30;return r.setAttribute("width",`${s}`),r.setAttribute("height",`${l}`),r.setAttribute("x",""+-1*s/2),r.setAttribute("y",""+-1*l/2),o.setAttribute("xhtmls",n.Dom.ns.xhtml),o.style.width="100%",o.style.height="100%",o.style.padding="0",o.style.margin="0",o.style.background="unset",o.style.overflow="visible",o.className="xflow-edge-label-body",i.style.width="100%",i.style.height="100%",o.appendChild(i),r.appendChild(o),t.appendChild(r),i}dispose(){this.toDisposce.dispose()}};$l([nr(sa),Wl("design:type",Object)],Jl.prototype,"optionProvider",void 0),$l([nr(bl),Wl("design:type",Object)],Jl.prototype,"hookService",void 0),$l([nr(Xl),Wl("design:type",Object)],Jl.prototype,"commandServiceProvider",void 0),$l([nr(Zl),Wl("design:type",Object)],Jl.prototype,"modelServiceProvider",void 0),Jl=$l([tr()],Jl);var Ql;!function(e){e.CONFIG_TYPE="MODEL_SERVICE_CONFIG"}(Ql||(Ql={}));var ec=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},tc=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},nc=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};let rc=class{constructor(){this.toDispose=new Ir,this.deferredModelMap=new Map,this.registerModel=e=>{const{id:t,getInitialValue:n,modelFactory:r}=e,o=new Ir,i=this.ensureModel(t);if(i.isResolved)return void console.error(e,"model has been registerd");const a=n?n():zs.EMPTY_VALUE,s=r?r():new Ks(a);return zs.isValidValue(a)&&i.resolve(s),e.watchChange&&e.watchChange(s,this).then((e=>{i.isResolved||i.resolve(s),this.toDispose.pushAll([e,o]),o.push(e)})),o},this.findDeferredModel=e=>this.deferredModelMap.get(e),this.awaitModel=e=>this.ensureModel(e).promise,this.registerRuntimeModel=()=>nc(this,void 0,void 0,(function*(){const{modelRegisterFunc:e}=yield this.modelOptionProvider.getOption(),t=yield this.graphProvider.getGraphInstance();e&&e(this,t)})),this.ensureModel=e=>{const t=this.deferredModelMap.get(e);if(t)return t;const n=new Fr;return this.deferredModelMap.set(e,n),this.toDispose.push(jr.create((()=>this.deferredModelMap.delete(e)))),n}}onStart(){const e=this.contributionProvider.getContributions();for(const t of e)t.registerModel(this);this.registerRuntimeModel()}onStop(){this.toDispose.dispose()}};ec([vr(ll),tc("design:type",Object)],rc.prototype,"contributionProvider",void 0),ec([nr(cl),tc("design:type",Object)],rc.prototype,"modelOptionProvider",void 0),ec([nr(ql),tc("design:type",Object)],rc.prototype,"graphProvider",void 0),rc=ec([tr({contrib:[qs,sl]})],rc);var oc=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};const ic=e=>t=>oc(void 0,void 0,void 0,(function*(){return yield t.awaitModel(e)})),ac=e=>t=>oc(void 0,void 0,void 0,(function*(){return(yield t.awaitModel(e)).getValidValue()}));var sc,lc,cc,uc,dc,fc,hc,pc,gc,vc,yc,mc,bc,wc,xc,_c,Ec,Oc,Sc,Cc;!function(e){e.id="GRAPH_ENABLE_MULTI_SELECT",e.getModel=ic(e.id),e.useValue=ac(e.id)}(sc||(sc={})),function(e){e.id="IS_NODE_SELECTED",e.getModel=ic(e.id),e.useValue=ac(e.id)}(lc||(lc={})),function(e){e.id="IS_GROUP_SELECTED",e.getModel=ic(e.id),e.useValue=ac(e.id)}(cc||(cc={})),function(e){e.id="IS_NORMAL_NODES_SELECTED",e.getModel=ic(e.id),e.useValue=ac(e.id)}(uc||(uc={})),function(e){e.id="LAST_SELECTED_CELL",e.getModel=ic(e.id),e.useValue=ac(e.id)}(dc||(dc={})),function(e){e.id="SELECTED_CELLS",e.getModel=ic(e.id),e.useValue=ac(e.id)}(fc||(fc={})),function(e){e.id="LAST_SELECTED_NODE",e.getModel=ic(e.id),e.useValue=ac(e.id)}(hc||(hc={})),function(e){e.id="SELECTED_NODES",e.getModel=ic(e.id),e.useValue=ac(e.id)}(pc||(pc={})),function(e){e.id="SELECTED_EDGES",e.getModel=ic(e.id),e.useValue=ac(e.id)}(gc||(gc={})),function(e){e.id="SELECTED_GROUPS",e.getModel=ic(e.id),e.useValue=ac(e.id)}(vc||(vc={})),function(e){e.id="CONTEXTMENU_NODE",e.getModel=ic(e.id),e.useValue=ac(e.id)}(yc||(yc={})),function(e){e.id="CONTEXTMENU_EDGE",e.getModel=ic(e.id),e.useValue=ac(e.id)}(mc||(mc={})),function(e){e.id="CONTEXTMENU_TARGET",e.getModel=ic(e.id),e.useValue=ac(e.id)}(bc||(bc={})),function(e){e.id="GRAPH_META",e.getModel=ic(e.id),e.useValue=ac(e.id)}(wc||(wc={})),function(e){e.id="GRAPH_SCALE",e.getModel=ic(e.id),e.useValue=ac(e.id)}(xc||(xc={})),function(e){e.id="COMMAND_REDOABLE",e.getModel=ic(e.id),e.useValue=ac(e.id)}(_c||(_c={})),function(e){e.id="COMMAND_UNDOABLE",e.getModel=ic(e.id),e.useValue=ac(e.id)}(Ec||(Ec={})),function(e){e.id="COMMAND_GLOBALS",e.getModel=ic(e.id),e.useValue=ac(e.id)}(Oc||(Oc={})),function(e){e.id="HISTORY_UNDOABLE",e.getModel=ic(e.id),e.useValue=ac(e.id)}(Sc||(Sc={})),function(e){e.id="HISTORY_REDOABLE",e.getModel=ic(e.id),e.useValue=ac(e.id)}(Cc||(Cc={}));var kc=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Pc=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Mc=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};let Tc=class{registerModel(e){e.registerModel({id:_c.id,getInitialValue:()=>this.commands.isRedoable,watchChange:e=>Mc(this,void 0,void 0,(function*(){return this.commands.watchChange((()=>{e.setValue(this.commands.isRedoable)}))}))}),e.registerModel({id:Ec.id,getInitialValue:()=>this.commands.isUndoable,watchChange:e=>Mc(this,void 0,void 0,(function*(){return this.commands.watchChange((()=>{e.setValue(this.commands.isUndoable)}))}))}),e.registerModel({id:Oc.id,modelFactory:()=>this.commands.Globals})}};kc([nr(Xs),Pc("design:type",Object)],Tc.prototype,"commands",void 0),Tc=kc([tr({contrib:ll})],Tc);const Ac=(e,t,n)=>(e.on(t,n),jr.create((()=>{e.off(t,n)})));var Nc=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Rc=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},jc=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};let Dc=class{constructor(){this.getGraphInstance=()=>jc(this,void 0,void 0,(function*(){return{graph:yield this.graphProvider.getGraphInstance(),config:yield this.graphProvider.getGraphOptions()}}))}registerModel(e){e.registerModel({id:wc.id,getInitialValue:()=>({flowId:"-1"}),watchChange:e=>jc(this,void 0,void 0,(function*(){return jr.create((()=>{e.setValue({flowId:"-1"})}))}))}),e.registerModel({id:sc.id,getInitialValue:()=>({isEnable:!1}),watchChange:e=>jc(this,void 0,void 0,(function*(){return jr.create((()=>{e.setValue({isEnable:!1})}))}))}),e.registerModel({id:fc.id,getInitialValue:()=>[],watchChange:e=>jc(this,void 0,void 0,(function*(){const{graph:t}=yield this.getGraphInstance(),n=t=>{const{selected:n}=t;e.setValue(n)};return t.on("selection:changed",n),jr.create((()=>t.off("selection:changed",n)))}))}),e.registerModel({id:dc.id,watchChange:(e,t)=>jc(this,void 0,void 0,(function*(){return(yield fc.getModel(t)).watch(((t=[])=>{e.setValue([...t].pop()||null)}))}))}),e.registerModel({id:pc.id,getInitialValue:()=>[],watchChange:(e,t)=>jc(this,void 0,void 0,(function*(){return(yield fc.getModel(t)).watch(((t=[])=>{const n=t.filter((e=>e.isNode()));e.setValue(n)}))}))}),e.registerModel({id:hc.id,watchChange:(e,t)=>jc(this,void 0,void 0,(function*(){return(yield pc.getModel(t)).watch((t=>{e.setValue([...t].pop()||null)}))}))}),e.registerModel({id:lc.id,watchChange:(e,t)=>jc(this,void 0,void 0,(function*(){return(yield pc.getModel(t)).watch((t=>{e.setValue(t.length>0)}))}))}),e.registerModel({id:cc.id,getInitialValue:()=>!1,watchChange:(e,t)=>jc(this,void 0,void 0,(function*(){return(yield fc.getModel(t)).watch((t=>{const n=t.every((e=>e&&!0===e.getProp("isGroup")));e.setValue(n)}))}))}),e.registerModel({id:vc.id,getInitialValue:()=>[],watchChange:(e,t)=>jc(this,void 0,void 0,(function*(){return(yield pc.getModel(t)).watch((t=>{const n=t.filter((e=>e&&!0===e.getProp("isGroup")));e.setValue(n)}))}))}),e.registerModel({id:uc.id,getInitialValue:()=>!1,watchChange:(e,t)=>jc(this,void 0,void 0,(function*(){return(yield fc.getModel(t)).watch((t=>{const n=t.every((e=>{const t=!(e&&e.getProp("isGroup")),n=!(e&&e.getProp("group"));return t&&n})),r=t.length>0&&n;e.setValue(r)}))}))}),e.registerModel({id:xc.id,getInitialValue:()=>({zoomFactor:-1}),watchChange:e=>jc(this,void 0,void 0,(function*(){const{graph:t}=yield this.getGraphInstance(),n=n=>{const r=t.zoom();e.setValue(Object.assign(Object.assign({},n),{zoomFactor:r}))};return t.on("scale",n),jr.create((()=>t.off("scale",n)))}))}),e.registerModel({id:bc.id,watchChange:e=>jc(this,void 0,void 0,(function*(){const{graph:t,config:n}=yield this.getGraphInstance(),r=r=>o=>{const{x:i,y:a}=o,s=t.localToClient({x:i,y:a}),l=n.rootContainer.getBoundingClientRect(),c={x:s.x-((null==l?void 0:l.x)||0),y:s.y-((null==l?void 0:l.y)||0)};e.setValue({type:r,anchor:c,data:o,cell:o.cell})},o=new Ir;return o.pushAll([Ac(t,"node:contextmenu",r("node")),Ac(t,"edge:contextmenu",r("edge")),Ac(t,"blank:contextmenu",r("blank"))]),o}))}),e.registerModel({id:Cc.id,getInitialValue:()=>!1,watchChange:e=>jc(this,void 0,void 0,(function*(){const{graph:t}=yield this.getGraphInstance(),n=()=>{const n=t.history.canRedo();e.setValue(n)};return t.history&&t.history.on("change",n),jr.create((()=>t.history.off("change",n)))}))}),e.registerModel({id:Sc.id,getInitialValue:()=>!1,watchChange:e=>jc(this,void 0,void 0,(function*(){const{graph:t}=yield this.getGraphInstance(),n=()=>{const n=t.history.canUndo();e.setValue(n)};return t.history&&t.history.on("change",n),jr.create((()=>t.history.off("change",n)))}))})}};Nc([nr(ql),Rc("design:type",Object)],Dc.prototype,"graphProvider",void 0),Dc=Nc([tr({contrib:ll})],Dc),pr((e=>{gr.register(e,ll),e(rc),e(Dc),e(Tc)}));const Ic=e=>{const t=[],n=[],r=e=>{e.isNode()&&t.push((e=>{const t=e.getChildren(),n=e.getSize(),r=e.getData()||{},o=e.getPosition(),i=e.getParentId(),{isCollapsed:a}=r,s=r.groupCollapsedSize||(a?n:null);return Object.assign(Object.assign({},r),{id:e.id,width:n.width,height:n.height,x:o.x,y:o.y,group:i,groupChildren:t?t.map((e=>e.id)):null,groupCollapsedSize:s})})(e)),e.isEdge()&&n.push((e=>{const t=e.getData()||{};return Object.assign({id:e.id},t)})(e))};return e.map((e=>r(e))),{nodes:t,edges:n}};var Fc=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Gc=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Lc=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};let Hc=class{constructor(){this.getGraphData=()=>Lc(this,void 0,void 0,(function*(){const e=(yield this.graphProvider.getGraphInstance()).getCells();return Ic(e)}))}start(){return Lc(this,void 0,void 0,(function*(){yield this.startContributions(),this.registerEventListeners()}))}getGraphInstance(){return this.graphProvider.getGraphInstance()}getGraphConfig(){return this.graphProvider.getGraphOptions()}getAllNodes(){return Lc(this,void 0,void 0,(function*(){return(yield this.graphProvider.getGraphInstance()).getNodes()}))}getNodeById(e){return Lc(this,void 0,void 0,(function*(){return(yield this.graphProvider.getGraphInstance()).getCellById(e)}))}getAllEdges(){return Lc(this,void 0,void 0,(function*(){return(yield this.graphProvider.getGraphInstance()).getEdges()}))}getEdgeById(e){return Lc(this,void 0,void 0,(function*(){return(yield this.graphProvider.getGraphInstance()).getCellById(e)}))}updateNodeAttrs(e,t){return Lc(this,void 0,void 0,(function*(){if(e instanceof n.Node)e.setAttrs(t);else{(yield this.getNodeById(e)).setAttrs(t)}}))}updateEdgeAttrs(e,t){return Lc(this,void 0,void 0,(function*(){if(e instanceof n.Edge)e.setAttrs(t);else{(yield this.getEdgeById(e)).setAttrs(t)}}))}translateGraph(e,t){return Lc(this,void 0,void 0,(function*(){const n=yield this.graphProvider.getGraphInstance(),r=n.translate();n.translate(r.tx+e,r.ty+t)}))}executeCommand(e,t,n=[]){return this.commandService.executeCommand(e,t,n)}executeCommandPipeline(e){return this.commandService.executeCommandPipeline(e)}registerEventListeners(){window.addEventListener("unload",(()=>{this.stopContributions()}))}startContributions(){return Lc(this,void 0,void 0,(function*(){console.log(this.contributions.getContributions());for(const e of this.contributions.getContributions())if(e.onStart)try{yield this.measure(`${e.constructor.name}.onStart`,(()=>e.onStart(this)))}catch(e){console.error("Could not start contribution",e)}}))}stopContributions(){console.info(">>> Stopping frontend contributions...");for(const e of this.contributions.getContributions())if(e.onStop)try{e.onStop(this)}catch(e){console.error("Could not stop contribution",e)}console.info("<<< All frontend contributions have been stopped.")}measure(e,t){return Lc(this,void 0,void 0,(function*(){const n=`${e}-start`,r=`${e}-end`;performance.mark(n);const o=yield t();performance.mark(r),performance.measure(e,n,r);for(const t of performance.getEntriesByName(e)){const e=`Frontend ${t.name}`;t.duration>100?console.warn(`${e} is slow, took: ${t.duration.toFixed(1)} ms`):console.debug(`${e} took: ${t.duration.toFixed(1)} ms`)}return performance.clearMeasures(e),o}))}};Fc([vr(qs),Gc("design:type",Object)],Hc.prototype,"contributions",void 0),Fc([nr(ql),Gc("design:type",Object)],Hc.prototype,"graphProvider",void 0),Fc([nr(Xs),Gc("design:type",Object)],Hc.prototype,"commandService",void 0),Fc([nr(sl),Gc("design:type",Object)],Hc.prototype,"modelService",void 0),Hc=Fc([tr()],Hc),pr((e=>{gr.register(e,qs),e(Hc)}));const Bc=d.default.createContext({configProvider:null}),Uc=e=>{const t=d.default.useContext(Bc);return d.default.useMemo((()=>t.configProvider?t.configProvider.getXflowPrefixCls(e):`xflow-${e}`),[e])};var Vc=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};function zc(e){const{createModule:t,children:n}=e,r=Vl(),o=d.default.useMemo((()=>e.config||{CONFIG_TYPE:"",getConfig:()=>Vc(this,void 0,void 0,(function*(){return{}}))}),[]);return d.default.useEffect((()=>{const e=r.addExtension({config:o,createModule:t});return()=>{e.dispose()}}),[]),Array.isArray(n)||d.default.isValidElement(n)?d.default.createElement(d.default.Fragment,null," ",n," "):null}const Yc=(e={})=>t.useMemo((()=>{const t=Object.entries(e),n=t.length>0?{position:"absolute"}:{};return t.forEach((([e,t=0])=>{n[e]=`${t}px`})),n}),[e]),$c=e=>pr((t=>{(e=>{e(Jl),e(ql,{lifecycle:In.Lifecycle.singleton,useDynamic:e=>({getGraphInstance:()=>Kl(void 0,void 0,void 0,(function*(){const t=e.container.get(Jl),n=e.container.get(sa),r=yield null==n?void 0:n.getOptions();return yield null==t?void 0:t.getGraph(r.graphId)})),getGraphOptions:()=>Kl(void 0,void 0,void 0,(function*(){const t=e.container.get(sa);return null==t?void 0:t.getOptions()}))})}),e(Xl,{lifecycle:In.Lifecycle.singleton,useDynamic:e=>({getCommandService:()=>Kl(void 0,void 0,void 0,(function*(){return e.container.get(Xs)}))})}),e(Zl,{lifecycle:In.Lifecycle.singleton,useDynamic:e=>({getModelService:()=>Kl(void 0,void 0,void 0,(function*(){return e.container.get(sl)}))})})})(t),((e,t)=>{e(sa,{lifecycle:In.Lifecycle.singleton,useDynamic:()=>({getOptions:()=>ia(void 0,void 0,void 0,(function*(){return t.getConfig()}))})})})(t,e)}));var Wc=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};const Kc=e=>{const t=Wi(),n=d.default.useRef(null),r=d.default.useRef(null),i=Vl(),a=d.default.useMemo((()=>{const t=e.config?e.config:new aa;return t.setX6Config(),t}),[]),[s,l]=o.usePortal(a.graphId);d.default.useEffect((()=>{t&&t.getGraphInstance().then((e=>{l(e)}))}),[t,l]),d.default.useEffect((()=>{a.setRootContainer(n.current),a.setGraphContainer(r.current),a.xflowInstanceId=i.getInstaceId(),i.addCoreModule({config:a,createModule:$c});return()=>{Wc(void 0,void 0,void 0,(function*(){a.dispose()}))}}),[]);const c=Yc(e.position),u=Uc("canvas-root"),f=Uc("x6-canvas");return d.default.createElement(d.default.Fragment,null,d.default.createElement("div",{ref:n,className:u,style:c,id:a.graphId,tabIndex:0},d.default.createElement("div",{ref:r,className:f}),e.children),d.default.createElement(s,null))};Kc.defaultProps={isXFlowCanvas:!0};var qc=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Xc=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Zc=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};let Jc=class{constructor(){this.toDispose=new Ir,this.runtimeHooks=[],this.getX6Graph=()=>Zc(this,void 0,void 0,(function*(){if(this.graph)return this.graph;const e=yield this.graphProvider.getGraphInstance();return this.graph=e,e})),this.getGraphConfig=()=>Zc(this,void 0,void 0,(function*(){return this.graphProvider.getGraphOptions()})),this.getGraphMeta=()=>Zc(this,void 0,void 0,(function*(){const e=this.getModelService();return this.graphMeta||(yield wc.useValue(e))})),this.setArgs=(e,t=[])=>(this.args=e,this.runtimeHooks=t,{args:e,hooks:t}),this.getArgs=()=>({args:Object.assign(Object.assign({},this.args),{modelService:this.getModelService(),commandService:this.getCommands(),getGraphMeta:this.getGraphMeta,getX6Graph:this.getX6Graph,getGraphConfig:this.getGraphConfig}),hooks:this.runtimeHooks}),this.setResult=e=>(this.result=e,this.result),this.getResult=()=>this.result,this.getHooks=()=>this.hookService.hookProvider(),this.getCommands=()=>this.commandService,this.getModelService=()=>this.modelService,this.addUndo=e=>{if(!Array.isArray(e))return this.addUndo([e]);this.toDispose.pushAll(e)},this.undo=()=>Zc(this,void 0,void 0,(function*(){yield this.toDispose.dispose()})),this.isUndoable=()=>!this.toDispose.disposed,this.getDisposables=()=>this.toDispose,this.setGlobal=(e,t)=>{this.commandService.setGlobal(e,t)},this.getGlobal=e=>this.commandService.getGlobal(e)}init(){this.getGraphMeta().then((e=>{this.graphMeta=e}))}};qc([nr(ql),Xc("design:type",Object)],Jc.prototype,"graphProvider",void 0),qc([nr(bl),Xc("design:type",Object)],Jc.prototype,"hookService",void 0),qc([nr(Xs),Xc("design:type",Object)],Jc.prototype,"commandService",void 0),qc([nr(sl),Xc("design:type",Object)],Jc.prototype,"modelService",void 0),qc([O.postConstruct(),Xc("design:type",Function),Xc("design:paramtypes",[]),Xc("design:returntype",void 0)],Jc.prototype,"init",null),Jc=qc([er()],Jc);var Qc=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};const eu=()=>[];class tu{constructor(){this.setCommandContributions=e=>{this.getContributions=e},this.getCommandContributions=()=>this.getContributions(),this.registerHook=e=>Qc(this,void 0,void 0,(function*(){return this.registerHookFn?this.registerHookFn(e):jl})),this.registerHookHub=e=>Qc(this,void 0,void 0,(function*(){return this.registerHookHubFn?this.registerHookHubFn(e):jl})),this.CONFIG_TYPE="CommandConfig",this.setRegisterHookFn=e=>{this.registerHookFn=e},this.setRegisterHookHubFn=e=>{this.registerHookHubFn=e},this.getConfig=()=>Qc(this,void 0,void 0,(function*(){return{registerHookFn:this.registerHookFn,getContributions:this.getContributions,CONFIG_TYPE:this.CONFIG_TYPE}})),this.getContributions=eu}}var nu,ru=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ou=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},iu=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};!function(e){e.command=Ki.ADD_NODE,e.hookKey="addNode"}(nu||(nu={}));let au=class{constructor(){this.execute=()=>iu(this,void 0,void 0,(function*(){const e=this.contextProvider(),{args:t,hooks:n}=e.getArgs(),r=e.getHooks(),o=yield r.addNode.call(t,(t=>iu(this,void 0,void 0,(function*(){const{createNodeService:n,cellFactory:r,commandService:o,options:i}=t,a=yield e.getX6Graph();let s=t.nodeConfig;if(n){const e=yield n(t);if("boolean"==typeof e)return{err:"createNodeService rejected"};s=e}const l=yield this.processNodeConfig(s);let c;if(r){const e=yield r(l,this);c=a.addNode(e,i)}else c=a.addNode(l,i);return e.addUndo(jr.create((()=>iu(this,void 0,void 0,(function*(){const e=Object.assign({id:c.id},c.getData());o.executeCommand(Ki.DEL_NODE.id,{nodeConfig:e})}))))),{nodeConfig:l,nodeCell:c}}))),n);return e.setResult(o),this})),this.processNodeConfig=e=>iu(this,void 0,void 0,(function*(){const t=this.contextProvider();if(e.data=Object.assign({},e),e.shape)return e;if(!e.view){const n=yield t.getGraphConfig();e.view=n.graphId}if(!e.component){const n=yield this.getNodeReactComponent(e),r=t.getCommands(),o=t.getModelService();e.shape="react-shape",e.component=Yl(n,r,o)}return e})),this.getNodeReactComponent=e=>iu(this,void 0,void 0,(function*(){const t=this.contextProvider(),n=t.getHooks(),r=yield t.getGraphConfig(),o=yield n.reactNodeRender.call(r.nodeRender),i=r.nodeTypeParser(e)||Lr,a=o.get(i);return a||console.error("react node component is missing:",r.nodeRender,i,a),a})),this.undo=()=>iu(this,void 0,void 0,(function*(){const e=this.contextProvider();return this.isUndoable()&&e.undo(),this})),this.redo=()=>iu(this,void 0,void 0,(function*(){return this.isUndoable()||(yield this.execute()),this}))}isUndoable(){return this.contextProvider().isUndoable()}};ru([nr(Js),ou("design:type",Object)],au.prototype,"contextProvider",void 0),au=ru([er({token:{token:Zs,named:nu.command.id}})],au);var su,lu=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},cu=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},uu=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};!function(e){e.command=Ki.DEL_NODE,e.hookKey="delNode",e.createHook=()=>new ml}(su||(su={}));let du=class{constructor(){this.execute=()=>uu(this,void 0,void 0,(function*(){const e=this.contextProvider(),{args:t,hooks:n}=e.getArgs(),r=e.getHooks(),o=yield r.delNode.call(t,(t=>uu(this,void 0,void 0,(function*(){const{commandService:n,deleteNodeService:r,options:o}=t,i=yield e.getX6Graph();if(r){if(!(yield r(t)))return{err:" service rejected"}}const a=(t.x6Node||t.nodeConfig).id,s=i.getCellById(a);if(s&&s.isNode()){const t=[...i.getIncomingEdges(s)||[],...i.getOutgoingEdges(s)||[]];yield Promise.all(t.map((e=>n.executeCommand(qi.DEL_EDGE.id,{x6Edge:e}))));const r=s.getData();return s.remove(o),e.addUndo(jr.create((()=>uu(this,void 0,void 0,(function*(){yield n.executeCommand(Ki.ADD_NODE.id,{nodeConfig:r})}))))),{err:null,nodeConfig:r}}return{err:"node is not exist"}}))),n);return e.setResult(o),this})),this.undo=()=>uu(this,void 0,void 0,(function*(){if(this.isUndoable()){this.contextProvider().undo()}return this})),this.redo=()=>uu(this,void 0,void 0,(function*(){return this.isUndoable()||(yield this.execute()),this}))}isUndoable(){return this.contextProvider().isUndoable()}};lu([nr(Js),cu("design:type",Object)],du.prototype,"contextProvider",void 0),du=lu([er({token:{token:Zs,named:su.command.id}})],du);var fu,hu=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},pu=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},gu=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};!function(e){e.command=Ki.SELECT_NODE,e.hookKey="selectNode"}(fu||(fu={}));let vu=class{constructor(){this.execute=()=>gu(this,void 0,void 0,(function*(){const{args:e,hooks:t}=this.ctx.getArgs(),n=this.ctx.getHooks(),r=yield n.selectNode.call(e,(e=>gu(this,void 0,void 0,(function*(){const t=yield this.ctx.getX6Graph(),n=t.getSelectedCells().map((e=>e.id)),{nodeIds:r,resetSelection:o,commandService:i}=e;return o?t.resetSelection(r):t.select(r),this.ctx.addUndo({dispose:()=>{i.executeUndoCommand(Ki.SELECT_NODE.id,{nodeIds:n,resetSelection:!0})}}),{}}))),t);return this.ctx.setResult(r),this})),this.undo=()=>gu(this,void 0,void 0,(function*(){return this.ctx.undo(),this})),this.redo=()=>gu(this,void 0,void 0,(function*(){return this.ctx.isUndoable||(yield this.execute()),this}))}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};hu([nr(Js),pu("design:type",Object)],vu.prototype,"contextProvider",void 0),hu([O.postConstruct(),pu("design:type",Function),pu("design:paramtypes",[]),pu("design:returntype",void 0)],vu.prototype,"init",null),vu=hu([er({token:{token:Zs,named:fu.command.id}})],vu);var yu,mu=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},bu=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},wu=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};!function(e){e.command=Ki.MOVE_NODE,e.hookKey="moveNode",e.createHook=()=>new ml}(yu||(yu={}));let xu=class{constructor(){this.execute=()=>wu(this,void 0,void 0,(function*(){const e=this.contextProvider(),{args:t,hooks:n}=e.getArgs(),r=e.getHooks(),o=yield r.moveNode.call(t,(t=>wu(this,void 0,void 0,(function*(){const{nodePositionService:n}=t;if(n){if(!(yield n(t)))return{err:"service rejected"}}const{dx:r=0,dy:o=0,x:i,y:a,duration:s=150}=t.position,l=(yield e.getX6Graph()).getCellById(t.id);if(l){let t=i,n=a;const{x:c,y:u}=l.position();let d=()=>{l.position(c,u,{silent:!1})};return r||o?(t=r+c,n=o+u,l.translate(r,o,{transition:{duration:s}}),d=()=>l.translate(-r,-o,{transition:{duration:s}})):l.position(t,n,{silent:!1}),e.addUndo(jr.create((()=>{d()}))),{err:null,nextX:t,nextY:n}}}))),n);return e.setResult(o),this})),this.undo=()=>wu(this,void 0,void 0,(function*(){const e=this.contextProvider();return this.isUndoable()&&e.undo(),this})),this.redo=()=>wu(this,void 0,void 0,(function*(){return this.isUndoable()||(yield this.execute()),this}))}isUndoable(){return this.contextProvider().isUndoable()}};mu([nr(Js),bu("design:type",Object)],xu.prototype,"contextProvider",void 0),xu=mu([er({token:{token:Zs,named:yu.command.id}})],xu);var _u,Eu=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Ou=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Su=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};!function(e){e.command=Ki.UPDATE_NODE,e.hookKey="updateNode",e.XFlowNodeSetOptions={overwrite:!0},e.NODE_WIDTH=200,e.NODE_HEIGHT=40}(_u||(_u={}));let Cu=class{constructor(){this.execute=()=>Su(this,void 0,void 0,(function*(){const{args:e,hooks:t}=this.ctx.getArgs(),n=this.ctx.getHooks(),r=yield n.updateNode.call(e,(e=>Su(this,void 0,void 0,(function*(){const t=yield this.ctx.getX6Graph(),{nodeConfig:n,options:r=_u.XFlowNodeSetOptions}=e,i=null==t?void 0:t.getCellById(null==n?void 0:n.id);return i.setData(n,r),i.setPosition((null==n?void 0:n.x)||0,(null==n?void 0:n.y)||0),i.setSize((null==n?void 0:n.width)||_u.NODE_WIDTH,(null==n?void 0:n.height)||_u.NODE_HEIGHT),i instanceof o.ReactShape||!i.getAttrByPath("text/text")||i.setAttrByPath("text/text",n.label),n.attrs&&i.setAttrs(n.attrs),{nodeConfig:n,nodeCell:i}}))),t);return this.ctx.setResult(r),this})),this.undo=()=>Su(this,void 0,void 0,(function*(){return this.ctx.undo(),this})),this.redo=()=>Su(this,void 0,void 0,(function*(){return this.ctx.isUndoable||(yield this.execute()),this}))}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};Eu([nr(Js),Ou("design:type",Object)],Cu.prototype,"contextProvider",void 0),Eu([O.postConstruct(),Ou("design:type",Function),Ou("design:paramtypes",[]),Ou("design:returntype",void 0)],Cu.prototype,"init",null),Cu=Eu([er({token:{token:Zs,named:_u.command.id}})],Cu);var ku,Pu=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Mu=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Tu=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};!function(e){e.command=Ki.CENTER_NODE,e.hookKey="centerNode"}(ku||(ku={}));let Au=class{constructor(){this.execute=()=>Tu(this,void 0,void 0,(function*(){const{args:e,hooks:t}=this.ctx.getArgs(),n=this.ctx.getHooks(),r=yield n.centerNode.call(e,(e=>Tu(this,void 0,void 0,(function*(){const t=yield this.ctx.getX6Graph(),{nodeConfig:n}=e,r=null==t?void 0:t.getCellById(null==n?void 0:n.id);return null==t||t.centerCell(r),{x6Node:r}}))),t);return this.ctx.setResult(r),this})),this.undo=()=>Tu(this,void 0,void 0,(function*(){return this.ctx.undo(),this})),this.redo=()=>Tu(this,void 0,void 0,(function*(){return this.ctx.isUndoable||(yield this.execute()),this}))}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};Pu([nr(Js),Mu("design:type",Object)],Au.prototype,"contextProvider",void 0),Pu([O.postConstruct(),Mu("design:type",Function),Mu("design:paramtypes",[]),Mu("design:returntype",void 0)],Au.prototype,"init",null),Au=Pu([er({token:{token:Zs,named:ku.command.id}})],Au);var Nu,Ru=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ju=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Du=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};!function(e){e.command=Ki.FRONT_NODE,e.hookKey="frontNode"}(Nu||(Nu={}));let Iu=class{constructor(){this.execute=()=>Du(this,void 0,void 0,(function*(){const e=this.contextProvider(),{args:t,hooks:n}=e.getArgs(),r=e.getHooks(),o=yield r.frontNode.call(t,(t=>Du(this,void 0,void 0,(function*(){const n=yield this.ctx.getX6Graph(),{nodeId:r}=t,o=null==n?void 0:n.getCellById(r);return o?(o.toFront(),e.addUndo(jr.create((()=>Du(this,void 0,void 0,(function*(){t.commandService.executeCommand(Ki.BACK_NODE.id,{nodeId:r})})))))):console.error(r,"this nodeId is not exist"),{}}))),n);return e.setResult(o),this})),this.undo=()=>Du(this,void 0,void 0,(function*(){return this.ctx.undo(),this})),this.redo=()=>Du(this,void 0,void 0,(function*(){return this.ctx.isUndoable||(yield this.execute()),this}))}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};Ru([nr(Js),ju("design:type",Object)],Iu.prototype,"contextProvider",void 0),Ru([O.postConstruct(),ju("design:type",Function),ju("design:paramtypes",[]),ju("design:returntype",void 0)],Iu.prototype,"init",null),Iu=Ru([er({token:{token:Zs,named:Nu.command.id}})],Iu);var Fu,Gu=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Lu=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Hu=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};!function(e){e.command=Ki.BACK_NODE,e.hookKey="backNode"}(Fu||(Fu={}));let Bu=class{constructor(){this.execute=()=>Hu(this,void 0,void 0,(function*(){const{args:e,hooks:t}=this.ctx.getArgs(),n=this.ctx.getHooks(),r=yield n.backNode.call(e,(e=>Hu(this,void 0,void 0,(function*(){const t=yield this.ctx.getX6Graph(),{nodeId:n}=e,r=null==t?void 0:t.getCellById(n);return r?(r.toBack(),this.ctx.addUndo(jr.create((()=>Hu(this,void 0,void 0,(function*(){e.commandService.executeCommand(Ki.FRONT_NODE.id,{nodeId:n})})))))):console.error(n,"this nodeId is not exist"),{}}))),t);return this.ctx.setResult(r),this})),this.undo=()=>Hu(this,void 0,void 0,(function*(){return this.ctx.undo(),this})),this.redo=()=>Hu(this,void 0,void 0,(function*(){return this.ctx.isUndoable||(yield this.execute()),this}))}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};Gu([nr(Js),Lu("design:type",Object)],Bu.prototype,"contextProvider",void 0),Gu([O.postConstruct(),Lu("design:type",Function),Lu("design:paramtypes",[]),Lu("design:returntype",void 0)],Bu.prototype,"init",null),Bu=Gu([er({token:{token:Zs,named:Fu.command.id}})],Bu);var Uu,Vu=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},zu=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Yu=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};!function(e){e.command=Ki.HIGHLIGHT_NODE,e.hookKey="highlightNode"}(Uu||(Uu={}));let $u=class{constructor(){this.execute=()=>Yu(this,void 0,void 0,(function*(){const{args:e,hooks:t}=this.ctx.getArgs(),n=this.ctx.getHooks(),r=yield n.highlightNode.call(e,(e=>Yu(this,void 0,void 0,(function*(){const t=yield this.ctx.getX6Graph(),{nodeId:n,stroke:r,strokeWidth:o}=e,i=null==t?void 0:t.getCellById(n);if(!i)return console.error(n,"this nodeId is not exist"),{err:"this nodeId is not exist"};if(null==i||i.setAttrs({body:{stroke:r||"#7c68fc",strokeWidth:o||2}}),null==e?void 0:e.isHighlightRelatedLines){const{edgeStroke:n,edgeStrokeWidth:r}=e;(null==t?void 0:t.getEdges()).forEach((t=>{const o=null==t?void 0:t.getData();null==e||e.commandService.executeCommand(qi.HIGHLIGHT_EDGE.id,{edgeId:null==o?void 0:o.id,strokeColor:n,strokeWidth:r})}))}return{err:null}}))),t);return this.ctx.setResult(r),this})),this.undo=()=>Yu(this,void 0,void 0,(function*(){return this.ctx.undo(),this})),this.redo=()=>Yu(this,void 0,void 0,(function*(){return this.ctx.isUndoable||(yield this.execute()),this}))}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};Vu([nr(Js),zu("design:type",Object)],$u.prototype,"contextProvider",void 0),Vu([O.postConstruct(),zu("design:type",Function),zu("design:paramtypes",[]),zu("design:returntype",void 0)],$u.prototype,"init",null),$u=Vu([er({token:{token:Zs,named:Uu.command.id}})],$u);const Wu=[nu,su,fu,yu,_u,ku,Nu,Fu,Uu];var Ku,qu=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Xu=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Zu=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};!function(e){e.command=Xi.LOAD_META,e.hookKey="graphMeta"}(Ku||(Ku={}));let Ju=class{constructor(){this.execute=()=>Zu(this,void 0,void 0,(function*(){const{args:e,hooks:t}=this.ctx.getArgs(),n=this.ctx.getHooks(),r=yield n.graphMeta.call(e,(e=>Zu(this,void 0,void 0,(function*(){var t;const{graphMetaService:n}=e,r=n?yield n(e):{flowId:null===(t=null==e?void 0:e.meta)||void 0===t?void 0:t.flowId};return Object.assign({flowId:null==r?void 0:r.flowId},r)}))),t),o=this.ctx.getModelService();return(yield wc.getModel(o)).setValue(r),this.ctx.setResult(r),this})),this.undo=()=>Zu(this,void 0,void 0,(function*(){return this.ctx.undo(),this})),this.redo=()=>Zu(this,void 0,void 0,(function*(){return this.ctx.isUndoable||(yield this.execute()),this}))}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};qu([nr(Js),Xu("design:type",Object)],Ju.prototype,"contextProvider",void 0),qu([O.postConstruct(),Xu("design:type",Function),Xu("design:paramtypes",[]),Xu("design:returntype",void 0)],Ju.prototype,"init",null),Ju=qu([er({token:{token:Zs,named:Ku.command.id}})],Ju);var Qu,ed=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},td=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},nd=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};!function(e){e.command=Xi.SAVE_GRAPH_DATA,e.hookKey="saveGrpahData"}(Qu||(Qu={}));let rd=class{constructor(){this.execute=()=>nd(this,void 0,void 0,(function*(){const e=this.ctx,t=e.getArgs(),n=e.getHooks();return yield n.saveGrpahData.call(t.args,(t=>nd(this,void 0,void 0,(function*(){const{saveGraphDataService:n,includeAttrs:r}=t,o=yield e.getX6Graph(),i=o.getNodes(),a=o.getEdges(),s={nodes:i.map((e=>{const t=e.getData(),n=e.position(),o=e.size(),i=Object.assign(Object.assign(Object.assign({id:e.id},t),n),o);return r&&(i.attrs=e.getAttrs()),i})),edges:a.map((e=>{const t=e.getData(),n=Object.assign({id:e.id},t);return r&&(n.attrs=e.getAttrs()),n}))},l=yield this.ctx.getGraphMeta();if(n){const e=yield n(l,s);e&&this.ctx.setResult(e)}return{}}))),t.hooks),this})),this.undo=()=>nd(this,void 0,void 0,(function*(){return this.ctx.undo(),this})),this.redo=()=>nd(this,void 0,void 0,(function*(){return this.ctx.isUndoable||(yield this.execute()),this}))}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};ed([nr(Js),td("design:type",Object)],rd.prototype,"contextProvider",void 0),ed([O.postConstruct(),td("design:type",Function),td("design:paramtypes",[]),td("design:returntype",void 0)],rd.prototype,"init",null),rd=ed([er({token:{token:Zs,named:Qu.command.id}})],rd);var od,id=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ad=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},sd=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};!function(e){e.command=Xi.LOAD_DATA,e.hookKey="loadData",e.createHook=()=>new ml}(od||(od={}));let ld=class{constructor(){this.execute=()=>sd(this,void 0,void 0,(function*(){const{args:e,hooks:t}=this.ctx.getArgs(),n=this.ctx.getHooks(),r=yield n.loadData.call(e,(e=>sd(this,void 0,void 0,(function*(){const{loadDataService:t}=e,n=yield this.ctx.getGraphMeta();return{graphData:yield t(n)}}))),t);return this.ctx.setResult(r),this})),this.undo=()=>sd(this,void 0,void 0,(function*(){return this.ctx.undo(),this})),this.redo=()=>sd(this,void 0,void 0,(function*(){return this.ctx.isUndoable||(yield this.execute()),this}))}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};id([nr(Js),ad("design:type",Object)],ld.prototype,"contextProvider",void 0),id([O.postConstruct(),ad("design:type",Function),ad("design:paramtypes",[]),ad("design:returntype",void 0)],ld.prototype,"init",null),ld=id([er({token:{token:Zs,named:od.command.id}})],ld);var cd,ud=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},dd=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},fd=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};!function(e){e.command=Xi.GRAPH_LAYOUT,e.hookKey="graphLayout"}(cd||(cd={}));let hd=class{constructor(){this.execute=()=>fd(this,void 0,void 0,(function*(){const{args:e,hooks:t}=this.ctx.getArgs(),n=this.ctx.getHooks(),r=yield n.graphLayout.call(e,(e=>fd(this,void 0,void 0,(function*(){const{layoutType:t,layoutOptions:n,customLayout:r}=e,o=r||(e=>new(0,p.Layouts[t])(Object.assign({},n)).layout(e));return yield o(e.graphData),{graphData:e.graphData}}))),t);return this.ctx.setResult(r),this})),this.undo=()=>fd(this,void 0,void 0,(function*(){return this.ctx.undo(),this})),this.redo=()=>fd(this,void 0,void 0,(function*(){return this.ctx.isUndoable||(yield this.execute()),this}))}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};ud([nr(Js),dd("design:type",Object)],hd.prototype,"contextProvider",void 0),ud([O.postConstruct(),dd("design:type",Function),dd("design:paramtypes",[]),dd("design:returntype",void 0)],hd.prototype,"init",null),hd=ud([er({token:{token:Zs,named:cd.command.id}})],hd);var pd,gd,vd=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},yd=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},md=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};!function(e){e.isNodeEqual=function(e,t){return a.isEqual(e,t)},e.isEdgeEqual=function(e,t){return a.isEqual(e,t)}}(pd||(pd={})),function(e){e.command=Xi.GRAPH_RENDER,e.hookKey="graphRender"}(gd||(gd={}));let bd=class{constructor(){this.execute=()=>md(this,void 0,void 0,(function*(){const{args:e,hooks:t}=this.ctx.getArgs(),n=this.ctx.getHooks(),r=yield n.graphRender.call(e,(e=>md(this,void 0,void 0,(function*(){const t=yield this.ctx.getX6Graph(),n=yield this.ctx.getGraphMeta(),{beforeRender:r,graphData:o,isNodeEqual:i,isEdgeEqual:a,afterRender:s}=e;return r&&r(n),yield this.doLoadGraph(t,o,i,a),s&&s(o,n),{}}))),t);return this.ctx.setResult(r),this})),this.undo=()=>md(this,void 0,void 0,(function*(){return this.ctx.undo(),this})),this.redo=()=>md(this,void 0,void 0,(function*(){return this.ctx.isUndoable||(yield this.execute()),this})),this.doLoadGraph=(e,t,n,r)=>md(this,void 0,void 0,(function*(){(null==e?void 0:e.isFrozen())||null==e||e.freeze();const o=this.ctx.getCommands(),{addNodeConfigs:i,addEdgeConfigs:a,removeNodes:s,removeEdges:l,updateNodes:c,updateEdges:u}=this.graphDataDiff(e,t,n,r);for(const e of i)yield o.executeCommand(Ki.ADD_NODE.id,{nodeConfig:e},{name:"remove servcie",handler:e=>md(this,void 0,void 0,(function*(){delete e.createNodeService}))});yield o.executeCommand(Ji.INIT_GROUP.id,{graphData:{nodes:i,edges:[]}});for(const e of a)yield o.executeCommand(qi.ADD_EDGE.id,{edgeConfig:e},{name:"remove servcie",handler:e=>md(this,void 0,void 0,(function*(){delete e.createEdgeService}))});for(const e of s){const t=null==e?void 0:e.getData();t.isGroup?yield o.executeCommand(Ji.DEL_GROUP.id,{nodeConfig:t}):yield o.executeCommand(Ki.DEL_NODE.id,{nodeConfig:t})}for(const e of l){const t=null==e?void 0:e.getData();yield o.executeCommand(qi.DEL_EDGE.id,{edgeConfig:t})}for(const e of c){const t=null==e?void 0:e.getData();yield o.executeCommand(Ki.UPDATE_NODE.id,{nodeConfig:t})}for(const e of u){const t=null==e?void 0:e.getData();yield o.executeCommand(qi.UPDATE_EDGE.id,{edgeConfig:t})}(null==e?void 0:e.isFrozen())&&(null==e||e.unfreeze())}))}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}graphDataDiff(e,t,n,r){const{nodes:o,edges:i}=t,a=[];o.forEach((t=>{e.getCellById(null==t?void 0:t.id)||a.push(t)}));const s=[],l=[],c=[];e.getNodes().forEach((e=>{const t=o.find((t=>(null==t?void 0:t.id)===(null==e?void 0:e.id)));if(t){let r=!0;n?r=n(null==e?void 0:e.data,t):(null==e?void 0:e.data)&&t&&(r=pd.isNodeEqual(null==e?void 0:e.data,t)),r||e.setData(t),!0===r?s.push(e):l.push(e)}else c.push(e)}));const u=[];i.forEach((t=>{e.getCellById(null==t?void 0:t.id)||u.push(t)}));const d=[],f=[],h=[];return e.getEdges().forEach((e=>{const t=i.find((t=>(null==t?void 0:t.id)===(null==e?void 0:e.id)));if(t){let n=!0;r?n=r(null==e?void 0:e.data,t):(null==e?void 0:e.data)&&t&&(n=pd.isEdgeEqual(null==e?void 0:e.data,t)),n||e.setData(t),!0===n?d.push(e):f.push(e)}else h.push(e)})),{addNodeConfigs:a,addEdgeConfigs:u,retainNodes:s,retainEdges:d,removeNodes:c,removeEdges:h,updateNodes:l,updateEdges:f}}};vd([nr(Js),yd("design:type",Object)],bd.prototype,"contextProvider",void 0),vd([O.postConstruct(),yd("design:type",Function),yd("design:paramtypes",[]),yd("design:returntype",void 0)],bd.prototype,"init",null),bd=vd([er({token:{token:Zs,named:gd.command.id}})],bd);var wd,xd=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},_d=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Ed=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};!function(e){e.command=Xi.GRAPH_RESIZE,e.hookKey="graphResize"}(wd||(wd={}));let Od=class{constructor(){this.execute=()=>Ed(this,void 0,void 0,(function*(){const{args:e,hooks:t}=this.ctx.getArgs(),n=this.ctx.getHooks(),r=yield this.ctx.getGraphConfig(),o=r.rootContainer.clientHeight,i=r.rootContainer.clientWidth,a=yield n.graphResize.call(e,(e=>Ed(this,void 0,void 0,(function*(){const t=yield this.ctx.getX6Graph(),{width:n=i,height:r=o}=e;return null==t||t.resize(n,r),{}}))),t);return this.ctx.setResult(a),this})),this.undo=()=>Ed(this,void 0,void 0,(function*(){return this.ctx.undo(),this})),this.redo=()=>Ed(this,void 0,void 0,(function*(){return this.ctx.isUndoable||(yield this.execute()),this}))}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};xd([nr(Js),_d("design:type",Object)],Od.prototype,"contextProvider",void 0),xd([O.postConstruct(),_d("design:type",Function),_d("design:paramtypes",[]),_d("design:returntype",void 0)],Od.prototype,"init",null),Od=xd([er({token:{token:Zs,named:wd.command.id}})],Od);var Sd,Cd=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},kd=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Pd=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};!function(e){e.command=Xi.GRAPH_ZOOM,e.MAX_SCALE=1.5,e.MIN_SCALE=.05,e.defaultZoomOptions={maxScale:e.MAX_SCALE,minScale:e.MIN_SCALE},e.hookKey="graphZoom"}(Sd||(Sd={}));let Md=class{constructor(){this.execute=()=>Pd(this,void 0,void 0,(function*(){const{args:e,hooks:t}=this.ctx.getArgs(),n=this.ctx.getHooks(),r=yield n.graphZoom.call(e,(e=>Pd(this,void 0,void 0,(function*(){const t=yield this.ctx.getX6Graph(),{factor:n,zoomFitPadding:r=12,zoomOptions:o=Sd.defaultZoomOptions}=e;return"number"==typeof n?null==t||t.zoom(n,o||{}):"fit"===n?null==t||t.zoomToFit(Object.assign(Object.assign({},o),{padding:r})):"real"===n&&(null==t||t.scale(1),null==t||t.centerContent()),{factor:n,zoomFitPadding:r,zoomOptions:o}}))),t);return this.ctx.setResult(r),this})),this.undo=()=>Pd(this,void 0,void 0,(function*(){return this.ctx.undo(),this})),this.redo=()=>Pd(this,void 0,void 0,(function*(){return this.ctx.isUndoable||(yield this.execute()),this}))}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};Cd([nr(Js),kd("design:type",Object)],Md.prototype,"contextProvider",void 0),Cd([O.postConstruct(),kd("design:type",Function),kd("design:paramtypes",[]),kd("design:returntype",void 0)],Md.prototype,"init",null),Md=Cd([er({token:{token:Zs,named:Sd.command.id}})],Md);var Td,Ad=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Nd=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Rd=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};!function(e){e.command=Xi.GRAPH_COPY,e.hookKey="graphCopySelection"}(Td||(Td={}));let jd=class{constructor(){this.parseCells=e=>{e.forEach((t=>{const n=t.getData();if(t.isNode()&&n.isGroup){t.getChildren().forEach((t=>{e.push(t)}))}}));const t=e.filter((e=>e.isNode())).map((e=>e.id)),n=e.reduce(((e,n)=>{if(n.isEdge()){const r=n.getSourceCellId(),o=n.getTargetCellId();r&&o&&t.includes(r)&&t.includes(o)&&e.set(n.id,n)}else e.set(n.id,n);return e}),new Map),r=Array.from(n.values());return Ic(r)},this.execute=()=>Rd(this,void 0,void 0,(function*(){const e=this.contextProvider(),{args:t,hooks:n}=e.getArgs(),r=e.getHooks(),o=yield r.graphCopySelection.call(t,(()=>Rd(this,void 0,void 0,(function*(){const t=(yield e.getX6Graph()).getSelectedCells(),n=this.parseCells(t),r=window.localStorage.getItem(Br);return window.localStorage.setItem(Br,JSON.stringify(n)),e.addUndo(jr.create((()=>Rd(this,void 0,void 0,(function*(){window.localStorage.setItem(Br,r)}))))),{err:null}}))),n);return e.setResult(o),this})),this.undo=()=>Rd(this,void 0,void 0,(function*(){const e=this.contextProvider();return this.isUndoable()&&e.undo(),this})),this.redo=()=>Rd(this,void 0,void 0,(function*(){return this.isUndoable()||(yield this.execute()),this}))}isUndoable(){return this.contextProvider().isUndoable()}};Ad([nr(Js),Nd("design:type",Object)],jd.prototype,"contextProvider",void 0),jd=Ad([er({token:{token:Zs,named:Td.command.id}})],jd);var Dd=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};let Id=class{constructor(){this.groupNodeMap=new Map,this.nodeMap=new Map,this.nodeMappingRecord=new Map,this.portMap=new Map,this.portMappingRecord=new Map,this.edgeMap=new Map,this.edgeMappingRecord=new Map,this.getNodesByType=e=>e.reduce(((e,t)=>(t.isGroup?e.groupNodes.push(t):e.normalNodes.push(t),e)),{normalNodes:[],groupNodes:[]}),this.getNodePorts=e=>Array.isArray(e.ports)?e.ports:e.ports&&Array.isArray(e.ports.items)?e.ports.items:[],this.addNodes=e=>{e.forEach((e=>{if(e.isGroup)this.groupNodeMap.set(e.id,e);else{const t=this.getNodePorts(e);this.nodeMap.set(e.id,e),t.forEach((e=>{this.portMap.set(e.id,e)}))}}))},this.addEdge=e=>{e.forEach((e=>{this.edgeMap.set(e.id,e)}))},this.buildNodeMapping=(e,t)=>{const n=e.id||e.originId,r=t.id;this.nodeMappingRecord.set(n,r);this.getNodePorts(e).forEach(((e,n)=>{const r=t.ports[n];r&&(this.portMap.set(r.id,r),this.portMappingRecord.set(e.id,r.id))}))},this.createEdgeBetweenNodes=e=>{const{source:t,sourcePortId:n,target:r,targetPortId:o}=e;return Object.assign(Object.assign({},e),{source:this.nodeMappingRecord.get(t),target:this.nodeMappingRecord.get(r),sourcePortId:this.portMappingRecord.get(n),targetPortId:this.portMappingRecord.get(o)})},this.buildGroupRelations=e=>{const{groupChildren:t}=e,n=t.map((e=>this.nodeMappingRecord.get(e)));return Object.assign(Object.assign({},e),{groupChildren:n})}}};Id=Dd([er()],Id);var Fd,Gd,Ld=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Hd=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Bd=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};function Ud(e,t=0){return Math.floor(Math.random()*(e-t)+t)}!function(e){e.command=Xi.GRAPH_PASTE,e.hookKey="graphPasteSelection"}(Gd||(Gd={}));let Vd=Fd=class{constructor(){this.updateNodeCopiedProps=(e,t)=>{let n=Ud(100),r=Ud(100);return e&&(n=t.x-e.x+Ud(30),r=t.y-e.y+Ud(30)),t.x+=n,t.y+=r,t.originId=t.id,delete t.id,t.label=`${t.label}_copied`,t.isCollapsed=!1,t},this.execute=()=>Bd(this,void 0,void 0,(function*(){const e=this.contextProvider(),{args:t,hooks:n}=e.getArgs(),r=e.getHooks();if(Fd.doing)return this;Fd.doing=!0;const o=yield r.graphPasteSelection.call(t,(t=>Bd(this,void 0,void 0,(function*(){const{commandService:n,position:r}=t,o=function(e,t=null){try{return JSON.parse(e)||t}catch(e){return console.error(e),t}}(window.localStorage.getItem(Br),{nodes:[],edges:[]}),{nodes:i=[],edges:a=[]}=o,{normalNodes:s,groupNodes:l}=this.mappingHelper.getNodesByType(i);return this.mappingHelper.addNodes(i),yield Promise.all(s.map((e=>Bd(this,void 0,void 0,(function*(){const t=(yield n.executeCommand(Ki.ADD_NODE.id,{nodeConfig:this.updateNodeCopiedProps(r,e)})).contextProvider().getResult();this.mappingHelper.buildNodeMapping(e,t.nodeConfig)}))))),yield Promise.all(l.map((e=>Bd(this,void 0,void 0,(function*(){const t=this.mappingHelper.buildGroupRelations(e);yield n.executeCommand(Ji.ADD_GROUP.id,{nodeConfig:this.updateNodeCopiedProps(r,t)})}))))),yield Promise.all(a.map((e=>{const t=this.mappingHelper.createEdgeBetweenNodes(e);return n.executeCommand(qi.ADD_EDGE.id,{edgeConfig:t})}))),e.addUndo(jr.create((()=>Bd(this,void 0,void 0,(function*(){window.localStorage.setItem(Br,null)}))))),{err:null}}))),n);return e.setResult(o),Fd.doing=!1,this})),this.undo=()=>Bd(this,void 0,void 0,(function*(){const e=this.contextProvider();return this.isUndoable()&&e.undo(),this})),this.redo=()=>Bd(this,void 0,void 0,(function*(){return this.isUndoable()||(yield this.execute()),this}))}isUndoable(){return this.contextProvider().isUndoable()}};Vd.doing=!1,Ld([nr(Js),Hd("design:type",Object)],Vd.prototype,"contextProvider",void 0),Ld([nr(Id),Hd("design:type",Id)],Vd.prototype,"mappingHelper",void 0),Vd=Fd=Ld([er({token:{token:Zs,named:Gd.command.id}})],Vd);var zd,Yd=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},$d=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Wd=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};!function(e){e.command=Xi.GRAPH_TOGGLE_MULTI_SELECT,e.hookKey="toggleMultiSelect"}(zd||(zd={}));let Kd=class{constructor(){this.execute=()=>Wd(this,void 0,void 0,(function*(){const{args:e,hooks:t}=this.ctx.getArgs(),n=this.ctx.getHooks(),r=yield n.toggleMultiSelect.call(e,(e=>Wd(this,void 0,void 0,(function*(){const t=yield this.ctx.getX6Graph(),n=yield this.ctx.getGraphConfig(),{isEnable:r,modelService:o}=e,i=yield sc.getModel(o),a="boolean"==typeof r?r:!t.isRubberbandEnabled();return a?(t.enableRubberband(),t.scroller&&t.scroller.widget?t.scroller.disablePanning():t.disablePanning(),n.graphContainer.style.cursor="crosshair"):(t.disableRubberband(),t.scroller&&t.scroller.widget?t.scroller.enablePanning():t.enablePanning(),n.graphContainer.style.cursor="grab"),i.setValue({isEnable:a}),{isEnable:a}}))),t);return this.ctx.setResult(r),this})),this.undo=()=>Wd(this,void 0,void 0,(function*(){return this.ctx.undo(),this})),this.redo=()=>Wd(this,void 0,void 0,(function*(){return this.ctx.isUndoable||(yield this.execute()),this}))}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};Yd([nr(Js),$d("design:type",Object)],Kd.prototype,"contextProvider",void 0),Yd([O.postConstruct(),$d("design:type",Function),$d("design:paramtypes",[]),$d("design:returntype",void 0)],Kd.prototype,"init",null),Kd=Yd([er({token:{token:Zs,named:zd.command.id}})],Kd);var qd,Xd=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Zd=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Jd=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};!function(e){e.command=Xi.GRAPH_HISTORY_UNDO,e.hookKey="historyUndo"}(qd||(qd={}));let Qd=class{constructor(){this.execute=()=>Jd(this,void 0,void 0,(function*(){const e=this.contextProvider(),{args:t,hooks:n}=e.getArgs(),r=e.getHooks(),o=yield r.historyUndo.call(t,(t=>Jd(this,void 0,void 0,(function*(){const n=yield e.getX6Graph();return!1===n.isHistoryEnabled()?{err:"history is disabled"}:(n.undo(),e.addUndo(jr.create((()=>Jd(this,void 0,void 0,(function*(){const{commandService:e}=t;e.executeCommand(Xi.GRAPH_HISTORY_REDO.id,{})}))))),{err:null})}))),n);return e.setResult(o),this})),this.undo=()=>Jd(this,void 0,void 0,(function*(){const e=this.contextProvider();return this.isUndoable()&&e.undo(),this})),this.redo=()=>Jd(this,void 0,void 0,(function*(){return this.isUndoable()||(yield this.execute()),this}))}isUndoable(){return this.contextProvider().isUndoable()}};Xd([nr(Js),Zd("design:type",Object)],Qd.prototype,"contextProvider",void 0),Qd=Xd([er({token:{token:Zs,named:qd.command.id}})],Qd);var ef,tf=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},nf=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},rf=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};!function(e){e.command=Xi.GRAPH_HISTORY_REDO,e.hookKey="historyRedo"}(ef||(ef={}));let of=class{constructor(){this.execute=()=>rf(this,void 0,void 0,(function*(){const e=this.contextProvider(),{args:t,hooks:n}=e.getArgs(),r=e.getHooks(),o=yield r.historyRedo.call(t,(t=>rf(this,void 0,void 0,(function*(){const n=yield e.getX6Graph();return!1===n.isHistoryEnabled()?{err:"history is disabled"}:(n.redo(),e.addUndo(jr.create((()=>rf(this,void 0,void 0,(function*(){const{commandService:e}=t;e.executeCommand(Xi.GRAPH_HISTORY_UNDO.id,{})}))))),{err:null})}))),n);return e.setResult(o),this})),this.undo=()=>rf(this,void 0,void 0,(function*(){const e=this.contextProvider();return this.isUndoable()&&e.undo(),this})),this.redo=()=>rf(this,void 0,void 0,(function*(){return this.isUndoable()||(yield this.execute()),this}))}isUndoable(){return this.contextProvider().isUndoable()}};tf([nr(Js),nf("design:type",Object)],of.prototype,"contextProvider",void 0),of=tf([er({token:{token:Zs,named:ef.command.id}})],of);var af,sf=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},lf=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},cf=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};!function(e){e.command=Xi.GRAPH_HISTORY_TOGGLE,e.hookKey="historyToggle"}(af||(af={}));let uf=class{constructor(){this.execute=()=>cf(this,void 0,void 0,(function*(){const e=this.contextProvider(),{args:t,hooks:n}=e.getArgs(),r=e.getHooks(),o=yield r.historyToggle.call(t,(t=>cf(this,void 0,void 0,(function*(){const n=yield e.getX6Graph();if(!1===n.isHistoryEnabled())return{err:"history is disabled"};const r=n.isHistoryEnabled(),{enabled:o}=t;return n.toggleHistory(o),e.addUndo(jr.create((()=>cf(this,void 0,void 0,(function*(){const{commandService:e}=t;e.executeCommand(Xi.GRAPH_HISTORY_TOGGLE.id,{enabled:r})}))))),{err:null}}))),n);return e.setResult(o),this})),this.undo=()=>cf(this,void 0,void 0,(function*(){const e=this.contextProvider();return this.isUndoable()&&e.undo(),this})),this.redo=()=>cf(this,void 0,void 0,(function*(){return this.isUndoable()||(yield this.execute()),this}))}isUndoable(){return this.contextProvider().isUndoable()}};sf([nr(Js),lf("design:type",Object)],uf.prototype,"contextProvider",void 0),uf=sf([er({token:{token:Zs,named:af.command.id}})],uf);var df,ff=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},hf=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},pf=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};!function(e){e.command=Xi.GRAPH_HISTORY_RESET,e.hookKey="historyReset"}(df||(df={}));let gf=class{constructor(){this.execute=()=>pf(this,void 0,void 0,(function*(){const e=this.contextProvider(),{args:t,hooks:n}=e.getArgs(),r=e.getHooks(),o=yield r.historyReset.call(t,(()=>pf(this,void 0,void 0,(function*(){return(yield e.getX6Graph()).cleanHistory(),{err:null}}))),n);return e.setResult(o),this})),this.undo=()=>pf(this,void 0,void 0,(function*(){const e=this.contextProvider();return this.isUndoable()&&e.undo(),this})),this.redo=()=>pf(this,void 0,void 0,(function*(){return this.isUndoable()||(yield this.execute()),this}))}isUndoable(){return this.contextProvider().isUndoable()}};ff([nr(Js),hf("design:type",Object)],gf.prototype,"contextProvider",void 0),gf=ff([er({token:{token:Zs,named:df.command.id}})],gf);var vf,yf=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},mf=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},bf=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};!function(e){e.command=Xi.GRAPH_ADD_TOOL,e.hookKey="addTool"}(vf||(vf={}));let wf=class{constructor(){this.execute=()=>bf(this,void 0,void 0,(function*(){const e=this.contextProvider(),{args:t,hooks:n}=e.getArgs(),r=e.getHooks(),o=yield r.addTool.call(t,(t=>bf(this,void 0,void 0,(function*(){const{cellId:n,toolConfig:r,commandService:o}=t,i=(yield e.getX6Graph()).getCellById(n);return i&&(i.addTools(r.items,r.options),e.addUndo(jr.create((()=>bf(this,void 0,void 0,(function*(){Array.isArray(r.items)&&r.items.forEach((e=>{o.executeCommand(Xi.GRAPH_DEL_TOOL.id,{cellId:n,toolname:e})}))})))))),{err:null}}))),n);return e.setResult(o),this})),this.undo=()=>bf(this,void 0,void 0,(function*(){const e=this.contextProvider();return this.isUndoable()&&e.undo(),this})),this.redo=()=>bf(this,void 0,void 0,(function*(){return this.isUndoable()||(yield this.execute()),this}))}isUndoable(){return this.contextProvider().isUndoable()}};yf([nr(Js),mf("design:type",Object)],wf.prototype,"contextProvider",void 0),wf=yf([er({token:{token:Zs,named:vf.command.id}})],wf);var xf,_f=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Ef=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Of=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};!function(e){e.command=Xi.GRAPH_DEL_TOOL,e.hookKey="delTool"}(xf||(xf={}));let Sf=class{constructor(){this.execute=()=>Of(this,void 0,void 0,(function*(){const e=this.contextProvider(),{args:t,hooks:n}=e.getArgs(),r=e.getHooks(),o=yield r.delTool.call(t,(t=>Of(this,void 0,void 0,(function*(){const{cellId:n,toolName:r,toolConfig:o}=t,i=(yield e.getX6Graph()).getCellById(n);return i&&("*"===r?i.removeTools(o):i.removeTool(r,o)),{err:null}}))),n);return e.setResult(o),this})),this.undo=()=>Of(this,void 0,void 0,(function*(){const e=this.contextProvider();return this.isUndoable()&&e.undo(),this})),this.redo=()=>Of(this,void 0,void 0,(function*(){return this.isUndoable()||(yield this.execute()),this}))}isUndoable(){return this.contextProvider().isUndoable()}};_f([nr(Js),Ef("design:type",Object)],Sf.prototype,"contextProvider",void 0),Sf=_f([er({token:{token:Zs,named:xf.command.id}})],Sf);var Cf,kf=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Pf=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Mf=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};!function(e){e.command=Xi.REDO_CMD,e.hookKey="redoCommand"}(Cf||(Cf={}));let Tf=class{constructor(){this.execute=()=>Mf(this,void 0,void 0,(function*(){const e=this.ctx,{args:t,hooks:n}=e.getArgs(),r=e.getHooks();return yield r.redoCommand.call(t,(()=>Mf(this,void 0,void 0,(function*(){const t=e.getCommands();return t.isRedoable&&t.redoCommand(),this.ctx.addUndo(jr.create((()=>{t.redoCommand()}))),{}}))),n),this})),this.undo=()=>Mf(this,void 0,void 0,(function*(){return this.ctx.undo(),this})),this.redo=()=>Mf(this,void 0,void 0,(function*(){return this.ctx.isUndoable||(yield this.execute()),this}))}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};kf([nr(Js),Pf("design:type",Object)],Tf.prototype,"contextProvider",void 0),kf([O.postConstruct(),Pf("design:type",Function),Pf("design:paramtypes",[]),Pf("design:returntype",void 0)],Tf.prototype,"init",null),Tf=kf([er({token:{token:Zs,named:Cf.command.id}})],Tf);var Af,Nf=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Rf=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},jf=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};!function(e){e.command=Xi.UNDO_CMD,e.hookKey="undoCommand"}(Af||(Af={}));let Df=class{constructor(){this.execute=()=>jf(this,void 0,void 0,(function*(){const e=this.ctx,{args:t,hooks:n}=e.getArgs(),r=e.getHooks();return yield r.undoCommand.call(t,(()=>jf(this,void 0,void 0,(function*(){const t=e.getCommands();return t.isUndoable&&t.undoCommand(),this.ctx.addUndo(jr.create((()=>{t.redoCommand()}))),{}}))),n),this})),this.undo=()=>jf(this,void 0,void 0,(function*(){return this.ctx.undo(),this})),this.redo=()=>jf(this,void 0,void 0,(function*(){return this.ctx.isUndoable||(yield this.execute()),this}))}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};Nf([nr(Js),Rf("design:type",Object)],Df.prototype,"contextProvider",void 0),Nf([O.postConstruct(),Rf("design:type",Function),Rf("design:paramtypes",[]),Rf("design:returntype",void 0)],Df.prototype,"init",null),Df=Nf([er({token:{token:Zs,named:Af.command.id}})],Df);const If=[Ku,Qu,od,qd,ef,df,af,cd,gd,wd,Cf,Af,Sd,zd,Td,Gd,vf,xf];var Ff,Gf=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Lf=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Hf=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};!function(e){function t(e){return e.source&&e.source.cell&&n.StringExt.isString(e.source.cell)}function r(e){return e.sourceCell&&n.StringExt.isString(e.sourceCell)}e.command=qi.ADD_EDGE,e.hookKey="addEdge",e.createEdgeId=e=>{if(n.StringExt.isString(e.source))return`${e.source}:${e.sourcePortId}-${e.target}:${e.targetPortId}`;if(t(e)){const t=e;return`${t.source.cell}:${t.source.port}-${t.target.cell}:${t.target.port}`}if(r(e)){const t=e;return`${t.sourceCell}:${t.sourcePort}-${t.targetCell}:${t.targetPort}`}},e.isX6EdgeConfig=t,e.isX6EdgePlainConfig=r}(Ff||(Ff={}));let Bf=class{constructor(){this.processEdgeConfig=(e,t)=>Hf(this,void 0,void 0,(function*(){if(!t.id){const{createIdService:n=Ff.createEdgeId}=e;t.id=yield n(t)}return t.sourcePortId&&!t.sourcePort&&(t.sourcePort=t.sourcePortId,t.targetPort=t.targetPortId),t})),this.execute=()=>Hf(this,void 0,void 0,(function*(){const{args:e,hooks:t}=this.ctx.getArgs(),n=this.ctx.getHooks(),r=yield n.addEdge.call(e,(e=>Hf(this,void 0,void 0,(function*(){const{cellFactory:t,createEdgeService:n,commandService:r,options:o}=e,i=yield this.ctx.getX6Graph();let a=e.edgeConfig;if(n){const t=yield n(e);if("boolean"==typeof t)return{err:"createEdgeService rejected"};a=t}const s=yield this.processEdgeConfig(e,a);let l;if(t){const e=yield t(s,this);l=i.addEdge(e,o)}else l=i.addEdge(Object.assign(Object.assign({},s),{label:(null==s?void 0:s.label)||s,data:Object.assign({},s)}),o);const c=jr.create((()=>{r.executeCommand(qi.DEL_EDGE.id,{x6Edge:l})}));return this.ctx.addUndo(c),{edgeConfig:s,edgeCell:l}}))),t);return this.ctx.setResult(r),this})),this.undo=()=>Hf(this,void 0,void 0,(function*(){return this.ctx.undo(),this})),this.redo=()=>Hf(this,void 0,void 0,(function*(){return this.isUndoable||(yield this.execute()),this}))}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};Gf([nr(Js),Lf("design:type",Object)],Bf.prototype,"contextProvider",void 0),Gf([O.postConstruct(),Lf("design:type",Function),Lf("design:paramtypes",[]),Lf("design:returntype",void 0)],Bf.prototype,"init",null),Bf=Gf([er({token:{token:Zs,named:Ff.command.id}})],Bf);var Uf,Vf=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},zf=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Yf=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};!function(e){var t;e.command=qi.DEL_EDGE,e.hookKey="delEdge",(t=e.ErrEnum||(e.ErrEnum={})).EDGE_NOT_EXIST="edge is not exist",t.EDGE_INVALID_CELL="this is not a valid cell",t.X6_DELETE_FAILED="x6 throw err when call delete edge",t.SERVICE_REJECT="service reject to delete"}(Uf||(Uf={}));let $f=class{constructor(){this.execute=()=>Yf(this,void 0,void 0,(function*(){const{args:e,hooks:t}=this.ctx.getArgs(),n=this.ctx.getHooks(),r=yield n.delEdge.call(e,(e=>Yf(this,void 0,void 0,(function*(){const{edgeConfig:t,x6Edge:n,deleteEdgeService:r,commandService:o,options:i}=e;let a=n;if(!a&&(a=yield this.findEdgeById(t),!a))return console.error(Uf.ErrEnum.EDGE_NOT_EXIST,t),{err:Uf.ErrEnum.EDGE_NOT_EXIST};if(!(a&&a.isEdge()))return console.error(Uf.ErrEnum.EDGE_NOT_EXIST,a),{err:Uf.ErrEnum.EDGE_NOT_EXIST};if(r){if(!(yield r(e)))return{err:Uf.ErrEnum.SERVICE_REJECT}}try{const e=a.getTargetCell(),t=a.getSourceCell(),n=a.getSourcePortId(),r=a.getTargetPortId(),s=t.id,l=e.id;a.remove(i);const c=jr.create((()=>{o.executeCommand(qi.ADD_EDGE.id,{edgeConfig:{source:s,target:l,sourcePortId:n,targetPortId:r}})}));return this.ctx.addUndo(c),{err:null,edgeConfig:{source:s,target:l,sourcePortId:n,targetPortId:r},targetCell:e,sourceCell:t,sourcePortId:n,targetPortId:r}}catch(e){return console.error(Uf.ErrEnum.X6_DELETE_FAILED,e),{err:Uf.ErrEnum.X6_DELETE_FAILED}}}))),t);return this.ctx.setResult(r),this})),this.findEdgeById=e=>Yf(this,void 0,void 0,(function*(){return(yield this.ctx.getX6Graph()).getCellById(e.id)})),this.undo=()=>Yf(this,void 0,void 0,(function*(){return this.ctx.undo(),this})),this.redo=()=>Yf(this,void 0,void 0,(function*(){return this.isUndoable||(yield this.execute()),this}))}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};Vf([nr(Js),zf("design:type",Object)],$f.prototype,"contextProvider",void 0),Vf([O.postConstruct(),zf("design:type",Function),zf("design:paramtypes",[]),zf("design:returntype",void 0)],$f.prototype,"init",null),$f=Vf([er({token:{token:Zs,named:Uf.command.id}})],$f);var Wf,Kf=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},qf=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Xf=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};!function(e){e.command=qi.UPDATE_EDGE,e.hookKey="updateEdge",e.XFlowEdgeSetOptions={overwrite:!0},e.XFlowUpdateLabelService=(t,n,r=e.XFlowEdgeSetOptions)=>Xf(this,void 0,void 0,(function*(){null==t||t.setLabelAt(0,(null==n?void 0:n.label)||n,r)}))}(Wf||(Wf={}));let Zf=class{constructor(){this.execute=()=>Xf(this,void 0,void 0,(function*(){const{args:e,hooks:t}=this.ctx.getArgs(),n=this.ctx.getHooks(),r=yield n.updateEdge.call(e,(e=>Xf(this,void 0,void 0,(function*(){const t=yield this.ctx.getX6Graph(),{updateEdgeService:n,updateEdgeLabelService:r=Wf.XFlowUpdateLabelService,options:o=Wf.XFlowEdgeSetOptions}=e,i=n?yield n(e):null==e?void 0:e.edgeConfig,a=null==t?void 0:t.getCellById(null==i?void 0:i.id);return null==a||a.setData(i,o),(null==i?void 0:i.label)&&(yield r(a,i,o)),i.attrs&&a.setAttrs(i.attrs),{edgeConfig:i,edgeCell:a}}))),t);return this.ctx.setResult(r),this})),this.undo=()=>Xf(this,void 0,void 0,(function*(){return this.ctx.undo(),this})),this.redo=()=>Xf(this,void 0,void 0,(function*(){return this.ctx.isUndoable||(yield this.execute()),this}))}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};Kf([nr(Js),qf("design:type",Object)],Zf.prototype,"contextProvider",void 0),Kf([O.postConstruct(),qf("design:type",Function),qf("design:paramtypes",[]),qf("design:returntype",void 0)],Zf.prototype,"init",null),Zf=Kf([er({token:{token:Zs,named:Wf.command.id}})],Zf);var Jf,Qf=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},eh=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},th=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};!function(e){e.command=qi.HIGHLIGHT_EDGE,e.hookKey="highlightEdge"}(Jf||(Jf={}));let nh=class{constructor(){this.execute=()=>th(this,void 0,void 0,(function*(){const{args:e,hooks:t}=this.ctx.getArgs(),n=this.ctx.getHooks(),r=yield n.highlightEdge.call(e,(e=>th(this,void 0,void 0,(function*(){var t,n;const r=yield this.ctx.getX6Graph(),{edgeId:o,strokeColor:i,strokeWidth:a}=e,s=r.getEdges(),l=s.find((e=>e.id===o)),c=s.filter((e=>e.id!==o));if(l){const r=l.getAttrs();(null===(t=null==r?void 0:r.line)||void 0===t?void 0:t.stroke)===i&&(null===(n=null==r?void 0:r.line)||void 0===n?void 0:n.strokeWidth)===a||(null==l||l.setAttrs({line:{stroke:i,strokeWidth:a||2}}),c.forEach((e=>{e.setAttrs({line:null==r?void 0:r.line})})),e.commandService.executeCommand(qi.FRONT_EDGE.id,{edgeId:o}))}else console.error(o,"this edgeId is not exist");return{}}))),t);return this.ctx.setResult(r),this})),this.undo=()=>th(this,void 0,void 0,(function*(){return this.ctx.undo(),this})),this.redo=()=>th(this,void 0,void 0,(function*(){return this.ctx.isUndoable||(yield this.execute()),this}))}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};Qf([nr(Js),eh("design:type",Object)],nh.prototype,"contextProvider",void 0),Qf([O.postConstruct(),eh("design:type",Function),eh("design:paramtypes",[]),eh("design:returntype",void 0)],nh.prototype,"init",null),nh=Qf([er({token:{token:Zs,named:Jf.command.id}})],nh);var rh,oh=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ih=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ah=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};!function(e){e.command=qi.FRONT_EDGE,e.hookKey="frontEdge"}(rh||(rh={}));let sh=class{constructor(){this.execute=()=>ah(this,void 0,void 0,(function*(){const{args:e,hooks:t}=this.ctx.getArgs(),n=this.ctx.getHooks(),r=yield n.frontEdge.call(e,(e=>ah(this,void 0,void 0,(function*(){const t=yield this.ctx.getX6Graph(),{edgeId:n}=e,r=null==t?void 0:t.getCellById(n);return r?(r.toFront(),this.ctx.addUndo(jr.create((()=>ah(this,void 0,void 0,(function*(){e.commandService.executeCommand(qi.BACK_EDGE.id,{edgeId:n})})))))):console.error(n,"this edgeId is not exist"),{}}))),t);return this.ctx.setResult(r),this})),this.undo=()=>ah(this,void 0,void 0,(function*(){return this.ctx.undo(),this})),this.redo=()=>ah(this,void 0,void 0,(function*(){return this.ctx.isUndoable||(yield this.execute()),this}))}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};oh([nr(Js),ih("design:type",Object)],sh.prototype,"contextProvider",void 0),oh([O.postConstruct(),ih("design:type",Function),ih("design:paramtypes",[]),ih("design:returntype",void 0)],sh.prototype,"init",null),sh=oh([er({token:{token:Zs,named:rh.command.id}})],sh);var lh,ch=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},uh=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},dh=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};!function(e){e.command=qi.BACK_EDGE,e.hookKey="frontEdge"}(lh||(lh={}));let fh=class{constructor(){this.execute=()=>dh(this,void 0,void 0,(function*(){const{args:e,hooks:t}=this.ctx.getArgs(),n=this.ctx.getHooks(),r=yield n.frontEdge.call(e,(e=>dh(this,void 0,void 0,(function*(){const t=yield this.ctx.getX6Graph(),{edgeId:n}=e,r=null==t?void 0:t.getCellById(n);return r?(r.toBack(),this.ctx.addUndo(jr.create((()=>dh(this,void 0,void 0,(function*(){e.commandService.executeCommand(qi.FRONT_EDGE.id,{edgeId:n})})))))):console.error(n,"this edgeId is not exist"),{}}))),t);return this.ctx.setResult(r),this})),this.undo=()=>dh(this,void 0,void 0,(function*(){return this.ctx.undo(),this})),this.redo=()=>dh(this,void 0,void 0,(function*(){return this.ctx.isUndoable||(yield this.execute()),this}))}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};ch([nr(Js),uh("design:type",Object)],fh.prototype,"contextProvider",void 0),ch([O.postConstruct(),uh("design:type",Function),uh("design:paramtypes",[]),uh("design:returntype",void 0)],fh.prototype,"init",null),fh=ch([er({token:{token:Zs,named:lh.command.id}})],fh);const hh=[Ff,Uf,Wf,Jf,rh,lh];var ph,gh=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},vh=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},yh=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};!function(e){e.command=Ji.ADD_GROUP,e.hookKey="addGroup",e.GROUP_PADDING=12,e.GROUP_HEADER_HEIGHT=40}(ph||(ph={}));let mh=class{constructor(){this.getBBox=(e,t,n)=>{const{groupHeaderHeight:r=ph.GROUP_HEADER_HEIGHT,groupPadding:o=ph.GROUP_PADDING}=t,i=n.getCellsBBox(e.children);return i.moveAndExpand({x:-o,y:-(o+r),width:2*o,height:2*o+r}),i},this.execute=()=>yh(this,void 0,void 0,(function*(){const e=this.contextProvider(),{args:t,hooks:n}=e.getArgs(),r=e.getHooks(),o=yield r.addGroup.call(t,(t=>yh(this,void 0,void 0,(function*(){const{nodeConfig:n,createService:r,cellFactory:o,commandService:i}=t,a=yield e.getX6Graph(),s=yield i.executeCommand(Ki.ADD_NODE.id,{cellFactory:o,createNodeService:r,nodeConfig:n}),{nodeCell:l}=s.contextProvider().getResult(),{id:c}=l,{groupChildren:u}=n;if(u.length){u.forEach((e=>{const t=a.getCellById(e);t&&(t.setData(Object.assign(Object.assign({},t.getData()),{group:c,isCollapsed:!1})),t.prop("group",c),l.addChild(t),a.unselect(t))}));const e=this.getBBox(l,n,a);l.position(e.x,e.y),l.size(e.width,e.height),l.setZIndex(0),l.prop("isGroup",!0),l.setData(Object.assign(Object.assign({},l.getData()),{width:e.width,height:e.height,groupChildrenSize:{width:e.width,height:e.height},x:e.x,y:e.y,isGroup:!0})),a.select(l)}return n.isCollapsed&&(yield i.executeCommand(Ji.COLLAPSE_GROUP.id,{nodeId:n.id,isCollapsed:n.isCollapsed})),e.addUndo(jr.create((()=>yh(this,void 0,void 0,(function*(){i.executeCommand(Ji.DEL_GROUP.id,{nodeConfig:n})}))))),{nodeConfig:n,nodeCell:l}}))),n);return e.setResult(o),this})),this.undo=()=>yh(this,void 0,void 0,(function*(){const e=this.contextProvider();return this.isUndoable()&&e.undo(),this})),this.redo=()=>yh(this,void 0,void 0,(function*(){return this.isUndoable()||(yield this.execute()),this}))}isUndoable(){return this.contextProvider().isUndoable()}};gh([nr(Js),vh("design:type",Object)],mh.prototype,"contextProvider",void 0),mh=gh([er({token:{token:Zs,named:ph.command.id}})],mh);var bh,wh=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},xh=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},_h=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};!function(e){e.command=Ji.DEL_GROUP,e.hookKey="delGroup"}(bh||(bh={}));let Eh=class{constructor(){this.execute=()=>_h(this,void 0,void 0,(function*(){const e=this.contextProvider(),{args:t,hooks:n}=e.getArgs(),r=e.getHooks(),o=yield r.delGroup.call(t,(t=>_h(this,void 0,void 0,(function*(){const n=yield e.getX6Graph(),{nodeConfig:r,commandService:o,deleteService:i}=t,{id:a}=r,s=n.getCellById(a);if(i){if(!(yield i(t)))return{err:"service rejected"}}if(!s)return{err:"target node is not exist"};if(!0!==s.getProp("isGroup"))return{err:"target node is not group"};const{isCollapsed:l}=s.getData();l&&(yield o.executeCommand(Ji.COLLAPSE_GROUP.id,{nodeId:s.id,isCollapsed:!1,collapsedSize:{width:0,height:0}}));const c=s.getChildren();return c&&c.forEach((e=>{s.unembed(e),e.prop("group",""),e.setData(Object.assign(Object.assign({},e.getData()),{group:""}))})),yield o.executeCommand(Ki.DEL_NODE.id,{nodeConfig:r}),e.addUndo(jr.create((()=>_h(this,void 0,void 0,(function*(){o.executeCommand(Ji.ADD_GROUP.id,{nodeConfig:r})}))))),{err:null}}))),n);return e.setResult(o),this})),this.undo=()=>_h(this,void 0,void 0,(function*(){const e=this.contextProvider();return this.isUndoable()&&e.undo(),this})),this.redo=()=>_h(this,void 0,void 0,(function*(){return this.isUndoable()||(yield this.execute()),this}))}isUndoable(){return this.contextProvider().isUndoable()}};wh([nr(Js),xh("design:type",Object)],Eh.prototype,"contextProvider",void 0),Eh=wh([er({token:{token:Zs,named:bh.command.id}})],Eh);var Oh,Sh=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Ch=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},kh=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};!function(e){e.command=Ji.INIT_GROUP,e.hookKey="initGroup"}(Oh||(Oh={}));let Ph=class{constructor(){this.execute=()=>kh(this,void 0,void 0,(function*(){const e=this.contextProvider(),{args:t,hooks:n}=e.getArgs(),r=e.getHooks(),o=yield r.initGroup.call(t,(t=>kh(this,void 0,void 0,(function*(){const{graphData:n,commandService:r}=t,o=yield e.getX6Graph(),{nodes:i}=n,a={};return i.forEach((e=>{const{id:t,group:n}=e;n&&(a[n]?a[n].push(t):a[n]=[t])})),Object.keys(a).forEach((e=>kh(this,void 0,void 0,(function*(){const n=o.getCellById(e),i=n.getData(),s=a[e]||[];n.prop("isGroup",!0),n.setData(Object.assign(Object.assign({},i),{isGroup:!0,groupChildren:s})),s.forEach((e=>{const t=o.getCellById(e);n.embed(t)})),n.toBack();const{isCollapsed:l,groupCollapsedSize:c}=i;if(l){const e=t.collapsedSize||c||Ur;yield r.executeCommand(Ji.COLLAPSE_GROUP.id,{collapsedSize:e,isCollapsed:!0,nodeId:n.id})}})))),{}}))),n);return e.setResult(o),this})),this.undo=()=>kh(this,void 0,void 0,(function*(){const e=this.contextProvider();return this.isUndoable()&&e.undo(),this})),this.redo=()=>kh(this,void 0,void 0,(function*(){return this.isUndoable()||(yield this.execute()),this}))}isUndoable(){return this.contextProvider().isUndoable()}};Sh([nr(Js),Ch("design:type",Object)],Ph.prototype,"contextProvider",void 0),Ph=Sh([er({token:{token:Zs,named:Oh.command.id}})],Ph);var Mh,Th=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Ah=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Nh=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};!function(e){e.command=Ji.COLLAPSE_GROUP,e.hookKey="collapseGroup"}(Mh||(Mh={}));let Rh=class{constructor(){this.toggleVisible=(e,t,n)=>{e.forEach((e=>{n.findViewByCell(e).container.style.visibility=t?"visible":"hidden"}))},this.toggleCollapse=(e,t,n)=>{const r=e.getChildren().filter((e=>e.isNode())),o=e.getData(),{isCollapsed:i,gap:a=0}=n;if(i){const t=n.collapsedSize||o.groupCollapsedSize||Ur;e.prop("previousSize",e.size()),e.size(t)}else e.size(e.prop("previousSize"));r&&r.forEach((n=>{const o=e.position(),s=t.getConnectedEdges(n).filter((e=>{const t=e.getSourceNode(),n=e.getTargetNode();return r.includes(t)&&r.includes(n)}));if(i){this.toggleVisible([n,...s],!1,t),n.prop("previousSize",n.size()),n.prop("previousRelativePosition",n.position({relative:!0})),n.position(o.x+a,o.y+a);const r=e.size();n.size({width:r.width-2*a,height:r.height-2*a})}else{this.toggleVisible([n,...s],!0,t);const e=n.prop("previousRelativePosition"),r=n.prop("previousSize");n.position(e.x,e.y,{relative:!0}),n.size(r)}})),e.prop("isCollapsed",i),e.setData(Object.assign(Object.assign({},e.getData()),{isCollapsed:i}))},this.execute=()=>Nh(this,void 0,void 0,(function*(){const{args:e,hooks:t}=this.ctx.getArgs(),n=this.ctx.getHooks(),r=yield n.collapseGroup.call(e,(t=>Nh(this,void 0,void 0,(function*(){const n=yield this.ctx.getX6Graph(),r=n.getCellById(e.nodeId),{toggleService:o}=t;if(o){if(!(yield o(t)))return{err:"service rejected"}}return r&&(this.toggleCollapse(r,n,e),this.ctx.addUndo(jr.create((()=>Nh(this,void 0,void 0,(function*(){r&&this.toggleCollapse(r,n,Object.assign(e,{isCollapsed:!e.isCollapsed}))})))))),{err:null}}))),t);return this.ctx.setResult(r),this})),this.undo=()=>Nh(this,void 0,void 0,(function*(){return this.ctx.undo(),this})),this.redo=()=>Nh(this,void 0,void 0,(function*(){return this.ctx.isUndoable||(yield this.execute()),this}))}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};Th([nr(Js),Ah("design:type",Object)],Rh.prototype,"contextProvider",void 0),Th([O.postConstruct(),Ah("design:type",Function),Ah("design:paramtypes",[]),Ah("design:returntype",void 0)],Rh.prototype,"init",null),Rh=Th([er({token:{token:Zs,named:Mh.command.id}})],Rh);const jh=[ph,bh,Oh,Mh];var Dh,Ih=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Fh=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Gh=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};!function(e){e.command=Zi.UPDATE_MODEL,e.hookKey="updateModel"}(Dh||(Dh={}));let Lh=class{constructor(){this.execute=()=>Gh(this,void 0,void 0,(function*(){const e=this.contextProvider(),{args:t,hooks:n}=e.getArgs(),r=e.getHooks(),o=yield r.updateModel.call(t,(t=>Gh(this,void 0,void 0,(function*(){const{updateModel:n,getModel:r,modelService:o}=t,i=yield r(o),a=i.getValue(),s=Ys(a);yield n(s);const l=$s(s);return i.setValue(l),e.addUndo(jr.create((()=>Gh(this,void 0,void 0,(function*(){i.setValue(l)}))))),{model:i,value:l}}))),n);return e.setResult(o),this})),this.undo=()=>Gh(this,void 0,void 0,(function*(){const e=this.contextProvider();return this.isUndoable()&&e.undo(),this})),this.redo=()=>Gh(this,void 0,void 0,(function*(){return this.isUndoable()||(yield this.execute()),this}))}isUndoable(){return this.contextProvider().isUndoable()}};Ih([nr(Js),Fh("design:type",Object)],Lh.prototype,"contextProvider",void 0),Lh=Ih([er({token:{token:Zs,named:Dh.command.id}})],Lh);var Hh=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Bh=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Uh=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};const Vh=[...Wu,...hh,...jh,...If,...[Dh]],zh=()=>new ml;let Yh=class{constructor(){this.registerHook=e=>Uh(this,void 0,void 0,(function*(){const t=e.x6Events.registerHook({name:"bind group node move event",handler:e=>Uh(this,void 0,void 0,(function*(){const t={eventName:"node:moving",callback:({node:e})=>Uh(this,void 0,void 0,(function*(){if(e.prop("isGroup"))return void e.prop("originPosition",e.getPosition());const t=e.model.graph,{group:n}=e.getData(),r=t.getNodes().find((e=>e.id===n));if(!r)return;const o=r.getProp("isCollapsed");let i=r.getProp("originSize"),a=!1;null==i&&(i=r.size(),r.prop("originSize",i));let s=r.prop("originPosition");null==s&&(s=r.getPosition(),r.prop("originPosition",s));let l=s.x,c=s.y,u=s.x+i.width,d=s.y+i.height;const f=r.getChildren();if(f&&f.forEach((e=>{const t=e.getBBox().inflate(12),n=t.getCorner();t.x<l&&(l=t.x,a=!0),t.y<c&&(c=t.y,a=!0),n.x>u&&(u=n.x,a=!0),n.y>d&&(d=n.y,a=!0)})),a){r.prop({position:{x:l,y:c},size:{width:u-l,height:d-c}});const e=Object.assign(Object.assign({},r.getData()),{x:l,y:c,width:u-l,height:d-c});!0!==o&&(e.groupChildrenSize={width:u-l,height:d-c}),r.setData(e)}}))};e.push(t)}))});return jr.create((()=>{t.dispose()}))})),this.registerHookHub=e=>Uh(this,void 0,void 0,(function*(){const t=new Ir;return Vh.forEach((({hookKey:n,createHook:r=zh})=>{const o=e.registerHookHub(n,r());t.push(o)})),this.commandConfig.getConfig().then((({getContributions:n})=>{n().forEach((({hookKey:n,createHook:r=zh})=>{const o=e.registerHookHub(n,r());t.push(o)}))})),t}))}registerGraphCommands(e){Vh.forEach((({command:t})=>{e.registerCommand(t,{createCommand:this.commandFactory})})),this.commandConfig.getConfig().then((({getContributions:t})=>{t().forEach((t=>{e.registerCommand(t.command,{createCommand:this.commandFactory})}))}))}};Hh([nr(Qs),Bh("design:type",Function)],Yh.prototype,"commandFactory",void 0),Hh([nr(tu),Bh("design:type",tu)],Yh.prototype,"commandConfig",void 0),Yh=Hh([tr({contrib:[el,wl]})],Yh);const $h=Symbol("IToolbarService"),Wh=In.defineToken("IToolbarContribution");var Kh=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},qh="object"==typeof _&&_&&_.Object===Object&&_,Xh=qh,Zh="object"==typeof self&&self&&self.Object===Object&&self,Jh=Xh||Zh||Function("return this")(),Qh=Jh,ep=function(){return Qh.Date.now()},tp=/\s/;var np=function(e){for(var t=e.length;t--&&tp.test(e.charAt(t)););return t},rp=/^\s+/;var op=function(e){return e?e.slice(0,np(e)+1).replace(rp,""):e},ip=Jh.Symbol,ap=ip,sp=Object.prototype,lp=sp.hasOwnProperty,cp=sp.toString,up=ap?ap.toStringTag:void 0;var dp=function(e){var t=lp.call(e,up),n=e[up];try{e[up]=void 0;var r=!0}catch(e){}var o=cp.call(e);return r&&(t?e[up]=n:delete e[up]),o},fp=Object.prototype.toString;var hp=dp,pp=function(e){return fp.call(e)},gp=ip?ip.toStringTag:void 0;var vp=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":gp&&gp in Object(e)?hp(e):pp(e)};var yp=function(e){return null!=e&&"object"==typeof e},mp=vp,bp=yp;var wp=function(e){return"symbol"==typeof e||bp(e)&&"[object Symbol]"==mp(e)},xp=op,_p=Kh,Ep=wp,Op=/^[-+]0x[0-9a-f]+$/i,Sp=/^0b[01]+$/i,Cp=/^0o[0-7]+$/i,kp=parseInt;var Pp=Kh,Mp=ep,Tp=function(e){if("number"==typeof e)return e;if(Ep(e))return NaN;if(_p(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=_p(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=xp(e);var n=Sp.test(e);return n||Cp.test(e)?kp(e.slice(2),n?2:8):Op.test(e)?NaN:+e},Ap=Math.max,Np=Math.min;var Rp=function(e,t,n){var r,o,i,a,s,l,c=0,u=!1,d=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function h(t){var n=r,i=o;return r=o=void 0,c=t,a=e.apply(i,n)}function p(e){return c=e,s=setTimeout(v,t),u?h(e):a}function g(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-c>=i}function v(){var e=Mp();if(g(e))return y(e);s=setTimeout(v,function(e){var n=t-(e-l);return d?Np(n,i-(e-c)):n}(e))}function y(e){return s=void 0,f&&r?h(e):(r=o=void 0,a)}function m(){var e=Mp(),n=g(e);if(r=arguments,o=this,l=e,n){if(void 0===s)return p(l);if(d)return clearTimeout(s),s=setTimeout(v,t),h(l)}return void 0===s&&(s=setTimeout(v,t)),a}return t=Tp(t)||0,Pp(n)&&(u=!!n.leading,i=(d="maxWait"in n)?Ap(Tp(n.maxWait)||0,t):i,f="trailing"in n?!!n.trailing:f),m.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=l=o=s=void 0},m.flush=function(){return void 0===s?a:y(Mp())},m};var jp=function(){this.__data__=[],this.size=0};var Dp=function(e,t){return e===t||e!=e&&t!=t},Ip=Dp;var Fp=function(e,t){for(var n=e.length;n--;)if(Ip(e[n][0],t))return n;return-1},Gp=Fp,Lp=Array.prototype.splice;var Hp=Fp;var Bp=Fp;var Up=Fp;var Vp=jp,zp=function(e){var t=this.__data__,n=Gp(t,e);return!(n<0)&&(n==t.length-1?t.pop():Lp.call(t,n,1),--this.size,!0)},Yp=function(e){var t=this.__data__,n=Hp(t,e);return n<0?void 0:t[n][1]},$p=function(e){return Bp(this.__data__,e)>-1},Wp=function(e,t){var n=this.__data__,r=Up(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function Kp(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Kp.prototype.clear=Vp,Kp.prototype.delete=zp,Kp.prototype.get=Yp,Kp.prototype.has=$p,Kp.prototype.set=Wp;var qp=Kp,Xp=qp;var Zp=function(){this.__data__=new Xp,this.size=0};var Jp=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};var Qp=function(e){return this.__data__.get(e)};var eg=function(e){return this.__data__.has(e)},tg=vp,ng=Kh;var rg,og=function(e){if(!ng(e))return!1;var t=tg(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},ig=Jh["__core-js_shared__"],ag=(rg=/[^.]+$/.exec(ig&&ig.keys&&ig.keys.IE_PROTO||""))?"Symbol(src)_1."+rg:"";var sg=function(e){return!!ag&&ag in e},lg=Function.prototype.toString;var cg=function(e){if(null!=e){try{return lg.call(e)}catch(e){}try{return e+""}catch(e){}}return""},ug=og,dg=sg,fg=Kh,hg=cg,pg=/^\[object .+?Constructor\]$/,gg=Function.prototype,vg=Object.prototype,yg=gg.toString,mg=vg.hasOwnProperty,bg=RegExp("^"+yg.call(mg).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var wg=function(e){return!(!fg(e)||dg(e))&&(ug(e)?bg:pg).test(hg(e))},xg=function(e,t){return null==e?void 0:e[t]};var _g=function(e,t){var n=xg(e,t);return wg(n)?n:void 0},Eg=_g(Jh,"Map"),Og=_g(Object,"create"),Sg=Og;var Cg=function(){this.__data__=Sg?Sg(null):{},this.size=0};var kg=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Pg=Og,Mg=Object.prototype.hasOwnProperty;var Tg=function(e){var t=this.__data__;if(Pg){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Mg.call(t,e)?t[e]:void 0},Ag=Og,Ng=Object.prototype.hasOwnProperty;var Rg=Og;var jg=Cg,Dg=kg,Ig=Tg,Fg=function(e){var t=this.__data__;return Ag?void 0!==t[e]:Ng.call(t,e)},Gg=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Rg&&void 0===t?"__lodash_hash_undefined__":t,this};function Lg(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Lg.prototype.clear=jg,Lg.prototype.delete=Dg,Lg.prototype.get=Ig,Lg.prototype.has=Fg,Lg.prototype.set=Gg;var Hg=Lg,Bg=qp,Ug=Eg;var Vg=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var zg=function(e,t){var n=e.__data__;return Vg(t)?n["string"==typeof t?"string":"hash"]:n.map},Yg=zg;var $g=zg;var Wg=zg;var Kg=zg;var qg=function(){this.size=0,this.__data__={hash:new Hg,map:new(Ug||Bg),string:new Hg}},Xg=function(e){var t=Yg(this,e).delete(e);return this.size-=t?1:0,t},Zg=function(e){return $g(this,e).get(e)},Jg=function(e){return Wg(this,e).has(e)},Qg=function(e,t){var n=Kg(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function ev(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ev.prototype.clear=qg,ev.prototype.delete=Xg,ev.prototype.get=Zg,ev.prototype.has=Jg,ev.prototype.set=Qg;var tv=ev,nv=qp,rv=Eg,ov=tv;var iv=qp,av=Zp,sv=Jp,lv=Qp,cv=eg,uv=function(e,t){var n=this.__data__;if(n instanceof nv){var r=n.__data__;if(!rv||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new ov(r)}return n.set(e,t),this.size=n.size,this};function dv(e){var t=this.__data__=new iv(e);this.size=t.size}dv.prototype.clear=av,dv.prototype.delete=sv,dv.prototype.get=lv,dv.prototype.has=cv,dv.prototype.set=uv;var fv=dv;var hv=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e},pv=_g,gv=function(){try{var e=pv(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),vv=gv;var yv=function(e,t,n){"__proto__"==t&&vv?vv(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},mv=yv,bv=Dp,wv=Object.prototype.hasOwnProperty;var xv=function(e,t,n){var r=e[t];wv.call(e,t)&&bv(r,n)&&(void 0!==n||t in e)||mv(e,t,n)},_v=xv,Ev=yv;var Ov=function(e,t,n,r){var o=!n;n||(n={});for(var i=-1,a=t.length;++i<a;){var s=t[i],l=r?r(n[s],e[s],s,n,e):void 0;void 0===l&&(l=e[s]),o?Ev(n,s,l):_v(n,s,l)}return n};var Sv=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r},Cv=vp,kv=yp;var Pv=function(e){return kv(e)&&"[object Arguments]"==Cv(e)},Mv=yp,Tv=Object.prototype,Av=Tv.hasOwnProperty,Nv=Tv.propertyIsEnumerable,Rv=Pv(function(){return arguments}())?Pv:function(e){return Mv(e)&&Av.call(e,"callee")&&!Nv.call(e,"callee")},jv=Rv,Dv=Array.isArray,Iv={exports:{}};var Fv=function(){return!1};!function(e,t){var n=Jh,r=Fv,o=t&&!t.nodeType&&t,i=o&&e&&!e.nodeType&&e,a=i&&i.exports===o?n.Buffer:void 0,s=(a?a.isBuffer:void 0)||r;e.exports=s}(Iv,Iv.exports);var Gv=/^(?:0|[1-9]\d*)$/;var Lv=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&Gv.test(e))&&e>-1&&e%1==0&&e<t};var Hv=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},Bv=vp,Uv=Hv,Vv=yp,zv={};zv["[object Float32Array]"]=zv["[object Float64Array]"]=zv["[object Int8Array]"]=zv["[object Int16Array]"]=zv["[object Int32Array]"]=zv["[object Uint8Array]"]=zv["[object Uint8ClampedArray]"]=zv["[object Uint16Array]"]=zv["[object Uint32Array]"]=!0,zv["[object Arguments]"]=zv["[object Array]"]=zv["[object ArrayBuffer]"]=zv["[object Boolean]"]=zv["[object DataView]"]=zv["[object Date]"]=zv["[object Error]"]=zv["[object Function]"]=zv["[object Map]"]=zv["[object Number]"]=zv["[object Object]"]=zv["[object RegExp]"]=zv["[object Set]"]=zv["[object String]"]=zv["[object WeakMap]"]=!1;var Yv=function(e){return Vv(e)&&Uv(e.length)&&!!zv[Bv(e)]};var $v=function(e){return function(t){return e(t)}},Wv={exports:{}};!function(e,t){var n=qh,r=t&&!t.nodeType&&t,o=r&&e&&!e.nodeType&&e,i=o&&o.exports===r&&n.process,a=function(){try{var e=o&&o.require&&o.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=a}(Wv,Wv.exports);var Kv=Yv,qv=$v,Xv=Wv.exports,Zv=Xv&&Xv.isTypedArray,Jv=Zv?qv(Zv):Kv,Qv=Sv,ey=jv,ty=Dv,ny=Iv.exports,ry=Lv,oy=Jv,iy=Object.prototype.hasOwnProperty;var ay=function(e,t){var n=ty(e),r=!n&&ey(e),o=!n&&!r&&ny(e),i=!n&&!r&&!o&&oy(e),a=n||r||o||i,s=a?Qv(e.length,String):[],l=s.length;for(var c in e)!t&&!iy.call(e,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ry(c,l))||s.push(c);return s},sy=Object.prototype;var ly=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||sy)};var cy=function(e,t){return function(n){return e(t(n))}},uy=cy(Object.keys,Object),dy=ly,fy=uy,hy=Object.prototype.hasOwnProperty;var py=og,gy=Hv;var vy=function(e){return null!=e&&gy(e.length)&&!py(e)},yy=ay,my=function(e){if(!dy(e))return fy(e);var t=[];for(var n in Object(e))hy.call(e,n)&&"constructor"!=n&&t.push(n);return t},by=vy;var wy=function(e){return by(e)?yy(e):my(e)},xy=Ov,_y=wy;var Ey=function(e,t){return e&&xy(t,_y(t),e)};var Oy=Kh,Sy=ly,Cy=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t},ky=Object.prototype.hasOwnProperty;var Py=ay,My=function(e){if(!Oy(e))return Cy(e);var t=Sy(e),n=[];for(var r in e)("constructor"!=r||!t&&ky.call(e,r))&&n.push(r);return n},Ty=vy;var Ay=function(e){return Ty(e)?Py(e,!0):My(e)},Ny=Ov,Ry=Ay;var jy=function(e,t){return e&&Ny(t,Ry(t),e)},Dy={exports:{}};!function(e,t){var n=Jh,r=t&&!t.nodeType&&t,o=r&&e&&!e.nodeType&&e,i=o&&o.exports===r?n.Buffer:void 0,a=i?i.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=a?a(n):new e.constructor(n);return e.copy(r),r}}(Dy,Dy.exports);var Iy=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t};var Fy=function(){return[]},Gy=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i},Ly=Fy,Hy=Object.prototype.propertyIsEnumerable,By=Object.getOwnPropertySymbols,Uy=By?function(e){return null==e?[]:(e=Object(e),Gy(By(e),(function(t){return Hy.call(e,t)})))}:Ly,Vy=Ov,zy=Uy;var Yy=function(e,t){return Vy(e,zy(e),t)};var $y=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e},Wy=cy(Object.getPrototypeOf,Object),Ky=$y,qy=Wy,Xy=Uy,Zy=Fy,Jy=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Ky(t,Xy(e)),e=qy(e);return t}:Zy,Qy=Ov,em=Jy;var tm=function(e,t){return Qy(e,em(e),t)},nm=$y,rm=Dv;var om=function(e,t,n){var r=t(e);return rm(e)?r:nm(r,n(e))},im=om,am=Uy,sm=wy;var lm=function(e){return im(e,sm,am)},cm=om,um=Jy,dm=Ay;var fm=function(e){return cm(e,dm,um)},hm=_g(Jh,"DataView"),pm=_g(Jh,"Promise"),gm=_g(Jh,"Set"),vm=hm,ym=Eg,mm=pm,bm=gm,wm=_g(Jh,"WeakMap"),xm=vp,_m=cg,Em="[object Map]",Om="[object Promise]",Sm="[object Set]",Cm="[object WeakMap]",km="[object DataView]",Pm=_m(vm),Mm=_m(ym),Tm=_m(mm),Am=_m(bm),Nm=_m(wm),Rm=xm;(vm&&Rm(new vm(new ArrayBuffer(1)))!=km||ym&&Rm(new ym)!=Em||mm&&Rm(mm.resolve())!=Om||bm&&Rm(new bm)!=Sm||wm&&Rm(new wm)!=Cm)&&(Rm=function(e){var t=xm(e),n="[object Object]"==t?e.constructor:void 0,r=n?_m(n):"";if(r)switch(r){case Pm:return km;case Mm:return Em;case Tm:return Om;case Am:return Sm;case Nm:return Cm}return t});var jm=Rm,Dm=Object.prototype.hasOwnProperty;var Im=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Dm.call(e,"index")&&(n.index=e.index,n.input=e.input),n},Fm=Jh.Uint8Array,Gm=Fm;var Lm=function(e){var t=new e.constructor(e.byteLength);return new Gm(t).set(new Gm(e)),t},Hm=Lm;var Bm=function(e,t){var n=t?Hm(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},Um=/\w*$/;var Vm=function(e){var t=new e.constructor(e.source,Um.exec(e));return t.lastIndex=e.lastIndex,t},zm=ip?ip.prototype:void 0,Ym=zm?zm.valueOf:void 0;var $m=Lm;var Wm=function(e,t){var n=t?$m(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},Km=Lm,qm=Bm,Xm=Vm,Zm=function(e){return Ym?Object(Ym.call(e)):{}},Jm=Wm;var Qm=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return Km(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return qm(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Jm(e,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return Xm(e);case"[object Symbol]":return Zm(e)}},eb=Kh,tb=Object.create,nb=function(){function e(){}return function(t){if(!eb(t))return{};if(tb)return tb(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),rb=Wy,ob=ly;var ib=function(e){return"function"!=typeof e.constructor||ob(e)?{}:nb(rb(e))},ab=jm,sb=yp;var lb=function(e){return sb(e)&&"[object Map]"==ab(e)},cb=$v,ub=Wv.exports,db=ub&&ub.isMap,fb=db?cb(db):lb,hb=jm,pb=yp;var gb=function(e){return pb(e)&&"[object Set]"==hb(e)},vb=$v,yb=Wv.exports,mb=yb&&yb.isSet,bb=mb?vb(mb):gb,wb=fv,xb=hv,_b=xv,Eb=Ey,Ob=jy,Sb=Dy.exports,Cb=Iy,kb=Yy,Pb=tm,Mb=lm,Tb=fm,Ab=jm,Nb=Im,Rb=Qm,jb=ib,Db=Dv,Ib=Iv.exports,Fb=fb,Gb=Kh,Lb=bb,Hb=wy,Bb=Ay,Ub="[object Arguments]",Vb="[object Function]",zb="[object Object]",Yb={};Yb[Ub]=Yb["[object Array]"]=Yb["[object ArrayBuffer]"]=Yb["[object DataView]"]=Yb["[object Boolean]"]=Yb["[object Date]"]=Yb["[object Float32Array]"]=Yb["[object Float64Array]"]=Yb["[object Int8Array]"]=Yb["[object Int16Array]"]=Yb["[object Int32Array]"]=Yb["[object Map]"]=Yb["[object Number]"]=Yb[zb]=Yb["[object RegExp]"]=Yb["[object Set]"]=Yb["[object String]"]=Yb["[object Symbol]"]=Yb["[object Uint8Array]"]=Yb["[object Uint8ClampedArray]"]=Yb["[object Uint16Array]"]=Yb["[object Uint32Array]"]=!0,Yb["[object Error]"]=Yb[Vb]=Yb["[object WeakMap]"]=!1;var $b=function e(t,n,r,o,i,a){var s,l=1&n,c=2&n,u=4&n;if(r&&(s=i?r(t,o,i,a):r(t)),void 0!==s)return s;if(!Gb(t))return t;var d=Db(t);if(d){if(s=Nb(t),!l)return Cb(t,s)}else{var f=Ab(t),h=f==Vb||"[object GeneratorFunction]"==f;if(Ib(t))return Sb(t,l);if(f==zb||f==Ub||h&&!i){if(s=c||h?{}:jb(t),!l)return c?Pb(t,Ob(s,t)):kb(t,Eb(s,t))}else{if(!Yb[f])return i?t:{};s=Rb(t,f,l)}}a||(a=new wb);var p=a.get(t);if(p)return p;a.set(t,s),Lb(t)?t.forEach((function(o){s.add(e(o,n,r,o,t,a))})):Fb(t)&&t.forEach((function(o,i){s.set(i,e(o,n,r,i,t,a))}));var g=d?void 0:(u?c?Tb:Mb:c?Bb:Hb)(t);return xb(g||t,(function(o,i){g&&(o=t[i=o]),_b(s,i,e(o,n,r,i,t,a))})),s},Wb=$b;var Kb=function(e){return Wb(e,5)},qb=vp,Xb=yp;var Zb=function(e){return!0===e||!1===e||Xb(e)&&"[object Boolean]"==qb(e)},Jb=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Qb=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let ew=class{constructor(){this.toDispose=new Ir,this.toolbarItems=new Map,this.onDidChangeEvent=new Ks(null),this.onDidChange=this.onDidChangeEvent.watch,this.fireOnDidChange=Rp((()=>this.onDidChangeEvent.setValue(void 0)),16),this.registerDisposableToolbar=e=>{const t=new Ir,n={registerToolbarItem:e=>{const n=this.registerItem(e);return t.push(n),n}};return e(n),this.toDispose.push(t),t},this.getToolbarModel=e=>{const{layout:t,mainGroups:n=[],extraGroups:r=[]}=e;return new Ks({layout:t,mainGroups:this.createToolbarGroupModel(n),extraGroups:this.createToolbarGroupModel(r)})},this.createToolbarGroupModel=e=>{const t=e.map((e=>{const{items:t=[]}=e;return Object.assign(Object.assign({},e),{items:t.map((e=>this.createToolbarModel({id:e.id}))).filter((e=>!!e))})}));return t}}onStart(){const e=this.contributionProvider.getContributions();for(const t of e)t.registerToolbarItems(this)}onStop(){this.toDispose.dispose()}registerItem(e){this.toolbarItems.has(e.id)&&console.warn(`ToolbarRegistry ${e.id} is duplicated, in`,e),this.toolbarItems.set(e.id,e),this.fireOnDidChange();return new Ir(jr.create((()=>this.fireOnDidChange())),jr.create((()=>this.toolbarItems.delete(e.id))))}createToolbarModel(e){const t=Kb(this.toolbarItems.get(e.id)),n=!Zb(t.isEnabled)||t.isEnabled,r=!Zb(t.isVisible)||t.isVisible;return Object.assign(Object.assign({},t),{isEnabled:n,isVisible:r,iconName:t.iconName,text:t.text})}};Jb([nr(Xs),Qb("design:type",Object)],ew.prototype,"commandService",void 0),Jb([nr(sl),Qb("design:type",Object)],ew.prototype,"modelService",void 0),Jb([vr(Wh),Qb("design:type",Object)],ew.prototype,"contributionProvider",void 0),ew=Jb([tr({contrib:[qs,$h]})],ew);const tw=Symbol("IMenuService"),nw=In.defineToken("IMenuContribution");var rw;!function(e){e.Separator="separator",e.Submenu="submenu",e.Root="root",e.Leaf="leaf"}(rw||(rw={}));var ow=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},iw=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let aw=class{constructor(){this.toDispose=new Ir,this.menuMap=new Map,this.getMenu=e=>this.menuMap.get(e),this.registerDisposableMenu=e=>{const t=new Ir,n={registerMenu:e=>{const n=this.registerMenu(e);return t.push(n),n}};return e(n),this.toDispose.push(t),t}}onStart(){const e=this.contributionProvider.getContributions();for(const t of e)t.registerMenu(this)}onStop(){this.toDispose.dispose()}registerMenu(e){return this.menuMap.set(e.id,e),jr.create((()=>this.menuMap.delete(e.id)))}};ow([vr(nw),iw("design:type",Object)],aw.prototype,"contributionProvider",void 0),aw=ow([tr({contrib:[qs,tw]})],aw);var sw=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};const lw=()=>{const e=d.default.useRef(!0);return d.default.useEffect((()=>()=>{e.current=!1}),[]),e},cw=e=>{const t=lw(),[n,r]=d.default.useState(e.getValue());d.default.useEffect((()=>{const n=e.watch((e=>{(e=>e&&e.current)(t)&&r(e)}));return()=>{n.dispose()}}),[r]);const o=n,i=zs.isValidValue(o);return[o,d.default.useCallback((t=>e.setValue(t)),[e]),i]},uw=e=>{const t=d.default.useMemo((()=>new Ks(e)),[]),[n,r,o]=cw(t);return d.default.useEffect((()=>()=>{t.dispose()}),[t]),[n,r,t,o]},dw=Symbol("IKeyBindingService"),fw=In.defineToken("IKeyBindingContribution"),hw=Symbol("IKeyBindingOptionProvider");var pw=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},gw=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},vw=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};let yw=class{constructor(){this.toDispose=new Ir,this.keyBindingMap=new Map,this.enabledKeyBindingMap=new Map,this.registerExternalKeybindings=()=>vw(this,void 0,void 0,(function*(){const{registerKeybindingFunc:e}=yield this.optionProvider.getOption();return e(this)})),this.registerKeybinding=(e=[])=>{const t=new Ir;return e.forEach((e=>{this.keyBindingMap.set(e.id,e),this.enableKeyBindings(e.id).then((n=>{t.push(jr.create((()=>{n.dispose(),this.keyBindingMap.delete(e.id)})))}))})),this.toDispose.push(t),t},this.enableKeyBindings=e=>vw(this,void 0,void 0,(function*(){this.disableKeyBindings([e]);const t=this.keyBindingMap.get(e),n=yield this.getX6Graph(),r=this.runCommand(t);n.bindKey(t.keybinding,r);const o=jr.create((()=>{n.unbindKey(t.keybinding),this.enabledKeyBindingMap.delete(t.id)}));return this.enabledKeyBindingMap.set(t.id,o),o})),this.disableKeyBindings=e=>{e.forEach((e=>{const t=this.enabledKeyBindingMap.get(e);t&&t.dispose()}))},this.runCommand=e=>t=>vw(this,void 0,void 0,(function*(){yield e.callback(e,this.modelService,this.commandService,t)})),this.getX6Graph=()=>vw(this,void 0,void 0,(function*(){return yield this.graphProvider.getGraphInstance()}))}onStart(){const e=this.contributionProvider.getContributions();for(const t of e)t.registerKeybinding(this);this.registerExternalKeybindings()}onStop(){this.toDispose.dispose()}};var mw;pw([nr(hw),gw("design:type",Object)],yw.prototype,"optionProvider",void 0),pw([nr(Xs),gw("design:type",Object)],yw.prototype,"commandService",void 0),pw([nr(sl),gw("design:type",Object)],yw.prototype,"modelService",void 0),pw([vr(fw),gw("design:type",Object)],yw.prototype,"contributionProvider",void 0),pw([nr(ql),gw("design:type",Object)],yw.prototype,"graphProvider",void 0),yw=pw([tr({contrib:[qs,dw]})],yw),function(e){e.CONFIG_TYPE="CONTEXT_CONFIG"}(mw||(mw={}));const bw=new class{constructor(){this.map=new Map([["default",Ii],["QuestionCircleOutlined",Ii]]),this.map.set("default",Ii),this.map.set("QuestionCircleOutlined",Ii)}get(e){return this.map.get(e)}set(e,t){this.map.set(e,t)}has(e){return this.map.has(e)}};let ww=class{constructor(){this.toDispose=new Ir,this.registerHookHub=()=>w(this,void 0,void 0,(function*(){return jr.create((()=>{}))})),this.registerHook=e=>w(this,void 0,void 0,(function*(){const t=new Ir,n=[e.graphOptions.registerHook({name:"add snapline options",handler:e=>w(this,void 0,void 0,(function*(){e.snapline={enabled:!0,className:"xflow-snapline",clean:5e3}}))})];return t.pushAll(n),jr.create((()=>{}))}))}};ww=m([tr({contrib:wl})],ww);const xw=()=>pr((e=>{e(ww)})),_w="#faad14";var Ew,Ow;!function(e){e.MOUSE_ENTER="node-port:mouseenter",e.MOUSE_LEAVE="node-port:mouseleave"}(Ew||(Ew={})),function(e){e.id="ACTIVE_NODE_PORT",e.useModel=t=>w(this,void 0,void 0,(function*(){const n=yield t.awaitModel(e.id);return{data:yield n.getValidValue(),model:n}}))}(Ow||(Ow={}));let Sw=class{constructor(){this.toDispose=new Ir,this.getGraphInstance=()=>w(this,void 0,void 0,(function*(){return{graph:yield this.graphProvider.getGraphInstance(),config:yield this.graphProvider.getGraphOptions()}})),this.getPortRenderConfig=()=>{const e={onPortRendered(e){var t,n;const r=this,{port:o,node:i}=e,{contentSelectors:a}=e,s=a&&a["xflow-port-group"];s instanceof Element&&(s.setAttribute("class",_r("xflow-port-group",{connected:o.connected&&"out"!==o.group,groupPort:(null===(t=i)||void 0===t?void 0:t.isGroup)&&(null===(n=i)||void 0===n?void 0:n.isGroup())})),s.addEventListener("mouseenter",(e=>{const t={e:e,portId:o.id,nodeId:i.id,portData:o,nodeData:i.getData(),tooltip:o.tooltip,placement:o.group};r.trigger(Ew.MOUSE_ENTER,t)})),s.addEventListener("mouseleave",(e=>{const t={e:e,portId:o.id,nodeId:i.id,portData:o,nodeData:i.getData(),tooltip:o.tooltip,placement:o.group};r.trigger(Ew.MOUSE_LEAVE,t)})))}};return e},this.registerHookHub=()=>w(this,void 0,void 0,(function*(){return jr.create((()=>{}))})),this.registerHook=e=>w(this,void 0,void 0,(function*(){const t=new Ir,n=[e.graphOptions.registerHook({name:"add onPortRendered options ",handler:e=>w(this,void 0,void 0,(function*(){Object.assign(e,this.getPortRenderConfig())}))})];return t.pushAll(n),jr.create((()=>{}))}))}registerModel(e){e.registerModel({id:Ow.id,watchChange:e=>w(this,void 0,void 0,(function*(){const{graph:t,config:n}=yield this.getGraphInstance(),r=e=>{const{x:t,y:r,width:o,height:i}=e.target.getBoundingClientRect(),a=n.rootContainer.getBoundingClientRect();return{x:t-((null==a?void 0:a.x)||0)+o/2,y:r-((null==a?void 0:a.y)||0)+i/2}},o=t=>{e.setValue(Object.assign(Object.assign({},t),{position:r(t.e)}))},i=()=>{e.setValue(null)};return t.on(Ew.MOUSE_ENTER,o),t.on(Ew.MOUSE_LEAVE,i),t.on("cell:mouseleave",i),jr.create((()=>{t.off(Ew.MOUSE_ENTER,o),t.off(Ew.MOUSE_LEAVE,i)}))}))})}};m([nr(ql),b("design:type",Object)],Sw.prototype,"graphProvider",void 0),Sw=m([tr({contrib:[wl,ll]})],Sw);const Cw=()=>pr((e=>{e(Sw)})),kw=e=>{const t=Wi(),[n,,r]=uw(null);d.default.useEffect((()=>{if(!t)return;const e=w(void 0,void 0,void 0,(function*(){const{model:e}=yield Ow.useModel(t.modelService);return e.watch((e=>{r.setValue(e)}))}));return()=>{e.then((e=>{e.dispose()}))}}),[r,t]);const o=!!(n&&n.position&&n.position.x);if(!o)return null;const i=e.getTooltip?e.getTooltip(n):n.tooltip;return d.default.createElement(s.Tooltip,{visible:o,title:i,placement:n.placement||"top"},d.default.createElement("span",{className:"canvas-node-port-tooltip",style:{position:"absolute",left:n.position.x,top:n.position.y}}))};var Pw,Mw;!function(e){e.CONFIG_TYPE="ContextMenuConfig"}(Pw||(Pw={}));class Tw{constructor(e){this.CONFIG_TYPE=Pw.CONFIG_TYPE,this.setMenuModelService=e=>{this.menuModelService=e},this.setCustomMenuRender=e=>{this.menuCustomRender=e},this.getConfig=()=>w(this,void 0,void 0,(function*(){return{CONFIG_TYPE:this.CONFIG_TYPE,menuCustomRender:this.menuCustomRender,menuModelService:this.menuModelService}})),this.moduleId=e||Vr()}dispose(){}}!function(e){e.id="CONTEXT_MENU_MODEL",e.useValue=ac(e.id),e.getModel=ic(e.id)}(Mw||(Mw={}));const{inject:Aw,singleton:Nw}=mr;let Rw=class{constructor(){this.toDispose=new Ir,this.getMenuModelValue=e=>w(this,void 0,void 0,(function*(){const t=yield this.menuConfig.getConfig(),{anchor:n,type:r,cell:o}=e,i=new Ir;this.toDispose.push(i);const a=o?o.getData():null,s=new Ks({id:"menuroot",type:rw.Root,submenu:[]});i.push(jr.create((()=>{s.dispose()})));const l={toDispose:i,anchor:n,target:{data:a,type:r},customRender:null,menuModel:s};return t.menuCustomRender&&(l.customRender=yield t.menuCustomRender(e,this.modelService)),t.menuModelService&&(yield t.menuModelService(e,l.menuModel,this.modelService,i)),l}))}registerModel(e){const t=[e.registerModel({id:Mw.id,getInitialValue:()=>null,watchChange:(e,t)=>w(this,void 0,void 0,(function*(){return(yield bc.getModel(t)).watch((t=>w(this,void 0,void 0,(function*(){const n=yield this.getMenuModelValue(t);e.setValue(n)}))))}))})];this.toDispose.pushAll(t)}};m([Aw(Tw),b("design:type",Tw)],Rw.prototype,"menuConfig",void 0),m([Aw(sl),b("design:type",Object)],Rw.prototype,"modelService",void 0),Rw=m([Nw({contrib:[ll]})],Rw);const jw=e=>pr((t=>{t(Rw),t(Tw,{useValue:e})})),Dw=e=>{const{idx:t,menuOptions:n,target:r,modelService:o,commandService:i,onHide:a}=e,{id:s,label:c,isEnabled:u=!0,isVisible:f=!0,iconName:h,submenu:p=[],active:g,hotkey:v,render:y,onClick:m}=n;if(!f)return null;if("separator"===n.type)return d.default.createElement(l.Menu.Divider,{key:String(n.id)+t});if("root"===n.type)return d.default.createElement(l.Menu,{hasIcon:!0},p.map(((e,t)=>Dw({idx:t,target:r,commandService:i,modelService:o,menuOptions:e,onHide:a}))));if(n.submenu&&Array.isArray(n.submenu)){const e=bw.get(h),t=!u;return d.default.createElement(l.Menu.SubMenu,{key:String(s),text:c,disabled:t||0===p.length,icon:e?d.default.createElement(e,null):null,active:g,hotkey:v},p.map(((e,t)=>Dw({idx:t,target:r,commandService:i,modelService:o,menuOptions:e,onHide:a}))))}const b=bw.get(h);return y?d.default.createElement(y,{menuItem:n,target:r,commandService:i,modelService:o,onHide:a},[d.default.createElement(l.Menu.Item,{key:String(s),text:c,disabled:!u,icon:b?d.default.createElement(b,null):null,active:g,hotkey:v})]):d.default.createElement(l.Menu.Item,{key:String(s),text:c,disabled:!u,icon:b?d.default.createElement(b,null):null,active:g,hotkey:v,onClick:()=>w(void 0,void 0,void 0,(function*(){yield m({menuItem:n,target:r,commandService:i,modelService:o}),a&&a()}))})},Iw=e=>{const{menuModel:t,target:n,onHide:r}=e,{modelService:o,commandService:i}=Wi(),[a]=cw(t);return Dw({idx:-1,target:n,commandService:i,modelService:o,menuOptions:a,onHide:r})},Fw=({toDispose:e})=>(d.default.useEffect((()=>()=>{e.dispose()}),[e]),null),Gw=()=>{const e=d.default.useRef(),t=Wi(),[n,,r]=(e=>{const{getModel:t,initialState:n}=e,r=lw(),o=d.default.useRef(),[i,a]=d.default.useState(n);return d.default.useEffect((()=>{let e;return t().then((t=>sw(void 0,void 0,void 0,(function*(){o.current=t;const n=yield t.getValidValue();r.current&&(a(n),e=t.watch((e=>{r.current&&a(e)})))})))),()=>{e&&e.dispose&&e.dispose()}}),[]),[i,a,o.current]})({getModel:()=>w(void 0,void 0,void 0,(function*(){return yield Mw.getModel(t.modelService)})),initialState:{anchor:null,menuModel:null,target:null,customRender:null,toDispose:null}}),{target:o,anchor:i,menuModel:a,customRender:s,toDispose:c}=n;if(!o||!i||!a)return null;const u=()=>{r.setValue({anchor:null,menuModel:null,target:null,customRender:null,toDispose:null})},f=s?d.default.createElement(s,{target:o,modelService:t.modelService,onHide:u}):d.default.createElement(Iw,{target:o,menuModel:a,onHide:u});return d.default.createElement("div",{className:"xflow-menu-mask",ref:e,onClick:u,onContextMenu:e=>{e.preventDefault(),e.stopPropagation()}},d.default.createElement(Fw,{toDispose:c}),d.default.createElement(l.Dropdown,{visible:!0,getPopupContainer:()=>e.current,overlay:f},d.default.createElement("div",{className:"xflow-context-menu-anchor",style:{top:i.y,left:i.x}})))},Lw="CanvasToolbar";class Hw{constructor(){this.CONFIG_TYPE=Lw,this.setToolbarName=e=>{this.moduleId="CanvasToolbar__"+e},this.setToolbarModelService=e=>{this.toolbarModelService=e},this.setCustomToolbarRender=e=>{this.customRenderService=e},this.getConfig=()=>({CONFIG_TYPE:this.CONFIG_TYPE,toolbarCustomRender:this.customRenderService,toolbarModelService:this.toolbarModelService}),this.moduleId="CanvasToolbar__"+Vr()}dispose(){}}const Bw=e=>{const t=Wi(),{item:n,layout:r}=e,o=_r({"xflow-toolbar-item":!0}),i="vertical"===r?"":n.text;let a;if(n.icon)a=n.icon;else if(n.iconName){const e=bw.get(n.iconName);a=d.default.createElement(e,null)}const s=n.render,{isEnabled:c=!0}=n,{commandService:u,modelService:f}=t,h=()=>{n.onClick&&n.onClick({toolbarItem:n,commandService:u,modelService:f})};return s?d.default.createElement(s,Object.assign({},n,{onClick:h}),d.default.createElement(l.Toolbar.Item,Object.assign({},n,{icon:a,text:i,className:o,disabled:!c,tooltip:n.tooltip||n.text,tooltipProps:Object.assign({placement:"vertical"===r?"left":"bottom"},n.tooltipProps),onClick:()=>{}}))):d.default.createElement(l.Toolbar.Item,Object.assign({},n,{icon:a,text:i,className:o,hidden:!n,disabled:!c,tooltip:n.tooltip||n.text,onClick:h,tooltipProps:Object.assign(Object.assign({},n.tooltipProps),{placement:"vertical"===r?"left":"bottom"})}))},Uw=e=>{const{group:t,layout:n}=e,r=d.default.useMemo((()=>t.name||Vr()),[t.name]),{items:o=[]}=t;if(0===o.length)return null;const i=_r({"xflow-toolbar-group":!0});return d.default.createElement(l.Toolbar.Group,{className:i,key:r},o.map((e=>d.default.createElement(Bw,{item:e,layout:n,key:e.id}))))},Vw=e=>{const{idx:t,groups:n,layout:r,toolbarOptions:o}=e,{hoverEffect:i=!0}=o;return d.default.createElement(l.Toolbar,{hoverEffect:i},n.map(((e,n)=>{const o=t+n;return d.default.createElement(Uw,{key:o,group:e,layout:r})})))},zw=d.default.memo((e=>{const{isModelReady:t,state:n}=(e=>{const{config:t}=e,n=t.moduleId,r=Wi(),[o,i,a,s]=uw({name:n,layout:e.layout,mainGroups:[],extraGroups:[],customRender:null});return d.default.useEffect((()=>{const e=new Ir;if(!r.modelService.findDeferredModel(n)){const{toolbarCustomRender:o,toolbarModelService:i}=t.getConfig(),s=r.modelService.registerModel({id:n,modelFactory:()=>a,watchChange:t=>w(void 0,void 0,void 0,(function*(){if(i&&(yield i(t,r.modelService,e)),o){const e=e=>{t.setValue((t=>t.customRender=e))};yield o(r.modelService,e)}return e}))});e.push(s)}return()=>{e.dispose()}}),[]),{isModelReady:s,state:o,setState:i,toolbarModel:a}})(e),r=Yc(e.position),{mainGroups:o=[],extraGroups:i=[],layout:a,customRender:l}=n,c=_r(e.className,a,"xflow-toolbar"),u=_r({[a]:!0,"xflow-toolbar-root":!0});return t?l?d.default.createElement("div",{className:c,style:Object.assign(Object.assign({},r),e.style)},d.default.createElement(l,{config:n})):d.default.createElement("div",{className:c,style:Object.assign(Object.assign({},r),e.style)},d.default.createElement("div",{className:u},o.length>0&&d.default.createElement(Vw,{idx:"mainGroups",groups:o,layout:a,toolbarOptions:n}),i.length>0&&d.default.createElement(Vw,{idx:"extraGroups",groups:i,layout:a,toolbarOptions:n}))):d.default.createElement("div",{className:c,style:Object.assign(Object.assign({},r),e.style)},d.default.createElement(s.Spin,{spinning:!0,size:"small"}))})),Yw=e=>{const t=!!Wi(),n=d.default.useMemo((()=>e.config?e.config:new Hw),[e.config]);return t?d.default.createElement(zw,Object.assign({},e,{config:n})):null},$w=e=>t=>{const n=d.default.useMemo((()=>({getValue:()=>({})})),[]);n.getValue=()=>t;const r=d.default.useMemo((()=>{const t=new Hw;return e(t,n),t}),[n]);return r};var Ww;e.CANVAS_SCALE_TOOLBAR_CONFIG=void 0,Ww=e.CANVAS_SCALE_TOOLBAR_CONFIG||(e.CANVAS_SCALE_TOOLBAR_CONFIG={}),bw.set("ZoomInOutlined",Ui),bw.set("ZoomOutOutlined",Yi),bw.set("OneToOneOutlined",Ti),bw.set("CompressOutlined",ri),Ww.ZOOM_IN=Xi.GRAPH_ZOOM.id+"-zoom-in",Ww.ZOOM_OUT=Xi.GRAPH_ZOOM.id+"-zoom-out",Ww.SCALE_TO_ONE=Xi.GRAPH_ZOOM.id+"-scale-to-one",Ww.SCALE_TO_FIT=Xi.GRAPH_ZOOM.id+"-scale-to-fit",Ww.MAX_SCALE=1.5,Ww.MIN_SCALE=.05,Ww.zoomOptions={maxScale:Ww.MAX_SCALE,minScale:Ww.MIN_SCALE},Ww.getToolbarConfig=e=>[{name:"main",items:[{id:Ww.ZOOM_IN,tooltip:"放大",iconName:"ZoomInOutlined",onClick:({commandService:e})=>{e.executeCommand(Xi.GRAPH_ZOOM.id,{factor:.1,zoomOptions:Ww.zoomOptions})}},{id:Ww.ZOOM_OUT,tooltip:"缩小",iconName:"ZoomOutOutlined",onClick:({commandService:e})=>{e.executeCommand(Xi.GRAPH_ZOOM.id,{factor:-.1,zoomOptions:Ww.zoomOptions})}},{id:Ww.SCALE_TO_ONE,iconName:"OneToOneOutlined",tooltip:"缩放到1:1",isEnabled:1!==e,onClick:({commandService:e})=>{e.executeCommand(Xi.GRAPH_ZOOM.id,{factor:"real",zoomOptions:Ww.zoomOptions})}},{id:Ww.SCALE_TO_FIT,tooltip:"缩放到适应屏幕",iconName:"CompressOutlined",onClick:({commandService:e})=>{e.executeCommand(Xi.GRAPH_ZOOM.id,{factor:"fit",zoomOptions:Ww.zoomOptions})}}]}];const Kw=$w((t=>{t.setToolbarModelService(((t,n)=>w(void 0,void 0,void 0,(function*(){const r=yield xc.useValue(n);t.setValue((t=>{t.mainGroups=e.CANVAS_SCALE_TOOLBAR_CONFIG.getToolbarConfig(r.zoomFactor)}));(yield xc.getModel(n)).watch((({zoomFactor:n})=>{t.setValue((t=>{t.mainGroups=e.CANVAS_SCALE_TOOLBAR_CONFIG.getToolbarConfig(n)}))}))}))))}));const qw=Symbol("IMinimapConfigProvider");let Xw=class{constructor(){this.toDispose=new Ir,this.registerHookHub=()=>w(this,void 0,void 0,(function*(){return jr.create((()=>{}))})),this.registerHook=e=>w(this,void 0,void 0,(function*(){const t=new Ir,n=[e.graphOptions.registerHook({name:"add minimap options",handler:e=>w(this,void 0,void 0,(function*(){const t=yield this.minimapConfig.getConfig();e.minimap=Object.assign({},t)}))})];return t.pushAll(n),jr.create((()=>{}))}))}};m([nr(qw),b("design:type",Object)],Xw.prototype,"minimapConfig",void 0),Xw=m([tr({contrib:wl})],Xw);const Zw=e=>pr((t=>{t(qw,{useDynamic:()=>e}),t(Xw)}));class Jw extends n.NodeView{renderMarkup(){return this.renderJSONMarkup({tagName:"rect",selector:"body"})}update(){super.update({body:{refWidth:"100%",refHeight:"100%",fill:Jw.nodeFillColor}})}}Jw.nodeFillColor="#31d0c6",Jw.setNodeFillColor=e=>{Jw.nodeFillColor=e};class Qw{constructor(){this.getValue=()=>({})}dispose(){this.getValue=()=>null}}const ex=d.default.createContext({propsProxy:null,commandService:null,modelService:null}),tx=()=>d.default.useContext(ex),nx=e=>{const{className:t,position:n,style:r,children:o}=e,i=Wi(),a=Yc(n),s=d.default.useMemo((()=>new Qw),[]);if(d.default.useEffect((()=>()=>{s.dispose()}),[s]),!i||!i.modelService)return null;s.getValue=()=>e;const l=_r({[t]:!!t,"xflow-workspace-panel":!0}),{commandService:c,modelService:u}=i;return d.default.createElement(ex.Provider,{value:{propsProxy:s,commandService:c,modelService:u}},d.default.createElement("div",{className:l,style:Object.assign(Object.assign({},a),r)},o))},rx="xflow-node-horizontal-edge",ox="xflow-node-vertical-edge",ix="xflow-group-vertical-edge",ax="xflow-edge",sx="XFLOW_NODE_SHAPE",lx="processing";var cx;let ux;e.GRAPH_STATUS_INFO=void 0,(cx=e.GRAPH_STATUS_INFO||(e.GRAPH_STATUS_INFO={})).id="GRAPH_STATUS_INFO",function(e){e.SUCCESS="success",e.PROCESSING="processing",e.ERROR="error",e.DEFAULT="default",e.WARNING="warning"}(cx.StatusEnum||(cx.StatusEnum={})),cx.getModel=ic(cx.id),cx.useValue=ac(cx.id),e.XFlowDagCommands=void 0,(e.XFlowDagCommands||(e.XFlowDagCommands={})).QUERY_GRAPH_STATUS={id:"xflow:query-graph-status",label:"查询画布节点状态"};const{AnchorGroup:dx}=yr;ux=n.Node.registry.exist(sx)?n.Node.registry.get(sx):o.ReactShape.define({width:160,height:32,shape:sx,view:Gr,ports:{groups:{top:{zIndex:2,position:{name:dx.TOP}},bottom:{zIndex:2,position:{name:dx.BOTTOM}},right:{zIndex:2,position:{name:dx.RIGHT}},left:{zIndex:2,position:{name:dx.LEFT}}}},attrs:{body:{magnet:!1,fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%",zIndex:1}},portMarkup:[{tagName:"g",selector:"xflow-port-group",className:"xflow-port-group",attrs:{width:8,height:8,x:-4,y:-4,zIndex:10,magnet:"true"},children:[{tagName:"circle",selector:"xflow-port",className:"xflow-port",attrs:{r:4,fill:"#fff",stroke:"#d9d9d9",zIndex:12}},{tagName:"polygon",selector:"xflow-port-arrow",className:"xflow-port-arrow",attrs:{points:"0,0 8,0 4,4 ",fill:"#d9d9d9",stroke:"#d9d9d9",zIndex:13,transform:"translate(-4,0)"}}]}]});const{DirectoryTree:fx,TreeNode:hx}=s.Tree,px=({expanded:e})=>e?d.default.createElement(xi,null):d.default.createElement(mi,null),gx=e=>new ux(e),vx=e=>{const{nodeConfig:t,onMouseDown:n,graphConfig:r,modelService:o,commandService:i}=e;if(!r)return d.default.createElement("div",null);if(t.renderComponent)return d.default.createElement("div",{onMouseDown:n},d.default.createElement(t.renderComponent,{data:t,isNodeTreePanel:!0}));const a=r.nodeTypeParser(t)||Lr,s=r.nodeRender.get(a);return d.default.createElement("div",{onMouseDown:n},d.default.createElement(s,{commandService:i,modelService:o,data:t,isNodeTreePanel:!0}))},yx=e=>{const[t,n]=d.default.useState(!1),{prefixClz:r,graphConfig:o,commandService:i,modelService:a,popoverContent:l,onMouseDown:c,item:u}=e;return d.default.createElement(d.default.Fragment,null,l&&d.default.createElement(s.Popover,{placement:"right",destroyTooltipOnHide:!0,content:l,visible:t,onVisibleChange:e=>{n(e)}},d.default.createElement("div",{className:`${r}-node-wrapper`,onMouseEnter:()=>{n(!0)}},vx({graphConfig:o,commandService:i,onMouseDown:c,modelService:a,nodeConfig:u}))),!l&&d.default.createElement("div",{className:`${r}-node-wrapper`,onMouseEnter:()=>{n(!0)}},vx({graphConfig:o,commandService:i,onMouseDown:c,modelService:a,nodeConfig:u})))},mx=e=>{const{x6NodeFactory:t,dndOptions:r,onNodeDrop:o,state:i,onFolderExpand:a,prefixClz:l}=e,{graphProvider:c,modelService:u,commandService:f}=Wi(),[h,p]=d.default.useState(),[g,v]=d.default.useState(),[y,m]=d.default.useState();c.getGraphInstance().then((e=>{m(e)})),d.default.useEffect((()=>{if(c.getGraphOptions().then((e=>{p(e)})),!y)return;const e=new n.Addon.Dnd(Object.assign(Object.assign({scaled:!1,animation:!1},r),{target:y,validateNode:e=>w(void 0,void 0,void 0,(function*(){const t=Object.assign(Object.assign({},e.getData()),e.getPosition());return o?yield o(t,f,u):console.error("onNodeDrop method is required in NodeTree Panel"),!1}))}));v(e)}),[f,r,y,c,u,o]);const b=d.default.useCallback((e=>n=>{if(!y||!g||!h)return;const r=h.nodeTypeParser(e),o=Yl(e.renderComponent?e.renderComponent:h.nodeRender.get(r),f,u),i={data:e,width:e.width||180,height:e.height||40,view:h.graphId,component:o},a=t?t(i):gx(i);g.start(a,n.nativeEvent)}),[f,g,y,h,u,t]),x=d.default.useCallback(((e=[])=>e.map((e=>{const{isDirectory:t,children:n,popoverContent:r}=e;return t?d.default.createElement(hx,{icon:px,key:e.id,title:e.label,className:`${l}-tree-folder`},x(n)):d.default.createElement(hx,{isLeaf:!0,key:e.id,className:`${l}-tree-leaf`,icon:d.default.createElement("span",null),title:d.default.createElement(yx,{item:e,onMouseDown:b(e),popoverContent:r,prefixClz:l,modelService:u,commandService:f,graphConfig:h})})}))),[f,h,u,b,l]);return d.default.createElement(d.default.Fragment,null,d.default.createElement("div",{className:`${l}-body`,style:e.style},!i.keyword&&d.default.createElement(fx,{showIcon:!0,selectable:!1,autoExpandParent:!1,onExpand:a,expandedKeys:i.expandedKeys,className:`${l}-tree`},x(i.treeData)),i.searchList.length>0&&d.default.createElement("ul",{className:`${l}-body-list`},i.searchList.map((e=>d.default.createElement("li",{className:`${l}-body-list-item`},d.default.createElement(yx,{item:e,onMouseDown:b(e),popoverContent:e.popoverContent,prefixClz:l,modelService:u,commandService:f,graphConfig:h}))))),i.keyword&&0===i.searchList.length&&d.default.createElement(s.Empty,{style:{marginTop:"48px"}})))},bx=e=>{const{prefixClz:t,onKeywordChange:n}=e,{propsProxy:r}=tx(),o=r.getValue();return d.default.createElement(d.default.Fragment,null,d.default.createElement("div",{className:`${t}-header`,style:e.style},o.header&&d.default.isValidElement(o.header)&&o.header,o.searchService&&d.default.createElement("div",{className:`${t}-header-search`},d.default.createElement(s.Input,{placeholder:"搜索组件",allowClear:!0,onChange:e=>n(e.target.value),style:{width:"100%",border:0}}))))},wx=e=>{const{prefixClz:t}=e,{propsProxy:n}=tx(),r=n.getValue();return d.default.createElement(d.default.Fragment,null,d.default.createElement("div",{className:`${t}-footer`,style:e.style},r.footer&&d.default.isValidElement(r.footer)&&r.footer))},xx="XFLOW_TREE_PANEL_ROOT_ID",_x=e=>{const t=e&&e.headerPosition&&e.headerPosition.height||40,n=e.footerPosition&&e.footerPosition.height||40;return{headerStyle:Yc(Object.assign({height:t,lineHeight:t,top:0,left:0,right:0},e.headerPosition)),bodyStyle:Yc(Object.assign({left:0,right:0,top:t,bottom:n},e.bodyPosition)),footerStyle:Yc(Object.assign({left:0,right:0,lineHeight:n,height:n,bottom:0},e.footerPosition))}};var Ex=tv,Ox=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Sx=function(e){return this.__data__.has(e)};function Cx(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Ex;++t<n;)this.add(e[t])}Cx.prototype.add=Cx.prototype.push=Ox,Cx.prototype.has=Sx;var kx=Cx;var Px=function(e,t){return e.has(t)},Mx=kx,Tx=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1},Ax=Px;var Nx=function(e,t,n,r,o,i){var a=1&n,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var c=i.get(e),u=i.get(t);if(c&&u)return c==t&&u==e;var d=-1,f=!0,h=2&n?new Mx:void 0;for(i.set(e,t),i.set(t,e);++d<s;){var p=e[d],g=t[d];if(r)var v=a?r(g,p,d,t,e,i):r(p,g,d,e,t,i);if(void 0!==v){if(v)continue;f=!1;break}if(h){if(!Tx(t,(function(e,t){if(!Ax(h,t)&&(p===e||o(p,e,n,r,i)))return h.push(t)}))){f=!1;break}}else if(p!==g&&!o(p,g,n,r,i)){f=!1;break}}return i.delete(e),i.delete(t),f};var Rx=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n};var jx=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n},Dx=Fm,Ix=Dp,Fx=Nx,Gx=Rx,Lx=jx,Hx=ip?ip.prototype:void 0,Bx=Hx?Hx.valueOf:void 0;var Ux=function(e,t,n,r,o,i,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new Dx(e),new Dx(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Ix(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=Gx;case"[object Set]":var l=1&r;if(s||(s=Lx),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;r|=2,a.set(e,t);var u=Fx(s(e),s(t),r,o,i,a);return a.delete(e),u;case"[object Symbol]":if(Bx)return Bx.call(e)==Bx.call(t)}return!1},Vx=lm,zx=Object.prototype.hasOwnProperty;var Yx=fv,$x=Nx,Wx=Ux,Kx=function(e,t,n,r,o,i){var a=1&n,s=Vx(e),l=s.length;if(l!=Vx(t).length&&!a)return!1;for(var c=l;c--;){var u=s[c];if(!(a?u in t:zx.call(t,u)))return!1}var d=i.get(e),f=i.get(t);if(d&&f)return d==t&&f==e;var h=!0;i.set(e,t),i.set(t,e);for(var p=a;++c<l;){var g=e[u=s[c]],v=t[u];if(r)var y=a?r(v,g,u,t,e,i):r(g,v,u,e,t,i);if(!(void 0===y?g===v||o(g,v,n,r,i):y)){h=!1;break}p||(p="constructor"==u)}if(h&&!p){var m=e.constructor,b=t.constructor;m==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof m&&m instanceof m&&"function"==typeof b&&b instanceof b||(h=!1)}return i.delete(e),i.delete(t),h},qx=jm,Xx=Dv,Zx=Iv.exports,Jx=Jv,Qx="[object Arguments]",e_="[object Array]",t_="[object Object]",n_=Object.prototype.hasOwnProperty;var r_=function(e,t,n,r,o,i){var a=Xx(e),s=Xx(t),l=a?e_:qx(e),c=s?e_:qx(t),u=(l=l==Qx?t_:l)==t_,d=(c=c==Qx?t_:c)==t_,f=l==c;if(f&&Zx(e)){if(!Zx(t))return!1;a=!0,u=!1}if(f&&!u)return i||(i=new Yx),a||Jx(e)?$x(e,t,n,r,o,i):Wx(e,t,l,n,r,o,i);if(!(1&n)){var h=u&&n_.call(e,"__wrapped__"),p=d&&n_.call(t,"__wrapped__");if(h||p){var g=h?e.value():e,v=p?t.value():t;return i||(i=new Yx),o(g,v,n,r,i)}}return!!f&&(i||(i=new Yx),Kx(e,t,n,r,o,i))},o_=yp;var i_=function e(t,n,r,o,i){return t===n||(null==t||null==n||!o_(t)&&!o_(n)?t!=t&&n!=n:r_(t,n,r,o,e,i))},a_=fv,s_=i_;var l_=Kh;var c_=function(e){return e==e&&!l_(e)},u_=c_,d_=wy;var f_=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}},h_=function(e,t,n,r){var o=n.length,i=o,a=!r;if(null==e)return!i;for(e=Object(e);o--;){var s=n[o];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++o<i;){var l=(s=n[o])[0],c=e[l],u=s[1];if(a&&s[2]){if(void 0===c&&!(l in e))return!1}else{var d=new a_;if(r)var f=r(c,u,l,e,t,d);if(!(void 0===f?s_(u,c,3,r,d):f))return!1}}return!0},p_=function(e){for(var t=d_(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,u_(o)]}return t},g_=f_;var v_=function(e){var t=p_(e);return 1==t.length&&t[0][2]?g_(t[0][0],t[0][1]):function(n){return n===e||h_(n,e,t)}},y_=Dv,m_=wp,b_=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,w_=/^\w*$/;var x_=function(e,t){if(y_(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!m_(e))||(w_.test(e)||!b_.test(e)||null!=t&&e in Object(t))},__=tv;function E_(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(E_.Cache||__),n}E_.Cache=__;var O_=E_;var S_=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,C_=/\\(\\)?/g,k_=function(e){var t=O_(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(S_,(function(e,n,r,o){t.push(r?o.replace(C_,"$1"):n||e)})),t}));var P_=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o},M_=P_,T_=Dv,A_=wp,N_=ip?ip.prototype:void 0,R_=N_?N_.toString:void 0;var j_=function e(t){if("string"==typeof t)return t;if(T_(t))return M_(t,e)+"";if(A_(t))return R_?R_.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n},D_=j_;var I_=Dv,F_=x_,G_=k_,L_=function(e){return null==e?"":D_(e)};var H_=function(e,t){return I_(e)?e:F_(e,t)?[e]:G_(L_(e))},B_=wp;var U_=function(e){if("string"==typeof e||B_(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t},V_=H_,z_=U_;var Y_=function(e,t){for(var n=0,r=(t=V_(t,e)).length;null!=e&&n<r;)e=e[z_(t[n++])];return n&&n==r?e:void 0},$_=Y_;var W_=function(e,t,n){var r=null==e?void 0:$_(e,t);return void 0===r?n:r};var K_=H_,q_=jv,X_=Dv,Z_=Lv,J_=Hv,Q_=U_;var eE=function(e,t){return null!=e&&t in Object(e)},tE=function(e,t,n){for(var r=-1,o=(t=K_(t,e)).length,i=!1;++r<o;){var a=Q_(t[r]);if(!(i=null!=e&&n(e,a)))break;e=e[a]}return i||++r!=o?i:!!(o=null==e?0:e.length)&&J_(o)&&Z_(a,o)&&(X_(e)||q_(e))};var nE=i_,rE=W_,oE=function(e,t){return null!=e&&tE(e,t,eE)},iE=x_,aE=c_,sE=f_,lE=U_;var cE=function(e){return e};var uE=Y_;var dE=function(e){return function(t){return null==t?void 0:t[e]}},fE=function(e){return function(t){return uE(t,e)}},hE=x_,pE=U_;var gE=v_,vE=function(e,t){return iE(e)&&aE(t)?sE(lE(e),t):function(n){var r=rE(n,e);return void 0===r&&r===t?oE(n,e):nE(t,r,3)}},yE=cE,mE=Dv,bE=function(e){return hE(e)?dE(pE(e)):fE(e)};var wE=function(e){return"function"==typeof e?e:null==e?yE:"object"==typeof e?mE(e)?vE(e[0],e[1]):gE(e):bE(e)};var xE=function(e,t,n,r){for(var o=e.length,i=n+(r?1:-1);r?i--:++i<o;)if(t(e[i],i,e))return i;return-1},_E=function(e){return e!=e},EE=function(e,t,n){for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1};var OE=function(e,t,n){return t==t?EE(e,t,n):xE(e,_E,n)};var SE=function(e,t){return!!(null==e?0:e.length)&&OE(e,t,0)>-1};var CE=function(e,t,n){for(var r=-1,o=null==e?0:e.length;++r<o;)if(n(t,e[r]))return!0;return!1};var kE=gm,PE=function(){},ME=kE&&1/jx(new kE([,-0]))[1]==1/0?function(e){return new kE(e)}:PE,TE=kx,AE=SE,NE=CE,RE=Px,jE=ME,DE=jx;var IE=wE,FE=function(e,t,n){var r=-1,o=AE,i=e.length,a=!0,s=[],l=s;if(n)a=!1,o=NE;else if(i>=200){var c=t?null:jE(e);if(c)return DE(c);a=!1,o=RE,l=new TE}else l=t?[]:s;e:for(;++r<i;){var u=e[r],d=t?t(u):u;if(u=n||0!==u?u:0,a&&d==d){for(var f=l.length;f--;)if(l[f]===d)continue e;t&&l.push(d),s.push(u)}else o(l,d,n)||(l!==s&&l.push(d),s.push(u))}return s};var GE=function(e,t){return e&&e.length?FE(e,IE(t)):[]};e.NsNodeTreePanelModel=void 0,function(e){e.id="TREE_PANEL_MODEL",e.useModel=t=>w(this,void 0,void 0,(function*(){return t.awaitModel(e.id)}))}(e.NsNodeTreePanelModel||(e.NsNodeTreePanelModel={}));const LE=t=>{const{treeDataService:n,searchService:r}=t,{modelService:o}=Wi(),[i,a,s]=uw({treeData:[],searchList:[],treeNodeList:[],expandedKeys:[],defaultExpandAll:!1,keyword:""});d.default.useEffect((()=>{o.findDeferredModel(e.NsNodeTreePanelModel.id)||o.registerModel({id:e.NsNodeTreePanelModel.id,modelFactory:()=>s,watchChange:e=>w(void 0,void 0,void 0,(function*(){const t=yield wc.getModel(o),r=t=>w(void 0,void 0,void 0,(function*(){const r=yield n(t,o),{treeData:i,rootNodes:a}=function(e=[]){const t=e=>{const t=GE(e,"id").reduce(((e,t)=>{const n=t.parentId||xx;e.has(n)||e.set(n,[]);return e.get(n).push(t),e}),new Map);return t},n=t(Kb(e));function r(e,t){return e.map((e=>{if(t.has(e.id)){const n=t.get(e.id);e.key=e.id,e.isDirectory=!0,e.children=r(n,t)||[]}else e.isLeaf=!0;return e}))}const o=n.get(xx)||[];return{treeData:r(o,n),rootNodes:o}}(r),s=yield e.getValidValue(),l=s.expandedKeys.length>0?s.expandedKeys:a.map((e=>e.id));return{listData:r,treeData:i,expandedKeys:l}})),i=t.watch((t=>w(void 0,void 0,void 0,(function*(){const n=yield r(t);e.setValue({treeNodeList:n.listData,treeData:n.treeData,expandedKeys:n.expandedKeys,defaultExpandAll:!1,keyword:"",searchList:[]})}))));return jr.create((()=>{i.dispose()}))}))})}),[]);const l=d.default.useCallback((e=>{a((t=>{t.expandedKeys=e}))}),[a]),c=d.default.useCallback((e=>w(void 0,void 0,void 0,(function*(){if(!r)return console.warn("searchService is not defined");if(e){const t=yield r(i.treeNodeList,e);a((n=>{n.keyword=e,n.searchList=t}))}else a((e=>{e.keyword="",e.searchList=[]}))}))),[r,i.treeNodeList]);return{state:i,setState:a,onKeywordChange:c,onFolderExpand:l}};var HE;!function(e){e.id="TREE_PANEL_DATA"}(HE||(HE={}));var BE=Object.freeze({__proto__:null,get NsTreePanelData(){return HE}});const UE=e=>{const{headerStyle:t,bodyStyle:n,footerStyle:r}=_x(e),{state:o,onFolderExpand:i,onKeywordChange:a}=LE(e);return d.default.createElement(d.default.Fragment,null,d.default.createElement(bx,Object.assign({},e,{state:o,style:t,onKeywordChange:a})),d.default.createElement(mx,Object.assign({},e,{state:o,style:n,onFolderExpand:i})),d.default.createElement(wx,Object.assign({},e,{state:o,style:r})))},VE=e=>{const{x6NodeFactory:t,dndOptions:r,onNodeDrop:o}=e,{graphProvider:i,modelService:a,commandService:s}=Wi(),[l,c]=d.default.useState(),[u,f]=d.default.useState(),[h,p]=d.default.useState();d.default.useEffect((()=>{i.getGraphInstance().then((e=>{p(e)})),i.getGraphOptions().then((e=>{c(e)}))}),[i,p,c]),d.default.useEffect((()=>{if(!h)return;const e=new n.Addon.Dnd(Object.assign(Object.assign({scaled:!1,animation:!1},r),{target:h,validateNode:e=>w(void 0,void 0,void 0,(function*(){const t=Object.assign(Object.assign({},e.getData()),e.getPosition());return o?yield o(t,s,a):console.error("onNodeDrop method is required in NodeTree Panel"),!1}))}));return f(e),()=>{e.dispose()}}),[s,a,r,h,o]);const g=d.default.useCallback((e=>n=>{if(!h||!u||!l)return;if(e.isDisabled)return;const r=l.nodeTypeParser(e),o=Yl(e.renderComponent?e.renderComponent:l.nodeRender.get(r),s,a),i={data:e,width:e.width||180,height:e.height||40,view:l.graphId,component:o},c=t?t(i):new ux(i);u.start(c,n.nativeEvent)}),[s,u,h,l,a,t]);return{graphConfig:l,onMouseDown:g,modelService:a,commandService:s}},zE=e=>{const{nodeConfig:t,onMouseDown:n,graphConfig:r,modelService:o,commandService:i}=e;if(!r)return d.default.createElement("div",null);if(t.renderComponent)return d.default.createElement("div",{onMouseDown:n},d.default.createElement(t.renderComponent,{data:t,isNodePanel:!0}));const a=r.nodeTypeParser(t)||Lr,s=r.nodeRender.get(a);return d.default.createElement("div",{onMouseDown:n},d.default.createElement(s,{commandService:i,modelService:o,data:t,isNodeTreePanel:!0}))},YE=e=>{const[t,n]=d.default.useState(!1),{prefixClz:r,graphConfig:o,commandService:i,modelService:a,popoverContent:l,onMouseDown:c,item:u}=e;return d.default.createElement(d.default.Fragment,null,l?d.default.createElement(s.Popover,{placement:"right",destroyTooltipOnHide:!0,content:l,visible:t,onVisibleChange:e=>{n(e)}},d.default.createElement("div",{className:`${r}-node-wrapper`,onMouseEnter:()=>{n(!0)}},zE({graphConfig:o,commandService:i,onMouseDown:c,modelService:a,nodeConfig:u}))):d.default.createElement("div",{className:`${r}-node-wrapper`},zE({graphConfig:o,commandService:i,onMouseDown:c,modelService:a,nodeConfig:u})))},$E=e=>{const{searchResult:t,prefixClz:n,onMouseDown:r,modelService:o,commandService:i,graphConfig:a}=e;return 0===t.length?d.default.createElement(s.Empty,{style:{marginTop:"24px"}}):d.default.createElement("ul",{className:"xflow-collapse-search-list"},t.map((e=>d.default.createElement("li",{className:"xflow-collapse-search-list-item "+(e.isDisabled?"disabled":""),key:e.id},d.default.createElement(YE,{item:e,onMouseDown:r(e),popoverContent:e.popoverContent,prefixClz:n,modelService:o,commandService:i,graphConfig:a})))))},WE=e=>{const{onActiveKeyChange:t,collapseData:n,prefixClz:r,onMouseDown:o,modelService:i,commandService:a,graphConfig:l}=e;return d.default.createElement("ul",{className:"xflow-collapse-list"},0===n.length&&d.default.createElement(s.Empty,{style:{marginTop:"24px"}}),n.map((e=>{const{children:n=[],isCollapsed:s,render:c}=e,u=s?"close":"open";return d.default.createElement("li",{className:`xflow-collapse-list-item ${u}`,key:e.id},(e=>{const{header:n,extra:r,icon:o,isCollapsed:i}=e;return d.default.createElement("div",{className:"xflow-collapse-header",onClick:n=>{n.preventDefault(),t(e.id)}},d.default.createElement("div",{className:"xflow-collapse-header-icon"},Il(o)?d.default.createElement(o,{isCollapsed:i}):d.default.createElement(Ko,{rotate:i?0:90,style:{fontSize:"12px"}})),d.default.createElement("div",{className:"xflow-collapse-header-label"},Il(n)?d.default.createElement(n,e):n),d.default.createElement("div",{className:"xflow-collapse-header-extra"},Il(r)?d.default.createElement(r,e):r))})(e),Il(c)?d.default.createElement(c,e):(e=>d.default.createElement("div",{className:"xflow-collapse-content"},e.map((e=>d.default.createElement("div",{className:"xflow-collapse-content-item "+(e.isDisabled?"disabled":""),key:e.id},d.default.createElement(YE,{item:e,onMouseDown:o(e),popoverContent:e.popoverContent,prefixClz:r,modelService:i,commandService:a,graphConfig:l}))))))(n))})))},KE=e=>{const{state:t,prefixClz:n,onActiveKeyChange:r}=e,{graphConfig:o,onMouseDown:i,modelService:a,commandService:s}=VE(e),{searchResult:l,collapseData:c,keyword:u}=t;return d.default.createElement("div",{className:`${n}-body`,style:e.style},0===u.length&&d.default.createElement(WE,{onActiveKeyChange:r,collapseData:c,onMouseDown:i,modelService:a,commandService:s,graphConfig:o,prefixClz:n}),u.length>0&&d.default.createElement($E,{searchResult:l,onMouseDown:i,modelService:a,commandService:s,graphConfig:o,prefixClz:n}))},qE=e=>{const{prefixClz:t,onKeywordChange:n,state:r}=e,{propsProxy:o}=tx(),i=o.getValue();return d.default.createElement(d.default.Fragment,null,d.default.createElement("div",{className:`${t}-header`,style:e.style},i.header&&d.default.isValidElement(i.header)&&i.header,i.searchService&&d.default.createElement("div",{className:`${t}-header-search`},d.default.createElement(s.Input,{placeholder:"搜索组件",allowClear:!0,onChange:e=>(e=>{const t=r.collapseData.reduce(((e,t)=>(t.children&&e.push(...t.children),e)),[]);n(e.target.value,t)})(e),style:{width:"100%",border:0}}))))},XE=e=>{const{prefixClz:t}=e,{propsProxy:n}=tx(),r=n.getValue();return d.default.createElement(d.default.Fragment,null,d.default.createElement("div",{className:`${t}-footer`,style:e.style},r.footer&&d.default.isValidElement(r.footer)&&r.footer))};e.NsCollapsePanelModel=void 0,function(e){e.id="COLLAPSE_PANEL_DATA",e.useModel=t=>w(this,void 0,void 0,(function*(){return t.awaitModel(e.id)}))}(e.NsCollapsePanelModel||(e.NsCollapsePanelModel={}));var ZE=Object.freeze({__proto__:null,get NsCollapsePanelModel(){return e.NsCollapsePanelModel}});const JE=t=>{const{nodeDataService:n,searchService:r}=t,{modelService:o}=Wi(),[i,a,s]=uw({keyword:"",collapseData:[],searchResult:[]});d.default.useEffect((()=>{o.findDeferredModel(e.NsCollapsePanelModel.id)||o.registerModel({id:e.NsCollapsePanelModel.id,modelFactory:()=>s,watchChange:e=>w(void 0,void 0,void 0,(function*(){const t=yield wc.getModel(o),r=t.watch((t=>w(void 0,void 0,void 0,(function*(){const{collapseData:r}=yield(e=>w(void 0,void 0,void 0,(function*(){return{collapseData:yield n(e,o)}})))(t);e.setValue((e=>{e.keyword="",e.collapseData=r,e.searchResult=[]}))}))));return jr.create((()=>{r.dispose()}))}))})}),[]);const l=d.default.useCallback((e=>{a((t=>{t.collapseData.forEach((t=>{t.id===e&&!1!==t.collapsible&&(t.isCollapsed=!t.isCollapsed)}))}))}),[a]),c=d.default.useCallback(((e,t)=>w(void 0,void 0,void 0,(function*(){if(!r)return console.warn("searchService is not defined");if(e){const n=yield r(t,e);a((t=>{t.keyword=e,t.searchResult=n}))}else a((e=>{e.keyword="",e.searchResult=[]}))}))),[r]);return{state:i,setState:a,onKeywordChange:c,onActiveKeyChange:l}},QE=e=>{const{headerStyle:t,bodyStyle:n,footerStyle:r}=(e=>{const t=e&&e.headerPosition&&e.headerPosition.height||40,n=e.footerPosition&&e.footerPosition.height||40;return{headerStyle:Yc(Object.assign({height:t,lineHeight:t,top:0,left:0,right:0},e.headerPosition)),bodyStyle:Yc(Object.assign({left:0,right:0,top:t,bottom:n},e.bodyPosition)),footerStyle:Yc(Object.assign({left:0,right:0,lineHeight:n,height:n,bottom:0},e.footerPosition))}})(e),{state:o,onActiveKeyChange:i,onKeywordChange:a}=JE(e);return d.default.createElement(d.default.Fragment,null,d.default.createElement(qE,Object.assign({},e,{state:o,style:t,onKeywordChange:a})),d.default.createElement(KE,Object.assign({},e,{state:o,style:n,onActiveKeyChange:i})),d.default.createElement(XE,Object.assign({},e,{state:o,style:r})))},eO=e=>{const{state:t}=e,{propsProxy:n}=tx(),r=n.getValue(),o=Wi(),i=r.footer&&"function"==typeof r.footer;return d.default.createElement(d.default.Fragment,null,d.default.createElement("div",{className:`${e.prefixClz}-footer`,style:e.style},i&&d.default.createElement(r.footer,Object.assign(Object.assign({},e),{headerStyle:{},bodyStyle:{},footerStyle:e.style,targetData:t.targetData,targetType:t.targetType,modelService:o.modelService,commandService:o.commandService})),!r.footer&&d.default.createElement("div",{className:`${e.prefixClz}-footer-title`},r.footerText)))},tO=e=>{const{prefixClz:t,hasSchema:n,state:r}=e,{propsProxy:o}=tx(),i=o.getValue(),a=Wi();if(n)return null;const s=i.header&&"function"==typeof i.header;return d.default.createElement(d.default.Fragment,null,d.default.createElement("div",{className:`${t}-header`,style:e.style},s&&d.default.createElement(i.header,Object.assign(Object.assign({},e),{headerStyle:e.style,bodyStyle:{},footerStyle:{},targetData:r.targetData,targetType:r.targetType,modelService:a.modelService,commandService:a.commandService})),!i.header&&d.default.createElement("div",{className:`${t}-header-title`},i.headerText||"Panel")))},nO=e=>{const{text:t}=e,n=y(e,["text"]);return t?d.default.createElement(s.Tooltip,Object.assign({placement:"left",title:t},n),d.default.createElement("div",{className:"text-truncate"},t)):null};function rO(e){if(e)return d.default.createElement(nO,{text:e})}const oO=e=>{const{schema:n,children:r}=e,[o,i]=t.useState(),{dependencies:a,value:l,defaultValue:c,hidden:u,disabled:f}=n,h=t.useMemo((()=>(null==a?void 0:a.length)?function(e,t){return(n,r)=>e.some((e=>"function"==typeof(null==e?void 0:e.condition)))?("function"==typeof t&&t(void 0),!0):e.some((e=>{const{name:o}=e;return o?!(W_(n,o)===W_(r,o)||("function"==typeof t&&t(o),0)):(console.error("[Schema form]: A dependent name must be provided in the updater when the dependency condition is not a function."),!1)}))}(a,i):void 0),[a]);if("function"!=typeof r)throw new Error("[Schema Form]: chilren of FormItemWrapper should be a render prop.");const p=""===(g=l)||void 0===g?c:l;var g;return h?d.default.createElement(s.Form.Item,{noStyle:!0,shouldUpdate:h},(e=>{const{hidden:t,disabled:i}=function(e,t,n){const{getFieldValue:r,getFieldsValue:o}=e,{dependencies:i,hidden:a,disabled:s}=t;let l=a,c=s;return null==i||i.forEach((e=>{const{name:t,condition:i,hidden:a,disabled:s}=e;if("function"!=typeof i&&n&&t!==n)return;let u=!1;if("function"==typeof i)u=!!i(o());else{if(!t)return void console.error("[Schema form]: A dependent name must be provided in the props genarator when the dependency condition is not a function.");u=r(t)===i}u&&(void 0!==a&&(l=a),void 0!==s&&(c=s))})),{hidden:l,disabled:c}}(e,n,o);return r({hidden:t,disabled:i,initialValue:p})})):r({hidden:u,disabled:f,initialValue:p})},iO=e=>{const{controlSchema:t}=e,{required:n,tooltip:r,extra:o,name:i,label:a,placeholder:l,rules:c}=t;return d.default.createElement(oO,{schema:t},(({disabled:e,hidden:t,initialValue:u})=>d.default.createElement(s.Form.Item,{name:i,label:a,initialValue:u,tooltip:r,extra:rO(o),required:n,hidden:t,rules:c},d.default.createElement(s.Input,{className:"xflow-form-input",allowClear:!0,placeholder:l,disabled:e}))))};var aO={exports:{}};!function(e,t){e.exports=function(){var t,n;function r(){return t.apply(null,arguments)}function o(e){t=e}function i(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function a(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function l(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(s(e,t))return!1;return!0}function c(e){return void 0===e}function u(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function d(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function f(e,t){var n,r=[];for(n=0;n<e.length;++n)r.push(t(e[n],n));return r}function h(e,t){for(var n in t)s(t,n)&&(e[n]=t[n]);return s(t,"toString")&&(e.toString=t.toString),s(t,"valueOf")&&(e.valueOf=t.valueOf),e}function p(e,t,n,r){return Kn(e,t,n,r,!0).utc()}function g(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function v(e){return null==e._pf&&(e._pf=g()),e._pf}function y(e){if(null==e._isValid){var t=v(e),r=n.call(t.parsedDateParts,(function(e){return null!=e})),o=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&r);if(e._strict&&(o=o&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return o;e._isValid=o}return e._isValid}function m(e){var t=p(NaN);return null!=e?h(v(t),e):v(t).userInvalidated=!0,t}n=Array.prototype.some?Array.prototype.some:function(e){var t,n=Object(this),r=n.length>>>0;for(t=0;t<r;t++)if(t in n&&e.call(this,n[t],t,n))return!0;return!1};var b=r.momentProperties=[],w=!1;function x(e,t){var n,r,o;if(c(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),c(t._i)||(e._i=t._i),c(t._f)||(e._f=t._f),c(t._l)||(e._l=t._l),c(t._strict)||(e._strict=t._strict),c(t._tzm)||(e._tzm=t._tzm),c(t._isUTC)||(e._isUTC=t._isUTC),c(t._offset)||(e._offset=t._offset),c(t._pf)||(e._pf=v(t)),c(t._locale)||(e._locale=t._locale),b.length>0)for(n=0;n<b.length;n++)c(o=t[r=b[n]])||(e[r]=o);return e}function _(e){x(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===w&&(w=!0,r.updateOffset(this),w=!1)}function O(e){return e instanceof _||null!=e&&null!=e._isAMomentObject}function S(e){!1===r.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function C(e,t){var n=!0;return h((function(){if(null!=r.deprecationHandler&&r.deprecationHandler(null,e),n){var o,i,a,l=[];for(i=0;i<arguments.length;i++){if(o="","object"==typeof arguments[i]){for(a in o+="\n["+i+"] ",arguments[0])s(arguments[0],a)&&(o+=a+": "+arguments[0][a]+", ");o=o.slice(0,-2)}else o=arguments[i];l.push(o)}S(e+"\nArguments: "+Array.prototype.slice.call(l).join("")+"\n"+(new Error).stack),n=!1}return t.apply(this,arguments)}),t)}var k,P={};function M(e,t){null!=r.deprecationHandler&&r.deprecationHandler(e,t),P[e]||(S(t),P[e]=!0)}function T(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function A(e){var t,n;for(n in e)s(e,n)&&(T(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function N(e,t){var n,r=h({},e);for(n in t)s(t,n)&&(a(e[n])&&a(t[n])?(r[n]={},h(r[n],e[n]),h(r[n],t[n])):null!=t[n]?r[n]=t[n]:delete r[n]);for(n in e)s(e,n)&&!s(t,n)&&a(e[n])&&(r[n]=h({},r[n]));return r}function R(e){null!=e&&this.set(e)}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null,k=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)s(e,t)&&n.push(t);return n};var j={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function D(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return T(r)?r.call(t,n):r}function I(e,t,n){var r=""+Math.abs(e),o=t-r.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,o)).toString().substr(1)+r}var F=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,G=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,L={},H={};function B(e,t,n,r){var o=r;"string"==typeof r&&(o=function(){return this[r]()}),e&&(H[e]=o),t&&(H[t[0]]=function(){return I(o.apply(this,arguments),t[1],t[2])}),n&&(H[n]=function(){return this.localeData().ordinal(o.apply(this,arguments),e)})}function U(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function V(e){var t,n,r=e.match(F);for(t=0,n=r.length;t<n;t++)H[r[t]]?r[t]=H[r[t]]:r[t]=U(r[t]);return function(t){var o,i="";for(o=0;o<n;o++)i+=T(r[o])?r[o].call(t,e):r[o];return i}}function z(e,t){return e.isValid()?(t=Y(t,e.localeData()),L[t]=L[t]||V(t),L[t](e)):e.localeData().invalidDate()}function Y(e,t){var n=5;function r(e){return t.longDateFormat(e)||e}for(G.lastIndex=0;n>=0&&G.test(e);)e=e.replace(G,r),G.lastIndex=0,n-=1;return e}var $={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function W(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(F).map((function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e})).join(""),this._longDateFormat[e])}var K="Invalid date";function q(){return this._invalidDate}var X="%d",Z=/\d{1,2}/;function J(e){return this._ordinal.replace("%d",e)}var Q={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function ee(e,t,n,r){var o=this._relativeTime[n];return T(o)?o(e,t,n,r):o.replace(/%d/i,e)}function te(e,t){var n=this._relativeTime[e>0?"future":"past"];return T(n)?n(t):n.replace(/%s/i,t)}var ne={};function re(e,t){var n=e.toLowerCase();ne[n]=ne[n+"s"]=ne[t]=e}function oe(e){return"string"==typeof e?ne[e]||ne[e.toLowerCase()]:void 0}function ie(e){var t,n,r={};for(n in e)s(e,n)&&(t=oe(n))&&(r[t]=e[n]);return r}var ae={};function se(e,t){ae[e]=t}function le(e){var t,n=[];for(t in e)s(e,t)&&n.push({unit:t,priority:ae[t]});return n.sort((function(e,t){return e.priority-t.priority})),n}function ce(e){return e%4==0&&e%100!=0||e%400==0}function ue(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function de(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=ue(t)),n}function fe(e,t){return function(n){return null!=n?(pe(this,e,n),r.updateOffset(this,t),this):he(this,e)}}function he(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function pe(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&ce(e.year())&&1===e.month()&&29===e.date()?(n=de(n),e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),et(n,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](n))}function ge(e){return T(this[e=oe(e)])?this[e]():this}function ve(e,t){if("object"==typeof e){var n,r=le(e=ie(e));for(n=0;n<r.length;n++)this[r[n].unit](e[r[n].unit])}else if(T(this[e=oe(e)]))return this[e](t);return this}var ye,me=/\d/,be=/\d\d/,we=/\d{3}/,xe=/\d{4}/,_e=/[+-]?\d{6}/,Ee=/\d\d?/,Oe=/\d\d\d\d?/,Se=/\d\d\d\d\d\d?/,Ce=/\d{1,3}/,ke=/\d{1,4}/,Pe=/[+-]?\d{1,6}/,Me=/\d+/,Te=/[+-]?\d+/,Ae=/Z|[+-]\d\d:?\d\d/gi,Ne=/Z|[+-]\d\d(?::?\d\d)?/gi,Re=/[+-]?\d+(\.\d{1,3})?/,je=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function De(e,t,n){ye[e]=T(t)?t:function(e,r){return e&&n?n:t}}function Ie(e,t){return s(ye,e)?ye[e](t._strict,t._locale):new RegExp(Fe(e))}function Fe(e){return Ge(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,n,r,o){return t||n||r||o})))}function Ge(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}ye={};var Le={};function He(e,t){var n,r=t;for("string"==typeof e&&(e=[e]),u(t)&&(r=function(e,n){n[t]=de(e)}),n=0;n<e.length;n++)Le[e[n]]=r}function Be(e,t){He(e,(function(e,n,r,o){r._w=r._w||{},t(e,r._w,r,o)}))}function Ue(e,t,n){null!=t&&s(Le,e)&&Le[e](t,n._a,n,e)}var Ve,ze=0,Ye=1,$e=2,We=3,Ke=4,qe=5,Xe=6,Ze=7,Je=8;function Qe(e,t){return(e%t+t)%t}function et(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=Qe(t,12);return e+=(t-n)/12,1===n?ce(e)?29:28:31-n%7%2}Ve=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},B("M",["MM",2],"Mo",(function(){return this.month()+1})),B("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),B("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),re("month","M"),se("month",8),De("M",Ee),De("MM",Ee,be),De("MMM",(function(e,t){return t.monthsShortRegex(e)})),De("MMMM",(function(e,t){return t.monthsRegex(e)})),He(["M","MM"],(function(e,t){t[Ye]=de(e)-1})),He(["MMM","MMMM"],(function(e,t,n,r){var o=n._locale.monthsParse(e,r,n._strict);null!=o?t[Ye]=o:v(n).invalidMonth=e}));var tt="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),nt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),rt=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,ot=je,it=je;function at(e,t){return e?i(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||rt).test(t)?"format":"standalone"][e.month()]:i(this._months)?this._months:this._months.standalone}function st(e,t){return e?i(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[rt.test(t)?"format":"standalone"][e.month()]:i(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function lt(e,t,n){var r,o,i,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)i=p([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(i,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(o=Ve.call(this._shortMonthsParse,a))?o:null:-1!==(o=Ve.call(this._longMonthsParse,a))?o:null:"MMM"===t?-1!==(o=Ve.call(this._shortMonthsParse,a))||-1!==(o=Ve.call(this._longMonthsParse,a))?o:null:-1!==(o=Ve.call(this._longMonthsParse,a))||-1!==(o=Ve.call(this._shortMonthsParse,a))?o:null}function ct(e,t,n){var r,o,i;if(this._monthsParseExact)return lt.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(o=p([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(i="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[r]=new RegExp(i.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function ut(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=de(t);else if(!u(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),et(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function dt(e){return null!=e?(ut(this,e),r.updateOffset(this,!0),this):he(this,"Month")}function ft(){return et(this.year(),this.month())}function ht(e){return this._monthsParseExact?(s(this,"_monthsRegex")||gt.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(s(this,"_monthsShortRegex")||(this._monthsShortRegex=ot),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function pt(e){return this._monthsParseExact?(s(this,"_monthsRegex")||gt.call(this),e?this._monthsStrictRegex:this._monthsRegex):(s(this,"_monthsRegex")||(this._monthsRegex=it),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function gt(){function e(e,t){return t.length-e.length}var t,n,r=[],o=[],i=[];for(t=0;t<12;t++)n=p([2e3,t]),r.push(this.monthsShort(n,"")),o.push(this.months(n,"")),i.push(this.months(n,"")),i.push(this.monthsShort(n,""));for(r.sort(e),o.sort(e),i.sort(e),t=0;t<12;t++)r[t]=Ge(r[t]),o[t]=Ge(o[t]);for(t=0;t<24;t++)i[t]=Ge(i[t]);this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function vt(e){return ce(e)?366:365}B("Y",0,0,(function(){var e=this.year();return e<=9999?I(e,4):"+"+e})),B(0,["YY",2],0,(function(){return this.year()%100})),B(0,["YYYY",4],0,"year"),B(0,["YYYYY",5],0,"year"),B(0,["YYYYYY",6,!0],0,"year"),re("year","y"),se("year",1),De("Y",Te),De("YY",Ee,be),De("YYYY",ke,xe),De("YYYYY",Pe,_e),De("YYYYYY",Pe,_e),He(["YYYYY","YYYYYY"],ze),He("YYYY",(function(e,t){t[ze]=2===e.length?r.parseTwoDigitYear(e):de(e)})),He("YY",(function(e,t){t[ze]=r.parseTwoDigitYear(e)})),He("Y",(function(e,t){t[ze]=parseInt(e,10)})),r.parseTwoDigitYear=function(e){return de(e)+(de(e)>68?1900:2e3)};var yt=fe("FullYear",!0);function mt(){return ce(this.year())}function bt(e,t,n,r,o,i,a){var s;return e<100&&e>=0?(s=new Date(e+400,t,n,r,o,i,a),isFinite(s.getFullYear())&&s.setFullYear(e)):s=new Date(e,t,n,r,o,i,a),s}function wt(e){var t,n;return e<100&&e>=0?((n=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function xt(e,t,n){var r=7+t-n;return-(7+wt(e,0,r).getUTCDay()-t)%7+r-1}function _t(e,t,n,r,o){var i,a,s=1+7*(t-1)+(7+n-r)%7+xt(e,r,o);return s<=0?a=vt(i=e-1)+s:s>vt(e)?(i=e+1,a=s-vt(e)):(i=e,a=s),{year:i,dayOfYear:a}}function Et(e,t,n){var r,o,i=xt(e.year(),t,n),a=Math.floor((e.dayOfYear()-i-1)/7)+1;return a<1?r=a+Ot(o=e.year()-1,t,n):a>Ot(e.year(),t,n)?(r=a-Ot(e.year(),t,n),o=e.year()+1):(o=e.year(),r=a),{week:r,year:o}}function Ot(e,t,n){var r=xt(e,t,n),o=xt(e+1,t,n);return(vt(e)-r+o)/7}function St(e){return Et(e,this._week.dow,this._week.doy).week}B("w",["ww",2],"wo","week"),B("W",["WW",2],"Wo","isoWeek"),re("week","w"),re("isoWeek","W"),se("week",5),se("isoWeek",5),De("w",Ee),De("ww",Ee,be),De("W",Ee),De("WW",Ee,be),Be(["w","ww","W","WW"],(function(e,t,n,r){t[r.substr(0,1)]=de(e)}));var Ct={dow:0,doy:6};function kt(){return this._week.dow}function Pt(){return this._week.doy}function Mt(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function Tt(e){var t=Et(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function At(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}function Nt(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Rt(e,t){return e.slice(t,7).concat(e.slice(0,t))}B("d",0,"do","day"),B("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),B("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),B("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),B("e",0,0,"weekday"),B("E",0,0,"isoWeekday"),re("day","d"),re("weekday","e"),re("isoWeekday","E"),se("day",11),se("weekday",11),se("isoWeekday",11),De("d",Ee),De("e",Ee),De("E",Ee),De("dd",(function(e,t){return t.weekdaysMinRegex(e)})),De("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),De("dddd",(function(e,t){return t.weekdaysRegex(e)})),Be(["dd","ddd","dddd"],(function(e,t,n,r){var o=n._locale.weekdaysParse(e,r,n._strict);null!=o?t.d=o:v(n).invalidWeekday=e})),Be(["d","e","E"],(function(e,t,n,r){t[r]=de(e)}));var jt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Dt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),It="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Ft=je,Gt=je,Lt=je;function Ht(e,t){var n=i(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?Rt(n,this._week.dow):e?n[e.day()]:n}function Bt(e){return!0===e?Rt(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Ut(e){return!0===e?Rt(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Vt(e,t,n){var r,o,i,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)i=p([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(i,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(o=Ve.call(this._weekdaysParse,a))?o:null:"ddd"===t?-1!==(o=Ve.call(this._shortWeekdaysParse,a))?o:null:-1!==(o=Ve.call(this._minWeekdaysParse,a))?o:null:"dddd"===t?-1!==(o=Ve.call(this._weekdaysParse,a))||-1!==(o=Ve.call(this._shortWeekdaysParse,a))||-1!==(o=Ve.call(this._minWeekdaysParse,a))?o:null:"ddd"===t?-1!==(o=Ve.call(this._shortWeekdaysParse,a))||-1!==(o=Ve.call(this._weekdaysParse,a))||-1!==(o=Ve.call(this._minWeekdaysParse,a))?o:null:-1!==(o=Ve.call(this._minWeekdaysParse,a))||-1!==(o=Ve.call(this._weekdaysParse,a))||-1!==(o=Ve.call(this._shortWeekdaysParse,a))?o:null}function zt(e,t,n){var r,o,i;if(this._weekdaysParseExact)return Vt.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(o=p([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(o,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(o,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(o,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(i="^"+this.weekdays(o,"")+"|^"+this.weekdaysShort(o,"")+"|^"+this.weekdaysMin(o,""),this._weekdaysParse[r]=new RegExp(i.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[r].test(e))return r;if(n&&"ddd"===t&&this._shortWeekdaysParse[r].test(e))return r;if(n&&"dd"===t&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}}function Yt(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=At(e,this.localeData()),this.add(e-t,"d")):t}function $t(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Wt(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=Nt(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function Kt(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Zt.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(s(this,"_weekdaysRegex")||(this._weekdaysRegex=Ft),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function qt(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Zt.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(s(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Gt),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Xt(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Zt.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(s(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Lt),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Zt(){function e(e,t){return t.length-e.length}var t,n,r,o,i,a=[],s=[],l=[],c=[];for(t=0;t<7;t++)n=p([2e3,1]).day(t),r=Ge(this.weekdaysMin(n,"")),o=Ge(this.weekdaysShort(n,"")),i=Ge(this.weekdays(n,"")),a.push(r),s.push(o),l.push(i),c.push(r),c.push(o),c.push(i);a.sort(e),s.sort(e),l.sort(e),c.sort(e),this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Jt(){return this.hours()%12||12}function Qt(){return this.hours()||24}function en(e,t){B(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function tn(e,t){return t._meridiemParse}function nn(e){return"p"===(e+"").toLowerCase().charAt(0)}B("H",["HH",2],0,"hour"),B("h",["hh",2],0,Jt),B("k",["kk",2],0,Qt),B("hmm",0,0,(function(){return""+Jt.apply(this)+I(this.minutes(),2)})),B("hmmss",0,0,(function(){return""+Jt.apply(this)+I(this.minutes(),2)+I(this.seconds(),2)})),B("Hmm",0,0,(function(){return""+this.hours()+I(this.minutes(),2)})),B("Hmmss",0,0,(function(){return""+this.hours()+I(this.minutes(),2)+I(this.seconds(),2)})),en("a",!0),en("A",!1),re("hour","h"),se("hour",13),De("a",tn),De("A",tn),De("H",Ee),De("h",Ee),De("k",Ee),De("HH",Ee,be),De("hh",Ee,be),De("kk",Ee,be),De("hmm",Oe),De("hmmss",Se),De("Hmm",Oe),De("Hmmss",Se),He(["H","HH"],We),He(["k","kk"],(function(e,t,n){var r=de(e);t[We]=24===r?0:r})),He(["a","A"],(function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e})),He(["h","hh"],(function(e,t,n){t[We]=de(e),v(n).bigHour=!0})),He("hmm",(function(e,t,n){var r=e.length-2;t[We]=de(e.substr(0,r)),t[Ke]=de(e.substr(r)),v(n).bigHour=!0})),He("hmmss",(function(e,t,n){var r=e.length-4,o=e.length-2;t[We]=de(e.substr(0,r)),t[Ke]=de(e.substr(r,2)),t[qe]=de(e.substr(o)),v(n).bigHour=!0})),He("Hmm",(function(e,t,n){var r=e.length-2;t[We]=de(e.substr(0,r)),t[Ke]=de(e.substr(r))})),He("Hmmss",(function(e,t,n){var r=e.length-4,o=e.length-2;t[We]=de(e.substr(0,r)),t[Ke]=de(e.substr(r,2)),t[qe]=de(e.substr(o))}));var rn=/[ap]\.?m?\.?/i,on=fe("Hours",!0);function an(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}var sn,ln={calendar:j,longDateFormat:$,invalidDate:K,ordinal:X,dayOfMonthOrdinalParse:Z,relativeTime:Q,months:tt,monthsShort:nt,week:Ct,weekdays:jt,weekdaysMin:It,weekdaysShort:Dt,meridiemParse:rn},cn={},un={};function dn(e,t){var n,r=Math.min(e.length,t.length);for(n=0;n<r;n+=1)if(e[n]!==t[n])return n;return r}function fn(e){return e?e.toLowerCase().replace("_","-"):e}function hn(e){for(var t,n,r,o,i=0;i<e.length;){for(t=(o=fn(e[i]).split("-")).length,n=(n=fn(e[i+1]))?n.split("-"):null;t>0;){if(r=pn(o.slice(0,t).join("-")))return r;if(n&&n.length>=t&&dn(o,n)>=t-1)break;t--}i++}return sn}function pn(t){var n=null;if(void 0===cn[t]&&e&&e.exports)try{n=sn._abbr,E("./locale/"+t),gn(n)}catch(e){cn[t]=null}return cn[t]}function gn(e,t){var n;return e&&((n=c(t)?mn(e):vn(e,t))?sn=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),sn._abbr}function vn(e,t){if(null!==t){var n,r=ln;if(t.abbr=e,null!=cn[e])M("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=cn[e]._config;else if(null!=t.parentLocale)if(null!=cn[t.parentLocale])r=cn[t.parentLocale]._config;else{if(null==(n=pn(t.parentLocale)))return un[t.parentLocale]||(un[t.parentLocale]=[]),un[t.parentLocale].push({name:e,config:t}),null;r=n._config}return cn[e]=new R(N(r,t)),un[e]&&un[e].forEach((function(e){vn(e.name,e.config)})),gn(e),cn[e]}return delete cn[e],null}function yn(e,t){if(null!=t){var n,r,o=ln;null!=cn[e]&&null!=cn[e].parentLocale?cn[e].set(N(cn[e]._config,t)):(null!=(r=pn(e))&&(o=r._config),t=N(o,t),null==r&&(t.abbr=e),(n=new R(t)).parentLocale=cn[e],cn[e]=n),gn(e)}else null!=cn[e]&&(null!=cn[e].parentLocale?(cn[e]=cn[e].parentLocale,e===gn()&&gn(e)):null!=cn[e]&&delete cn[e]);return cn[e]}function mn(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return sn;if(!i(e)){if(t=pn(e))return t;e=[e]}return hn(e)}function bn(){return k(cn)}function wn(e){var t,n=e._a;return n&&-2===v(e).overflow&&(t=n[Ye]<0||n[Ye]>11?Ye:n[$e]<1||n[$e]>et(n[ze],n[Ye])?$e:n[We]<0||n[We]>24||24===n[We]&&(0!==n[Ke]||0!==n[qe]||0!==n[Xe])?We:n[Ke]<0||n[Ke]>59?Ke:n[qe]<0||n[qe]>59?qe:n[Xe]<0||n[Xe]>999?Xe:-1,v(e)._overflowDayOfYear&&(t<ze||t>$e)&&(t=$e),v(e)._overflowWeeks&&-1===t&&(t=Ze),v(e)._overflowWeekday&&-1===t&&(t=Je),v(e).overflow=t),e}var xn=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,_n=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,En=/Z|[+-]\d\d(?::?\d\d)?/,On=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Sn=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Cn=/^\/?Date\((-?\d+)/i,kn=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Pn={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Mn(e){var t,n,r,o,i,a,s=e._i,l=xn.exec(s)||_n.exec(s);if(l){for(v(e).iso=!0,t=0,n=On.length;t<n;t++)if(On[t][1].exec(l[1])){o=On[t][0],r=!1!==On[t][2];break}if(null==o)return void(e._isValid=!1);if(l[3]){for(t=0,n=Sn.length;t<n;t++)if(Sn[t][1].exec(l[3])){i=(l[2]||" ")+Sn[t][0];break}if(null==i)return void(e._isValid=!1)}if(!r&&null!=i)return void(e._isValid=!1);if(l[4]){if(!En.exec(l[4]))return void(e._isValid=!1);a="Z"}e._f=o+(i||"")+(a||""),Bn(e)}else e._isValid=!1}function Tn(e,t,n,r,o,i){var a=[An(e),nt.indexOf(t),parseInt(n,10),parseInt(r,10),parseInt(o,10)];return i&&a.push(parseInt(i,10)),a}function An(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function Nn(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Rn(e,t,n){return!e||Dt.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(v(n).weekdayMismatch=!0,n._isValid=!1,!1)}function jn(e,t,n){if(e)return Pn[e];if(t)return 0;var r=parseInt(n,10),o=r%100;return(r-o)/100*60+o}function Dn(e){var t,n=kn.exec(Nn(e._i));if(n){if(t=Tn(n[4],n[3],n[2],n[5],n[6],n[7]),!Rn(n[1],t,e))return;e._a=t,e._tzm=jn(n[8],n[9],n[10]),e._d=wt.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),v(e).rfc2822=!0}else e._isValid=!1}function In(e){var t=Cn.exec(e._i);null===t?(Mn(e),!1===e._isValid&&(delete e._isValid,Dn(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:r.createFromInputFallback(e)))):e._d=new Date(+t[1])}function Fn(e,t,n){return null!=e?e:null!=t?t:n}function Gn(e){var t=new Date(r.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Ln(e){var t,n,r,o,i,a=[];if(!e._d){for(r=Gn(e),e._w&&null==e._a[$e]&&null==e._a[Ye]&&Hn(e),null!=e._dayOfYear&&(i=Fn(e._a[ze],r[ze]),(e._dayOfYear>vt(i)||0===e._dayOfYear)&&(v(e)._overflowDayOfYear=!0),n=wt(i,0,e._dayOfYear),e._a[Ye]=n.getUTCMonth(),e._a[$e]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=a[t]=r[t];for(;t<7;t++)e._a[t]=a[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[We]&&0===e._a[Ke]&&0===e._a[qe]&&0===e._a[Xe]&&(e._nextDay=!0,e._a[We]=0),e._d=(e._useUTC?wt:bt).apply(null,a),o=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[We]=24),e._w&&void 0!==e._w.d&&e._w.d!==o&&(v(e).weekdayMismatch=!0)}}function Hn(e){var t,n,r,o,i,a,s,l,c;null!=(t=e._w).GG||null!=t.W||null!=t.E?(i=1,a=4,n=Fn(t.GG,e._a[ze],Et(qn(),1,4).year),r=Fn(t.W,1),((o=Fn(t.E,1))<1||o>7)&&(l=!0)):(i=e._locale._week.dow,a=e._locale._week.doy,c=Et(qn(),i,a),n=Fn(t.gg,e._a[ze],c.year),r=Fn(t.w,c.week),null!=t.d?((o=t.d)<0||o>6)&&(l=!0):null!=t.e?(o=t.e+i,(t.e<0||t.e>6)&&(l=!0)):o=i),r<1||r>Ot(n,i,a)?v(e)._overflowWeeks=!0:null!=l?v(e)._overflowWeekday=!0:(s=_t(n,r,o,i,a),e._a[ze]=s.year,e._dayOfYear=s.dayOfYear)}function Bn(e){if(e._f!==r.ISO_8601)if(e._f!==r.RFC_2822){e._a=[],v(e).empty=!0;var t,n,o,i,a,s,l=""+e._i,c=l.length,u=0;for(o=Y(e._f,e._locale).match(F)||[],t=0;t<o.length;t++)i=o[t],(n=(l.match(Ie(i,e))||[])[0])&&((a=l.substr(0,l.indexOf(n))).length>0&&v(e).unusedInput.push(a),l=l.slice(l.indexOf(n)+n.length),u+=n.length),H[i]?(n?v(e).empty=!1:v(e).unusedTokens.push(i),Ue(i,n,e)):e._strict&&!n&&v(e).unusedTokens.push(i);v(e).charsLeftOver=c-u,l.length>0&&v(e).unusedInput.push(l),e._a[We]<=12&&!0===v(e).bigHour&&e._a[We]>0&&(v(e).bigHour=void 0),v(e).parsedDateParts=e._a.slice(0),v(e).meridiem=e._meridiem,e._a[We]=Un(e._locale,e._a[We],e._meridiem),null!==(s=v(e).era)&&(e._a[ze]=e._locale.erasConvertYear(s,e._a[ze])),Ln(e),wn(e)}else Dn(e);else Mn(e)}function Un(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((r=e.isPM(n))&&t<12&&(t+=12),r||12!==t||(t=0),t):t}function Vn(e){var t,n,r,o,i,a,s=!1;if(0===e._f.length)return v(e).invalidFormat=!0,void(e._d=new Date(NaN));for(o=0;o<e._f.length;o++)i=0,a=!1,t=x({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[o],Bn(t),y(t)&&(a=!0),i+=v(t).charsLeftOver,i+=10*v(t).unusedTokens.length,v(t).score=i,s?i<r&&(r=i,n=t):(null==r||i<r||a)&&(r=i,n=t,a&&(s=!0));h(e,n||t)}function zn(e){if(!e._d){var t=ie(e._i),n=void 0===t.day?t.date:t.day;e._a=f([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),Ln(e)}}function Yn(e){var t=new _(wn($n(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function $n(e){var t=e._i,n=e._f;return e._locale=e._locale||mn(e._l),null===t||void 0===n&&""===t?m({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),O(t)?new _(wn(t)):(d(t)?e._d=t:i(n)?Vn(e):n?Bn(e):Wn(e),y(e)||(e._d=null),e))}function Wn(e){var t=e._i;c(t)?e._d=new Date(r.now()):d(t)?e._d=new Date(t.valueOf()):"string"==typeof t?In(e):i(t)?(e._a=f(t.slice(0),(function(e){return parseInt(e,10)})),Ln(e)):a(t)?zn(e):u(t)?e._d=new Date(t):r.createFromInputFallback(e)}function Kn(e,t,n,r,o){var s={};return!0!==t&&!1!==t||(r=t,t=void 0),!0!==n&&!1!==n||(r=n,n=void 0),(a(e)&&l(e)||i(e)&&0===e.length)&&(e=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=o,s._l=n,s._i=e,s._f=t,s._strict=r,Yn(s)}function qn(e,t,n,r){return Kn(e,t,n,r,!1)}r.createFromInputFallback=C("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),r.ISO_8601=function(){},r.RFC_2822=function(){};var Xn=C("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=qn.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:m()})),Zn=C("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=qn.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:m()}));function Jn(e,t){var n,r;if(1===t.length&&i(t[0])&&(t=t[0]),!t.length)return qn();for(n=t[0],r=1;r<t.length;++r)t[r].isValid()&&!t[r][e](n)||(n=t[r]);return n}function Qn(){return Jn("isBefore",[].slice.call(arguments,0))}function er(){return Jn("isAfter",[].slice.call(arguments,0))}var tr=function(){return Date.now?Date.now():+new Date},nr=["year","quarter","month","week","day","hour","minute","second","millisecond"];function rr(e){var t,n,r=!1;for(t in e)if(s(e,t)&&(-1===Ve.call(nr,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<nr.length;++n)if(e[nr[n]]){if(r)return!1;parseFloat(e[nr[n]])!==de(e[nr[n]])&&(r=!0)}return!0}function or(){return this._isValid}function ir(){return Pr(NaN)}function ar(e){var t=ie(e),n=t.year||0,r=t.quarter||0,o=t.month||0,i=t.week||t.isoWeek||0,a=t.day||0,s=t.hour||0,l=t.minute||0,c=t.second||0,u=t.millisecond||0;this._isValid=rr(t),this._milliseconds=+u+1e3*c+6e4*l+1e3*s*60*60,this._days=+a+7*i,this._months=+o+3*r+12*n,this._data={},this._locale=mn(),this._bubble()}function sr(e){return e instanceof ar}function lr(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function cr(e,t,n){var r,o=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),a=0;for(r=0;r<o;r++)(n&&e[r]!==t[r]||!n&&de(e[r])!==de(t[r]))&&a++;return a+i}function ur(e,t){B(e,0,0,(function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+I(~~(e/60),2)+t+I(~~e%60,2)}))}ur("Z",":"),ur("ZZ",""),De("Z",Ne),De("ZZ",Ne),He(["Z","ZZ"],(function(e,t,n){n._useUTC=!0,n._tzm=fr(Ne,e)}));var dr=/([\+\-]|\d\d)/gi;function fr(e,t){var n,r,o=(t||"").match(e);return null===o?null:0===(r=60*(n=((o[o.length-1]||[])+"").match(dr)||["-",0,0])[1]+de(n[2]))?0:"+"===n[0]?r:-r}function hr(e,t){var n,o;return t._isUTC?(n=t.clone(),o=(O(e)||d(e)?e.valueOf():qn(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+o),r.updateOffset(n,!1),n):qn(e).local()}function pr(e){return-Math.round(e._d.getTimezoneOffset())}function gr(e,t,n){var o,i=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=fr(Ne,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(o=pr(this)),this._offset=e,this._isUTC=!0,null!=o&&this.add(o,"m"),i!==e&&(!t||this._changeInProgress?Rr(this,Pr(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?i:pr(this)}function vr(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function yr(e){return this.utcOffset(0,e)}function mr(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(pr(this),"m")),this}function br(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=fr(Ae,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function wr(e){return!!this.isValid()&&(e=e?qn(e).utcOffset():0,(this.utcOffset()-e)%60==0)}function xr(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function _r(){if(!c(this._isDSTShifted))return this._isDSTShifted;var e,t={};return x(t,this),(t=$n(t))._a?(e=t._isUTC?p(t._a):qn(t._a),this._isDSTShifted=this.isValid()&&cr(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Er(){return!!this.isValid()&&!this._isUTC}function Or(){return!!this.isValid()&&this._isUTC}function Sr(){return!!this.isValid()&&this._isUTC&&0===this._offset}r.updateOffset=function(){};var Cr=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,kr=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Pr(e,t){var n,r,o,i=e,a=null;return sr(e)?i={ms:e._milliseconds,d:e._days,M:e._months}:u(e)||!isNaN(+e)?(i={},t?i[t]=+e:i.milliseconds=+e):(a=Cr.exec(e))?(n="-"===a[1]?-1:1,i={y:0,d:de(a[$e])*n,h:de(a[We])*n,m:de(a[Ke])*n,s:de(a[qe])*n,ms:de(lr(1e3*a[Xe]))*n}):(a=kr.exec(e))?(n="-"===a[1]?-1:1,i={y:Mr(a[2],n),M:Mr(a[3],n),w:Mr(a[4],n),d:Mr(a[5],n),h:Mr(a[6],n),m:Mr(a[7],n),s:Mr(a[8],n)}):null==i?i={}:"object"==typeof i&&("from"in i||"to"in i)&&(o=Ar(qn(i.from),qn(i.to)),(i={}).ms=o.milliseconds,i.M=o.months),r=new ar(i),sr(e)&&s(e,"_locale")&&(r._locale=e._locale),sr(e)&&s(e,"_isValid")&&(r._isValid=e._isValid),r}function Mr(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Tr(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Ar(e,t){var n;return e.isValid()&&t.isValid()?(t=hr(t,e),e.isBefore(t)?n=Tr(e,t):((n=Tr(t,e)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Nr(e,t){return function(n,r){var o;return null===r||isNaN(+r)||(M(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=n,n=r,r=o),Rr(this,Pr(n,r),e),this}}function Rr(e,t,n,o){var i=t._milliseconds,a=lr(t._days),s=lr(t._months);e.isValid()&&(o=null==o||o,s&&ut(e,he(e,"Month")+s*n),a&&pe(e,"Date",he(e,"Date")+a*n),i&&e._d.setTime(e._d.valueOf()+i*n),o&&r.updateOffset(e,a||s))}Pr.fn=ar.prototype,Pr.invalid=ir;var jr=Nr(1,"add"),Dr=Nr(-1,"subtract");function Ir(e){return"string"==typeof e||e instanceof String}function Fr(e){return O(e)||d(e)||Ir(e)||u(e)||Lr(e)||Gr(e)||null==e}function Gr(e){var t,n,r=a(e)&&!l(e),o=!1,i=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"];for(t=0;t<i.length;t+=1)n=i[t],o=o||s(e,n);return r&&o}function Lr(e){var t=i(e),n=!1;return t&&(n=0===e.filter((function(t){return!u(t)&&Ir(e)})).length),t&&n}function Hr(e){var t,n,r=a(e)&&!l(e),o=!1,i=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<i.length;t+=1)n=i[t],o=o||s(e,n);return r&&o}function Br(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Ur(e,t){1===arguments.length&&(arguments[0]?Fr(arguments[0])?(e=arguments[0],t=void 0):Hr(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||qn(),o=hr(n,this).startOf("day"),i=r.calendarFormat(this,o)||"sameElse",a=t&&(T(t[i])?t[i].call(this,n):t[i]);return this.format(a||this.localeData().calendar(i,this,qn(n)))}function Vr(){return new _(this)}function zr(e,t){var n=O(e)?e:qn(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=oe(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())}function Yr(e,t){var n=O(e)?e:qn(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=oe(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())}function $r(e,t,n,r){var o=O(e)?e:qn(e),i=O(t)?t:qn(t);return!!(this.isValid()&&o.isValid()&&i.isValid())&&("("===(r=r||"()")[0]?this.isAfter(o,n):!this.isBefore(o,n))&&(")"===r[1]?this.isBefore(i,n):!this.isAfter(i,n))}function Wr(e,t){var n,r=O(e)?e:qn(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=oe(t)||"millisecond")?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))}function Kr(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function qr(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function Xr(e,t,n){var r,o,i;if(!this.isValid())return NaN;if(!(r=hr(e,this)).isValid())return NaN;switch(o=6e4*(r.utcOffset()-this.utcOffset()),t=oe(t)){case"year":i=Zr(this,r)/12;break;case"month":i=Zr(this,r);break;case"quarter":i=Zr(this,r)/3;break;case"second":i=(this-r)/1e3;break;case"minute":i=(this-r)/6e4;break;case"hour":i=(this-r)/36e5;break;case"day":i=(this-r-o)/864e5;break;case"week":i=(this-r-o)/6048e5;break;default:i=this-r}return n?i:ue(i)}function Zr(e,t){if(e.date()<t.date())return-Zr(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),r=e.clone().add(n,"months");return-(n+(t-r<0?(t-r)/(r-e.clone().add(n-1,"months")):(t-r)/(e.clone().add(n+1,"months")-r)))||0}function Jr(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Qr(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?z(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):T(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",z(n,"Z")):z(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function eo(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,n,r,o="moment",i="";return this.isLocal()||(o=0===this.utcOffset()?"moment.utc":"moment.parseZone",i="Z"),e="["+o+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",r=i+'[")]',this.format(e+t+n+r)}function to(e){e||(e=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var t=z(this,e);return this.localeData().postformat(t)}function no(e,t){return this.isValid()&&(O(e)&&e.isValid()||qn(e).isValid())?Pr({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ro(e){return this.from(qn(),e)}function oo(e,t){return this.isValid()&&(O(e)&&e.isValid()||qn(e).isValid())?Pr({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function io(e){return this.to(qn(),e)}function ao(e){var t;return void 0===e?this._locale._abbr:(null!=(t=mn(e))&&(this._locale=t),this)}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var so=C("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function lo(){return this._locale}var co=1e3,uo=60*co,fo=60*uo,ho=3506328*fo;function po(e,t){return(e%t+t)%t}function go(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-ho:new Date(e,t,n).valueOf()}function vo(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-ho:Date.UTC(e,t,n)}function yo(e){var t,n;if(void 0===(e=oe(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?vo:go,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=po(t+(this._isUTC?0:this.utcOffset()*uo),fo);break;case"minute":t=this._d.valueOf(),t-=po(t,uo);break;case"second":t=this._d.valueOf(),t-=po(t,co)}return this._d.setTime(t),r.updateOffset(this,!0),this}function mo(e){var t,n;if(void 0===(e=oe(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?vo:go,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=fo-po(t+(this._isUTC?0:this.utcOffset()*uo),fo)-1;break;case"minute":t=this._d.valueOf(),t+=uo-po(t,uo)-1;break;case"second":t=this._d.valueOf(),t+=co-po(t,co)-1}return this._d.setTime(t),r.updateOffset(this,!0),this}function bo(){return this._d.valueOf()-6e4*(this._offset||0)}function wo(){return Math.floor(this.valueOf()/1e3)}function xo(){return new Date(this.valueOf())}function _o(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Eo(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Oo(){return this.isValid()?this.toISOString():null}function So(){return y(this)}function Co(){return h({},v(this))}function ko(){return v(this).overflow}function Po(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Mo(e,t){var n,o,i,a=this._eras||mn("en")._eras;for(n=0,o=a.length;n<o;++n)switch("string"==typeof a[n].since&&(i=r(a[n].since).startOf("day"),a[n].since=i.valueOf()),typeof a[n].until){case"undefined":a[n].until=1/0;break;case"string":i=r(a[n].until).startOf("day").valueOf(),a[n].until=i.valueOf()}return a}function To(e,t,n){var r,o,i,a,s,l=this.eras();for(e=e.toUpperCase(),r=0,o=l.length;r<o;++r)if(i=l[r].name.toUpperCase(),a=l[r].abbr.toUpperCase(),s=l[r].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(a===e)return l[r];break;case"NNNN":if(i===e)return l[r];break;case"NNNNN":if(s===e)return l[r]}else if([i,a,s].indexOf(e)>=0)return l[r]}function Ao(e,t){var n=e.since<=e.until?1:-1;return void 0===t?r(e.since).year():r(e.since).year()+(t-e.offset)*n}function No(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].name;if(r[e].until<=n&&n<=r[e].since)return r[e].name}return""}function Ro(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].narrow;if(r[e].until<=n&&n<=r[e].since)return r[e].narrow}return""}function jo(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].abbr;if(r[e].until<=n&&n<=r[e].since)return r[e].abbr}return""}function Do(){var e,t,n,o,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e)if(n=i[e].since<=i[e].until?1:-1,o=this.clone().startOf("day").valueOf(),i[e].since<=o&&o<=i[e].until||i[e].until<=o&&o<=i[e].since)return(this.year()-r(i[e].since).year())*n+i[e].offset;return this.year()}function Io(e){return s(this,"_erasNameRegex")||Vo.call(this),e?this._erasNameRegex:this._erasRegex}function Fo(e){return s(this,"_erasAbbrRegex")||Vo.call(this),e?this._erasAbbrRegex:this._erasRegex}function Go(e){return s(this,"_erasNarrowRegex")||Vo.call(this),e?this._erasNarrowRegex:this._erasRegex}function Lo(e,t){return t.erasAbbrRegex(e)}function Ho(e,t){return t.erasNameRegex(e)}function Bo(e,t){return t.erasNarrowRegex(e)}function Uo(e,t){return t._eraYearOrdinalRegex||Me}function Vo(){var e,t,n=[],r=[],o=[],i=[],a=this.eras();for(e=0,t=a.length;e<t;++e)r.push(Ge(a[e].name)),n.push(Ge(a[e].abbr)),o.push(Ge(a[e].narrow)),i.push(Ge(a[e].name)),i.push(Ge(a[e].abbr)),i.push(Ge(a[e].narrow));this._erasRegex=new RegExp("^("+i.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+r.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+o.join("|")+")","i")}function zo(e,t){B(0,[e,e.length],0,t)}function Yo(e){return Zo.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function $o(e){return Zo.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Wo(){return Ot(this.year(),1,4)}function Ko(){return Ot(this.isoWeekYear(),1,4)}function qo(){var e=this.localeData()._week;return Ot(this.year(),e.dow,e.doy)}function Xo(){var e=this.localeData()._week;return Ot(this.weekYear(),e.dow,e.doy)}function Zo(e,t,n,r,o){var i;return null==e?Et(this,r,o).year:(t>(i=Ot(e,r,o))&&(t=i),Jo.call(this,e,t,n,r,o))}function Jo(e,t,n,r,o){var i=_t(e,t,n,r,o),a=wt(i.year,0,i.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}function Qo(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}B("N",0,0,"eraAbbr"),B("NN",0,0,"eraAbbr"),B("NNN",0,0,"eraAbbr"),B("NNNN",0,0,"eraName"),B("NNNNN",0,0,"eraNarrow"),B("y",["y",1],"yo","eraYear"),B("y",["yy",2],0,"eraYear"),B("y",["yyy",3],0,"eraYear"),B("y",["yyyy",4],0,"eraYear"),De("N",Lo),De("NN",Lo),De("NNN",Lo),De("NNNN",Ho),De("NNNNN",Bo),He(["N","NN","NNN","NNNN","NNNNN"],(function(e,t,n,r){var o=n._locale.erasParse(e,r,n._strict);o?v(n).era=o:v(n).invalidEra=e})),De("y",Me),De("yy",Me),De("yyy",Me),De("yyyy",Me),De("yo",Uo),He(["y","yy","yyy","yyyy"],ze),He(["yo"],(function(e,t,n,r){var o;n._locale._eraYearOrdinalRegex&&(o=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[ze]=n._locale.eraYearOrdinalParse(e,o):t[ze]=parseInt(e,10)})),B(0,["gg",2],0,(function(){return this.weekYear()%100})),B(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),zo("gggg","weekYear"),zo("ggggg","weekYear"),zo("GGGG","isoWeekYear"),zo("GGGGG","isoWeekYear"),re("weekYear","gg"),re("isoWeekYear","GG"),se("weekYear",1),se("isoWeekYear",1),De("G",Te),De("g",Te),De("GG",Ee,be),De("gg",Ee,be),De("GGGG",ke,xe),De("gggg",ke,xe),De("GGGGG",Pe,_e),De("ggggg",Pe,_e),Be(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,n,r){t[r.substr(0,2)]=de(e)})),Be(["gg","GG"],(function(e,t,n,o){t[o]=r.parseTwoDigitYear(e)})),B("Q",0,"Qo","quarter"),re("quarter","Q"),se("quarter",7),De("Q",me),He("Q",(function(e,t){t[Ye]=3*(de(e)-1)})),B("D",["DD",2],"Do","date"),re("date","D"),se("date",9),De("D",Ee),De("DD",Ee,be),De("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),He(["D","DD"],$e),He("Do",(function(e,t){t[$e]=de(e.match(Ee)[0])}));var ei=fe("Date",!0);function ti(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}B("DDD",["DDDD",3],"DDDo","dayOfYear"),re("dayOfYear","DDD"),se("dayOfYear",4),De("DDD",Ce),De("DDDD",we),He(["DDD","DDDD"],(function(e,t,n){n._dayOfYear=de(e)})),B("m",["mm",2],0,"minute"),re("minute","m"),se("minute",14),De("m",Ee),De("mm",Ee,be),He(["m","mm"],Ke);var ni=fe("Minutes",!1);B("s",["ss",2],0,"second"),re("second","s"),se("second",15),De("s",Ee),De("ss",Ee,be),He(["s","ss"],qe);var ri,oi,ii=fe("Seconds",!1);for(B("S",0,0,(function(){return~~(this.millisecond()/100)})),B(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),B(0,["SSS",3],0,"millisecond"),B(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),B(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),B(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),B(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),B(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),B(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),re("millisecond","ms"),se("millisecond",16),De("S",Ce,me),De("SS",Ce,be),De("SSS",Ce,we),ri="SSSS";ri.length<=9;ri+="S")De(ri,Me);function ai(e,t){t[Xe]=de(1e3*("0."+e))}for(ri="S";ri.length<=9;ri+="S")He(ri,ai);function si(){return this._isUTC?"UTC":""}function li(){return this._isUTC?"Coordinated Universal Time":""}oi=fe("Milliseconds",!1),B("z",0,0,"zoneAbbr"),B("zz",0,0,"zoneName");var ci=_.prototype;function ui(e){return qn(1e3*e)}function di(){return qn.apply(null,arguments).parseZone()}function fi(e){return e}ci.add=jr,ci.calendar=Ur,ci.clone=Vr,ci.diff=Xr,ci.endOf=mo,ci.format=to,ci.from=no,ci.fromNow=ro,ci.to=oo,ci.toNow=io,ci.get=ge,ci.invalidAt=ko,ci.isAfter=zr,ci.isBefore=Yr,ci.isBetween=$r,ci.isSame=Wr,ci.isSameOrAfter=Kr,ci.isSameOrBefore=qr,ci.isValid=So,ci.lang=so,ci.locale=ao,ci.localeData=lo,ci.max=Zn,ci.min=Xn,ci.parsingFlags=Co,ci.set=ve,ci.startOf=yo,ci.subtract=Dr,ci.toArray=_o,ci.toObject=Eo,ci.toDate=xo,ci.toISOString=Qr,ci.inspect=eo,"undefined"!=typeof Symbol&&null!=Symbol.for&&(ci[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),ci.toJSON=Oo,ci.toString=Jr,ci.unix=wo,ci.valueOf=bo,ci.creationData=Po,ci.eraName=No,ci.eraNarrow=Ro,ci.eraAbbr=jo,ci.eraYear=Do,ci.year=yt,ci.isLeapYear=mt,ci.weekYear=Yo,ci.isoWeekYear=$o,ci.quarter=ci.quarters=Qo,ci.month=dt,ci.daysInMonth=ft,ci.week=ci.weeks=Mt,ci.isoWeek=ci.isoWeeks=Tt,ci.weeksInYear=qo,ci.weeksInWeekYear=Xo,ci.isoWeeksInYear=Wo,ci.isoWeeksInISOWeekYear=Ko,ci.date=ei,ci.day=ci.days=Yt,ci.weekday=$t,ci.isoWeekday=Wt,ci.dayOfYear=ti,ci.hour=ci.hours=on,ci.minute=ci.minutes=ni,ci.second=ci.seconds=ii,ci.millisecond=ci.milliseconds=oi,ci.utcOffset=gr,ci.utc=yr,ci.local=mr,ci.parseZone=br,ci.hasAlignedHourOffset=wr,ci.isDST=xr,ci.isLocal=Er,ci.isUtcOffset=Or,ci.isUtc=Sr,ci.isUTC=Sr,ci.zoneAbbr=si,ci.zoneName=li,ci.dates=C("dates accessor is deprecated. Use date instead.",ei),ci.months=C("months accessor is deprecated. Use month instead",dt),ci.years=C("years accessor is deprecated. Use year instead",yt),ci.zone=C("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",vr),ci.isDSTShifted=C("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",_r);var hi=R.prototype;function pi(e,t,n,r){var o=mn(),i=p().set(r,t);return o[n](i,e)}function gi(e,t,n){if(u(e)&&(t=e,e=void 0),e=e||"",null!=t)return pi(e,t,n,"month");var r,o=[];for(r=0;r<12;r++)o[r]=pi(e,r,n,"month");return o}function vi(e,t,n,r){"boolean"==typeof e?(u(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,u(t)&&(n=t,t=void 0),t=t||"");var o,i=mn(),a=e?i._week.dow:0,s=[];if(null!=n)return pi(t,(n+a)%7,r,"day");for(o=0;o<7;o++)s[o]=pi(t,(o+a)%7,r,"day");return s}function yi(e,t){return gi(e,t,"months")}function mi(e,t){return gi(e,t,"monthsShort")}function bi(e,t,n){return vi(e,t,n,"weekdays")}function wi(e,t,n){return vi(e,t,n,"weekdaysShort")}function xi(e,t,n){return vi(e,t,n,"weekdaysMin")}hi.calendar=D,hi.longDateFormat=W,hi.invalidDate=q,hi.ordinal=J,hi.preparse=fi,hi.postformat=fi,hi.relativeTime=ee,hi.pastFuture=te,hi.set=A,hi.eras=Mo,hi.erasParse=To,hi.erasConvertYear=Ao,hi.erasAbbrRegex=Fo,hi.erasNameRegex=Io,hi.erasNarrowRegex=Go,hi.months=at,hi.monthsShort=st,hi.monthsParse=ct,hi.monthsRegex=pt,hi.monthsShortRegex=ht,hi.week=St,hi.firstDayOfYear=Pt,hi.firstDayOfWeek=kt,hi.weekdays=Ht,hi.weekdaysMin=Ut,hi.weekdaysShort=Bt,hi.weekdaysParse=zt,hi.weekdaysRegex=Kt,hi.weekdaysShortRegex=qt,hi.weekdaysMinRegex=Xt,hi.isPM=nn,hi.meridiem=an,gn("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===de(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),r.lang=C("moment.lang is deprecated. Use moment.locale instead.",gn),r.langData=C("moment.langData is deprecated. Use moment.localeData instead.",mn);var _i=Math.abs;function Ei(){var e=this._data;return this._milliseconds=_i(this._milliseconds),this._days=_i(this._days),this._months=_i(this._months),e.milliseconds=_i(e.milliseconds),e.seconds=_i(e.seconds),e.minutes=_i(e.minutes),e.hours=_i(e.hours),e.months=_i(e.months),e.years=_i(e.years),this}function Oi(e,t,n,r){var o=Pr(t,n);return e._milliseconds+=r*o._milliseconds,e._days+=r*o._days,e._months+=r*o._months,e._bubble()}function Si(e,t){return Oi(this,e,t,1)}function Ci(e,t){return Oi(this,e,t,-1)}function ki(e){return e<0?Math.floor(e):Math.ceil(e)}function Pi(){var e,t,n,r,o,i=this._milliseconds,a=this._days,s=this._months,l=this._data;return i>=0&&a>=0&&s>=0||i<=0&&a<=0&&s<=0||(i+=864e5*ki(Ti(s)+a),a=0,s=0),l.milliseconds=i%1e3,e=ue(i/1e3),l.seconds=e%60,t=ue(e/60),l.minutes=t%60,n=ue(t/60),l.hours=n%24,a+=ue(n/24),s+=o=ue(Mi(a)),a-=ki(Ti(o)),r=ue(s/12),s%=12,l.days=a,l.months=s,l.years=r,this}function Mi(e){return 4800*e/146097}function Ti(e){return 146097*e/4800}function Ai(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if("month"===(e=oe(e))||"quarter"===e||"year"===e)switch(t=this._days+r/864e5,n=this._months+Mi(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Ti(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}}function Ni(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*de(this._months/12):NaN}function Ri(e){return function(){return this.as(e)}}var ji=Ri("ms"),Di=Ri("s"),Ii=Ri("m"),Fi=Ri("h"),Gi=Ri("d"),Li=Ri("w"),Hi=Ri("M"),Bi=Ri("Q"),Ui=Ri("y");function Vi(){return Pr(this)}function zi(e){return e=oe(e),this.isValid()?this[e+"s"]():NaN}function Yi(e){return function(){return this.isValid()?this._data[e]:NaN}}var $i=Yi("milliseconds"),Wi=Yi("seconds"),Ki=Yi("minutes"),qi=Yi("hours"),Xi=Yi("days"),Zi=Yi("months"),Ji=Yi("years");function Qi(){return ue(this.days()/7)}var ea=Math.round,ta={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function na(e,t,n,r,o){return o.relativeTime(t||1,!!n,e,r)}function ra(e,t,n,r){var o=Pr(e).abs(),i=ea(o.as("s")),a=ea(o.as("m")),s=ea(o.as("h")),l=ea(o.as("d")),c=ea(o.as("M")),u=ea(o.as("w")),d=ea(o.as("y")),f=i<=n.ss&&["s",i]||i<n.s&&["ss",i]||a<=1&&["m"]||a<n.m&&["mm",a]||s<=1&&["h"]||s<n.h&&["hh",s]||l<=1&&["d"]||l<n.d&&["dd",l];return null!=n.w&&(f=f||u<=1&&["w"]||u<n.w&&["ww",u]),(f=f||c<=1&&["M"]||c<n.M&&["MM",c]||d<=1&&["y"]||["yy",d])[2]=t,f[3]=+e>0,f[4]=r,na.apply(null,f)}function oa(e){return void 0===e?ea:"function"==typeof e&&(ea=e,!0)}function ia(e,t){return void 0!==ta[e]&&(void 0===t?ta[e]:(ta[e]=t,"s"===e&&(ta.ss=t-1),!0))}function aa(e,t){if(!this.isValid())return this.localeData().invalidDate();var n,r,o=!1,i=ta;return"object"==typeof e&&(t=e,e=!1),"boolean"==typeof e&&(o=e),"object"==typeof t&&(i=Object.assign({},ta,t),null!=t.s&&null==t.ss&&(i.ss=t.s-1)),r=ra(this,!o,i,n=this.localeData()),o&&(r=n.pastFuture(+this,r)),n.postformat(r)}var sa=Math.abs;function la(e){return(e>0)-(e<0)||+e}function ca(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,r,o,i,a,s,l=sa(this._milliseconds)/1e3,c=sa(this._days),u=sa(this._months),d=this.asSeconds();return d?(e=ue(l/60),t=ue(e/60),l%=60,e%=60,n=ue(u/12),u%=12,r=l?l.toFixed(3).replace(/\.?0+$/,""):"",o=d<0?"-":"",i=la(this._months)!==la(d)?"-":"",a=la(this._days)!==la(d)?"-":"",s=la(this._milliseconds)!==la(d)?"-":"",o+"P"+(n?i+n+"Y":"")+(u?i+u+"M":"")+(c?a+c+"D":"")+(t||e||l?"T":"")+(t?s+t+"H":"")+(e?s+e+"M":"")+(l?s+r+"S":"")):"P0D"}var ua=ar.prototype;return ua.isValid=or,ua.abs=Ei,ua.add=Si,ua.subtract=Ci,ua.as=Ai,ua.asMilliseconds=ji,ua.asSeconds=Di,ua.asMinutes=Ii,ua.asHours=Fi,ua.asDays=Gi,ua.asWeeks=Li,ua.asMonths=Hi,ua.asQuarters=Bi,ua.asYears=Ui,ua.valueOf=Ni,ua._bubble=Pi,ua.clone=Vi,ua.get=zi,ua.milliseconds=$i,ua.seconds=Wi,ua.minutes=Ki,ua.hours=qi,ua.days=Xi,ua.weeks=Qi,ua.months=Zi,ua.years=Ji,ua.humanize=aa,ua.toISOString=ca,ua.toString=ca,ua.toJSON=ca,ua.locale=ao,ua.localeData=lo,ua.toIsoString=C("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ca),ua.lang=so,B("X",0,0,"unix"),B("x",0,0,"valueOf"),De("x",Te),De("X",Re),He("X",(function(e,t,n){n._d=new Date(1e3*parseFloat(e))})),He("x",(function(e,t,n){n._d=new Date(de(e))})),
//! moment.js
r.version="2.29.1",o(qn),r.fn=ci,r.min=Qn,r.max=er,r.now=tr,r.utc=p,r.unix=ui,r.months=yi,r.isDate=d,r.locale=gn,r.invalid=m,r.duration=Pr,r.isMoment=O,r.weekdays=bi,r.parseZone=di,r.localeData=mn,r.isDuration=sr,r.monthsShort=mi,r.weekdaysMin=xi,r.defineLocale=vn,r.updateLocale=yn,r.locales=bn,r.weekdaysShort=wi,r.normalizeUnits=oe,r.relativeTimeRounding=oa,r.relativeTimeThreshold=ia,r.calendarFormat=Br,r.prototype=ci,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r}()}(aO);var sO=aO.exports;const lO=e=>{const{className:n,style:r,disabled:o,value:i,onChange:a}=e,[l,c]=t.useState(i?sO(i):void 0),u=t.useRef(!1);t.useEffect((()=>{if(!u.current)return void(u.current=!0);const e=sO(i);e.isValid()&&c(e)}),[i]);const f=t.useCallback(((e,t)=>{const n=sO(t);c(n.isValid()?n:void 0),"function"==typeof a&&a(n.isValid()?n.format("YYYY-MM-DD HH:mm:ss"):"")}),[a]);return d.default.createElement(s.DatePicker,{showTime:!0,allowClear:!0,className:n,style:r,disabled:o,value:l,onChange:f})};function cO(e){const t=Number(e);return Number.isNaN(t)?void 0:t}const uO=e=>{const{disabled:n,placeholder:r,value:o,onChange:i}=e,[a,l]=t.useState(cO(o)),c=t.useRef(!1);t.useEffect((()=>{c.current||(c.current=!0),l(cO(o))}),[o]);const u=t.useCallback((e=>{l(e),"function"==typeof i&&(void 0===e?i(""):"number"==typeof cO(e)&&i(cO(e)))}),[i]);return d.default.createElement(s.InputNumber,{style:{width:"100%"},size:"small",placeholder:r,value:a,onChange:u,disabled:n})};var dO;!function(e){e.INPUT="input",e.CHECKBOX="checkbox",e.TEXTAREA="textArea",e.SELECT="select",e.DATETIME="datetime",e.FLOAT="float"}(dO||(dO={}));var fO=Object.freeze({__proto__:null,get ControlShape(){return dO}});const hO=[[dO.INPUT,iO],[dO.CHECKBOX,e=>{const{controlSchema:t}=e,{required:n,tooltip:r,extra:o,name:i,label:a,rules:l}=t;return d.default.createElement(oO,{schema:t},(({hidden:e,disabled:t,initialValue:c})=>d.default.createElement(s.Form.Item,{className:"xflow-form-checkbox",name:i,rules:l,initialValue:c,tooltip:r,extra:rO(o),required:n,hidden:e,valuePropName:"checked",getValueProps:e=>({checked:!!{true:!0,false:!1}[e]})},d.default.createElement(s.Checkbox,{disabled:t},a))))}],[dO.TEXTAREA,e=>{const{controlSchema:t}=e,{required:n,tooltip:r,extra:o,name:i,label:a,placeholder:l,rules:c}=t;return d.default.createElement(oO,{schema:t},(({hidden:e,disabled:t,initialValue:u})=>d.default.createElement(s.Form.Item,{name:i,label:a,initialValue:u,tooltip:r,extra:rO(o),required:n,hidden:e,rules:c},d.default.createElement(s.Input.TextArea,{allowClear:!0,placeholder:l,rows:3,disabled:t}))))}],[dO.DATETIME,e=>{const{controlSchema:t}=e,{required:n,tooltip:r,extra:o,name:i,label:a,rules:l}=t;return d.default.createElement(oO,{schema:t},(({disabled:e,hidden:t,initialValue:c})=>d.default.createElement(s.Form.Item,{name:i,label:a,initialValue:c,tooltip:r,extra:rO(o),required:n,hidden:t,rules:l},d.default.createElement(lO,{style:{width:"100%"},disabled:e}))))}],[dO.SELECT,e=>{const{controlSchema:t}=e,{required:n,tooltip:r,extra:o,name:i,label:a,placeholder:l,options:c=[],rules:u}=t;return d.default.createElement(oO,{schema:t},(({hidden:e,disabled:t,initialValue:f})=>d.default.createElement(s.Form.Item,{name:i,label:a,initialValue:f,tooltip:r,extra:rO(o),required:n,hidden:e,rules:u},d.default.createElement(s.Select,{disabled:t,placeholder:l},c.map((e=>{const{title:t,value:n}=e;return d.default.createElement(s.Select.Option,{key:n.toString(),value:n},t)}))))))}],[dO.FLOAT,e=>{const{controlSchema:t}=e,{required:n,tooltip:r,extra:o,name:i,label:a,placeholder:l,rules:c}=t;return d.default.createElement(oO,{schema:t},(({disabled:e,hidden:t,initialValue:u})=>d.default.createElement(s.Form.Item,{name:i,label:a,initialValue:u,tooltip:r,extra:rO(o),required:n,hidden:t,rules:c},d.default.createElement(uO,{placeholder:l,disabled:e}))))}]],pO=e=>{const t=new Map;return e.forEach((e=>{const[n,r]=e,o=n.toLowerCase();t.has(o)&&console.error(`${n} is duplicated in controlMap:`,t),t.set(o,r)})),t},{TabPane:gO}=s.Tabs,vO=e=>{var n;const{schema:r,form:o,className:i,triggerUpdate:a,defaultControlRender:l,afterUpdatingCb:c,controlMap:u}=e,f=y(e,["schema","form","className","triggerUpdate","defaultControlRender","afterUpdatingCb","controlMap"]),{tabs:h}=r,[p]=s.Form.useForm(o),g=d.default.useMemo((()=>e.controlMap?e.controlMap:pO(hO)),[e.controlMap]),v=t.useCallback((e=>{"function"==typeof a&&a(p,e)}),[p,a]);t.useEffect((()=>{p.setFieldsValue({})}),[p]);const m=t.useCallback((()=>{requestAnimationFrame((()=>{p.setFieldsValue({})}))}),[p]);return d.default.createElement(s.Form,Object.assign({size:"small",form:p,layout:"vertical",className:_r("xflow-json-form",i)},f),d.default.createElement(s.Tabs,{type:"card",defaultActiveKey:null===(n=h[0])||void 0===n?void 0:n.name,className:_r({tabs:!0,xTab:!0,singleTab:1===(null==h?void 0:h.length),coupleTab:2===(null==h?void 0:h.length),ternateTab:3===(null==h?void 0:h.length)}),onTabClick:m},h.map((e=>{const{name:t,groups:n}=e;return d.default.createElement(gO,{key:t,tab:t},0===n.length&&d.default.createElement(s.Empty,{style:{padding:"24px 0"}}),n.length>0&&n.map((e=>{const{controls:t=[]}=e;return 0===t.length?d.default.createElement(s.Empty,{style:{padding:"24px 0"}}):t.map((e=>{const{shape:t,name:n}=e,r=((e,t,n=iO)=>{if(t.has(e))return t.get(e);const r=e.toLowerCase();return t.has(r)?t.get(r):(console.warn(`${e} is not exist in controlmap, fallback to defaultControl`),n)})(t,g,l);return r?d.default.createElement(r,{key:n,form:p,controlSchema:e,triggerUpdate:v,afterUpdatingCb:c}):(console.error("未找到对应的控件:",t),null)}))})))}))))},yO=e=>{const{schema:t={tabs:[]},triggerUpdate:n,onFieldsChange:r,afterUpdatingCb:o,defaultControlRender:i,loading:a,controlMapService:l,defaultControls:c=[]}=e,u=d.default.useMemo((()=>{const e=pO([...hO,...c]);return l&&l(e),e}),[l,c]);return a?d.default.createElement("div",{className:`${e.prefixClz}-body`,style:Object.assign(Object.assign({},e.style),{display:"flex",justifyContent:"center",alignItems:"center"})},d.default.createElement(s.Spin,{spinning:!0})):d.default.createElement("div",{className:`${e.prefixClz}-body`,style:e.style},t.tabs.length>0&&d.default.createElement(vO,{schema:t,onFieldsChange:r,controlMap:u,defaultControlRender:i,afterUpdatingCb:o,triggerUpdate:n}),0===t.tabs.length&&d.default.createElement(s.Empty,{style:{paddingTop:"64px"}}))};e.NsJsonSchemaFormModel=void 0,function(e){e.id="XFLOW_JSON_SCHEMA_FORM",e.useModel=t=>w(this,void 0,void 0,(function*(){return t.awaitModel(e.id)}))}(e.NsJsonSchemaFormModel||(e.NsJsonSchemaFormModel={}));const mO=t=>{const n=Wi(),{commandService:r,modelService:o}=n,{formSchemaService:i}=t,[a,s,l,c]=uw({schema:{tabs:[]},targetType:null,targetData:null,targetCell:null,loading:!1});return d.default.useEffect((()=>{if(!n||!n.modelService)return;const a=new Ir;if(!n.modelService.findDeferredModel(e.NsJsonSchemaFormModel.id)){const s=n.modelService.registerModel({id:e.NsJsonSchemaFormModel.id,modelFactory:()=>l,watchChange:(e,n)=>w(void 0,void 0,void 0,(function*(){const s=(yield dc.getModel(n)).watch((n=>w(void 0,void 0,void 0,(function*(){const a=(s=n)?s.isNode&&s.isNode()&&s.getProp("isGroup")?"group":s.isNode&&s.isNode()?"node":s.isEdge&&s.isEdge()?"edge":"canvas":"canvas";var s;(t.targetType||["node","canvas"]).includes(a)&&(yield((t,n)=>w(void 0,void 0,void 0,(function*(){e.setValue((e=>{e.loading=!0,e.schema={tabs:[]},e.targetType=null,e.targetData=null,e.targetCell=null}));const a=t?t.getData():null;if(!i)return;const s=yield i({commandService:r,modelService:o,targetData:a,cell:t,targetType:n});e.setValue({loading:!1,schema:s,targetType:n,targetCell:t,targetData:a})})))(n,a))}))));return jr.create((()=>{s.dispose(),a.push(s)}))}))});a.push(s)}return()=>{a.dispose()}}),[]),{commandService:r,modelService:o,state:a,setState:s,model:l,isModelReady:c}},bO=e=>{const{prefixClz:t}=e,{getCustomRenderComponent:n,afterUpdatingCb:r,formValueUpdateService:o=(()=>{})}=e,{state:i,commandService:a,modelService:s}=mO(e),l=d.default.useCallback(((e,t={})=>w(void 0,void 0,void 0,(function*(){e.setFieldsValue(t);const n=Object.entries(t).map((([e,t])=>({name:e,value:t}))),l=Object.entries(i.targetData).map((([e,t])=>({name:e,value:t}))),c=yield o({allFields:l,values:n,modelService:s,commandService:a,targetData:i.targetData,targetType:i.targetType});r&&r(c)}))),[r,a,o,s,i.targetData,i.targetType]),c=d.default.useCallback(((e,t)=>w(void 0,void 0,void 0,(function*(){const n=yield o({values:e,allFields:t,modelService:s,commandService:a,targetData:i.targetData,targetType:i.targetType});r&&r(n)}))),[r,a,o,s,i.targetData,i.targetType]),u=d.default.useMemo((()=>{try{return 0===i.schema.tabs.length||!i.schema}catch(e){return!0}}),[i.schema]),{headerStyle:f,bodyStyle:h,footerStyle:p}=((e,t)=>{const n=e&&e.headerPosition&&e.headerPosition.height||40,r=e.footerPosition&&e.footerPosition.height||40;return{headerStyle:Yc(Object.assign(Object.assign({height:0,top:0,left:0,right:0},t?{height:n,lineHeight:n}:{}),e.headerPosition)),bodyStyle:Yc(Object.assign(Object.assign({left:0,right:0,top:0},t?{top:n,bottom:r}:{bottom:r}),e.bodyPosition)),footerStyle:Yc(Object.assign(Object.assign({left:0,right:0,lineHeight:r,height:r,bottom:0},t?{lineHeight:r,height:r}:{bottom:0}),e.footerPosition))}})(e,u);if(n){const t=n(i.targetType,i.targetData,s,a);if(t)return d.default.createElement(t,Object.assign(Object.assign({},e),{headerStyle:f,bodyStyle:h,footerStyle:p,targetData:i.targetData,targetType:i.targetType,modelService:s,commandService:a}))}return d.default.createElement("div",{className:t},d.default.createElement(tO,Object.assign({hasSchema:!u},e,{state:i,style:f,prefixClz:e.prefixClz})),d.default.createElement(yO,Object.assign({},e,{key:i.targetData&&i.targetData.id,style:h,prefixClz:e.prefixClz,loading:i.loading,schema:i.schema,triggerUpdate:l,onFieldsChange:c})),d.default.createElement(eO,Object.assign({},e,{state:i,style:p})))},wO=e=>{const t=Uc("json-schema-form");return d.default.createElement(nx,Object.assign({},e,{className:t}),d.default.createElement(bO,Object.assign({},e,{prefixClz:t})))};n.Registry.Connector.registry.exist(ox)||n.Graph.registerConnector(ox,((e,t)=>{const r=Math.abs(t.y-e.y),o=Math.floor(r/3*2),i=e.x,a=e.y+16+o,s=t.x,l=t.y-16-o;return n.Path.normalize(`M ${e.x} ${e.y}\n         L ${e.x} ${e.y+16}\n         C ${i} ${a} ${s} ${l} ${t.x} ${t.y-16}\n         L ${t.x} ${t.y}\n        `)}),!0),n.Registry.Connector.registry.exist(ix)||n.Graph.registerConnector(ix,((e,t)=>{const r=Math.abs(t.y-e.y),o=e.x,i=e.y+4+r,a=t.x,s=t.y-4-r;return n.Path.normalize(`M ${e.x} ${e.y}\n       L ${e.x} ${e.y+4}\n       C ${o} ${i} ${a} ${s} ${t.x} ${t.y-4}\n       L ${t.x} ${t.y}\n      `)}),!0),n.Registry.Connector.registry.exist(rx)||n.Graph.registerConnector(rx,((e,t)=>{const r=Math.abs(t.y-e.y),o=Math.floor(r/3*2),i=e.x,a=e.y+4+o,s=t.x,l=t.y-4-o;return n.Path.normalize(`M ${e.x} ${e.y}\n         L ${e.x} ${e.y+4}\n         C ${i} ${a} ${s} ${l} ${t.x} ${t.y-4}\n         L ${t.x} ${t.y}\n        `)}),!0);let xO=n.Shape.Edge.registry.get(ax);n.Shape.Edge.registry.exist(ax)||(xO=n.Shape.Edge.registry.register(ax,n.Shape.Edge.define({zIndex:1,highlight:!1,connector:{name:ox},shape:ax}),!0)),e.NsGraphStatusCommand=void 0,function(t){let n;t.MODEL=e.GRAPH_STATUS_INFO,t.command=e.XFlowDagCommands.QUERY_GRAPH_STATUS,t.hookKey="queryGraphStatus",function(e){e.SUCCESS="success",e.PROCESSING="processing",e.ERROR="error",e.DEFAULT="default",e.WARNING="warning"}(n=t.StatusEnum||(t.StatusEnum={})),t.initStatusMap=()=>({[t.StatusEnum.DEFAULT]:[],[t.StatusEnum.PROCESSING]:[],[t.StatusEnum.ERROR]:[],[t.StatusEnum.WARNING]:[],[t.StatusEnum.SUCCESS]:[]}),t.groupByStatus=e=>{const n=t.initStatusMap();return Object.entries(e).reduce(((e,[t,n])=>(e[n.status].push(t),e)),n)},t.statusDiff=(e,t)=>{const n=new Set([...e,...t]),r={current:[],add:[],remove:[]};return n.forEach((n=>{t.includes(n)&&!e.includes(n)&&r.add.push(n),!t.includes(n)&&e.includes(n)&&r.remove.push(n)})),r},t.shouldStop=e=>w(this,void 0,void 0,(function*(){return[n.ERROR,n.SUCCESS].includes(e.graphStatus)}))}(e.NsGraphStatusCommand||(e.NsGraphStatusCommand={}));let _O=class{constructor(){this.statusInfo=e.NsGraphStatusCommand.initStatusMap(),this.getStatusModel=()=>w(this,void 0,void 0,(function*(){const t=this.contextProvider().getModelService();return yield e.GRAPH_STATUS_INFO.getModel(t)})),this.updateModelValue=e=>w(this,void 0,void 0,(function*(){(yield this.getStatusModel()).setValue(e)})),this.stopCurrentStatusLooping=()=>w(this,void 0,void 0,(function*(){const e=yield this.getStatusModel(),{subscription:t}=yield e.getValidValue();t.dispose()})),this.addStopDispose=()=>w(this,void 0,void 0,(function*(){const t=yield this.getStatusModel(),{subscription:n}=yield t.getValidValue();n.push({dispose:()=>{this.updateEdges(this.statusInfo,e.NsGraphStatusCommand.initStatusMap()),this.isLooping=!1}})})),this.updateGraph=(e,t,n)=>{this.updateNodes(e,t,n),this.updateEdges(e,t)},this.updateNodeData=(e,t)=>{const n=this.x6Graph.getCellById(e);n&&n.setData(Object.assign(Object.assign(Object.assign(Object.assign({},n.getData()),n.getSize()),n.getPosition()),t))},this.updateNodes=(t,n,r)=>{Object.keys(t).forEach((o=>{const i=e.NsGraphStatusCommand.statusDiff(t[o],n[o]);i.add.forEach((e=>{this.updateNodeData(e,r[e])})),i.remove.forEach((e=>{this.updateNodeData(e,r[e])}))}))},this.updateEdges=(t,n)=>{const r=e.NsGraphStatusCommand.statusDiff(t.processing,n.processing);this.x6Graph.getEdges().forEach((e=>{var t;const n=null===(t=this.x6Graph)||void 0===t?void 0:t.findViewByCell(e.id),o=e.getTargetCellId();if(!o)return;const i=o.toString();return n?r.add.includes(i)?n.addClass(lx):r.remove.includes(i)?n.removeClass(lx):void 0:void 0}))},this.execute=()=>w(this,void 0,void 0,(function*(){const t=this.contextProvider(),{args:n,hooks:r}=t.getArgs(),o=t.getHooks();this.x6Graph=yield t.getX6Graph();const i=yield o.queryGraphStatus.call(n,(t=>w(this,void 0,void 0,(function*(){const{graphStatusService:n,shouldStop:r=e.NsGraphStatusCommand.shouldStop,doOnce:o}=t;yield this.stopCurrentStatusLooping();const i=(n,o=1e4)=>w(this,void 0,void 0,(function*(){const a=yield n(t);this.updateModelValue((e=>{Object.entries(a.statusMap).forEach((([t,n])=>{e.statusMap.set(t,n)})),e.graphStatus=a.graphStatus}));const s=e.NsGraphStatusCommand.groupByStatus(a.statusMap);var l;if(this.updateGraph(this.statusInfo,s,a.statusMap),this.statusInfo=s,yield(l=o,new Promise((e=>setTimeout((()=>e(!0)),l)))),this.isLooping){if(r){if(yield r(a,t))return}yield i(n,o)}}));return this.isLooping=void 0===t.loop||t.loop,yield this.addStopDispose(),o&&(yield o(t)),i(n,t.loopInterval),{}}))),r);return t.setResult(i),this})),this.undo=()=>w(this,void 0,void 0,(function*(){const e=this.contextProvider();return this.isUndoable()&&e.undo(),this})),this.redo=()=>w(this,void 0,void 0,(function*(){return this.isUndoable()||(yield this.execute()),this}))}isUndoable(){return this.contextProvider().isUndoable()}};var EO;m([nr(Js),b("design:type",Object)],_O.prototype,"contextProvider",void 0),_O=m([er({token:{token:Zs,named:e.NsGraphStatusCommand.command.id}})],_O),function(e){e.EVENT_NAME="ADD_EDGE_CMD_EVENT"}(EO||(EO={}));const OO={grid:!1,keyboard:{enabled:!0},selecting:{enabled:!0,multiple:!0,selectCellOnMoved:!0,showNodeSelectionBox:!1,rubberEdge:!0,rubberNode:!0,movable:!0},connecting:{sourceAnchor:"bottom",targetAnchor:"center",connectionPoint:"anchor",snap:{radius:20},router:{name:"manhattan"},connector:{name:ox,args:{radius:15}},highlight:!0,dangling:!1,createEdge(){const e=this,t=new xO({attrs:{line:{strokeDasharray:"5 5",stroke:"#888",strokeWidth:1,targetMarker:{name:"block",args:{size:"6"}}}}});return e.once("edge:connected",(n=>{const{isNew:r}=n,o=n.edge;if(r&&o.isEdge()){const n=o.getTargetPortId(),r=o.getTargetCell();if(r&&r.isNode()){r.setPortProp(n,"connected",!1),o.attr({line:{strokeDasharray:"",targetMarker:"",stroke:"#d5d5d5"}});const i=o.getTargetPortId(),a=o.getSourcePortId(),s=o.getSourceCellId(),l=o.getTargetCellId();e.trigger(EO.EVENT_NAME,{targetPortId:i,sourcePortId:a,source:s,target:l,edge:t})}}})),t},validateEdge:e=>{var t;const{edge:n}=e;return!!(null===(t=null==n?void 0:n.target)||void 0===t?void 0:t.port)},validateMagnet:({magnet:e})=>e.getAttribute("port-group")!==yr.AnchorGroup.TOP,validateConnection({sourceView:e,targetView:t,sourceMagnet:n,targetMagnet:r}){if(e===t)return!1;if(!n||n.getAttribute("port-group")===yr.AnchorGroup.TOP)return!1;if(!r||r.getAttribute("port-group")!==yr.AnchorGroup.TOP)return!1;const o=t.cell,i=r.getAttribute("port"),a=o.getPort(i);return!(a&&a.connected)}},highlighting:{nodeAvailable:{name:"className",args:{className:"available"}},magnetAvailable:{name:"className",args:{className:"available"}},magnetAdsorbed:{name:"className",args:{className:"adsorbed"}}},scaling:{max:1.05,min:.01}};let SO=class{constructor(){this.registerGraphCommands=t=>{t.registerCommand(e.NsGraphStatusCommand.command,{createCommand:this.commandFactory})},this.toDispose=new Ir,this.registerHook=e=>w(this,void 0,void 0,(function*(){const t=new Ir,n=[e.addNode.registerHook({name:"dag-add-node",handler:e=>w(this,void 0,void 0,(function*(){e.cellFactory=e=>w(this,void 0,void 0,(function*(){return new ux(Object.assign({},e))}))}))}),e.addEdge.registerHook({name:"dag-add-edge",handler:e=>w(this,void 0,void 0,(function*(){e.cellFactory=e=>w(this,void 0,void 0,(function*(){return new xO(Object.assign(Object.assign({},e),{id:e.id,source:{cell:e.source,port:e.sourcePortId,anchor:{name:"bottom"}},target:{cell:e.target,port:e.targetPortId,anchor:{name:"center"}},attrs:{line:{strokeDasharray:"",targetMarker:"",stroke:"#d5d5d5",strokeWidth:1}},data:Object.assign({},e)}))}))}))}),e.addEdge.registerHook({name:"after add edge, set target port props",handler:(e,t)=>w(this,void 0,void 0,(function*(){return e=>w(this,void 0,void 0,(function*(){const n=yield t(e),r=n.edgeCell.getTargetCell(),o=n.edgeCell.getTargetPortId();return r.setPortProp(o,"connected",!0),n}))}))}),e.delEdge.registerHook({name:"afetr del edge, reset target node port props",handler:(e,t)=>w(this,void 0,void 0,(function*(){return e=>w(this,void 0,void 0,(function*(){const n=yield t(e),{targetCell:r,targetPortId:o}=n;return r&&r.isNode()&&o&&r.setPortProp(o,"connected",!1),n}))}))}),e.afterGraphInit.registerHook({name:"call add edge to replace temp edge",handler:e=>w(this,void 0,void 0,(function*(){const{commandService:t,graph:n}=e;n.on(EO.EVENT_NAME,(e=>{t.executeCommand(qi.ADD_EDGE.id,{edgeConfig:e}),e.edge.remove()}))}))}),e.graphOptions.registerHook({name:"dag-extension-x6-options",handler:e=>w(this,void 0,void 0,(function*(){Object.assign(e,OO)}))})];return t.pushAll(n),jr.create((()=>{}))})),this.registerHookHub=t=>w(this,void 0,void 0,(function*(){return t.registerHookHub(e.NsGraphStatusCommand.hookKey,new ml)}))}registerModel(t){t.registerModel({id:e.GRAPH_STATUS_INFO.id,getInitialValue:()=>({statusMap:new Map,subscription:new Ir,graphStatus:e.GRAPH_STATUS_INFO.StatusEnum.DEFAULT}),watchChange:e=>w(this,void 0,void 0,(function*(){const{subscription:t}=yield e.getValidValue();return t}))})}};m([nr(Qs),b("design:type",Function)],SO.prototype,"commandFactory",void 0),SO=m([tr({contrib:[wl,ll,el]})],SO);const CO=()=>pr((e=>{e(SO),e(_O)})),kO="XFLOW_FLOW_NODE_SHAPE";let PO;const{AnchorGroup:MO}=yr,TO={circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}};PO=n.Node.registry.exist(kO)?n.Node.registry.get(kO):o.ReactShape.define({width:150,height:60,shape:kO,view:Gr,ports:{groups:{top:{position:MO.TOP,attrs:TO},bottom:{position:MO.BOTTOM,attrs:TO},right:{position:MO.RIGHT,attrs:TO},left:{position:MO.LEFT,attrs:TO}}},attrs:{body:{magnet:!1,fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"}}});const AO={grid:!0,mousewheel:{enabled:!0,zoomAtMousePosition:!0,modifiers:"ctrl",minScale:.5,maxScale:3},connecting:{router:"manhattan",connector:{name:"rounded",args:{radius:8}},anchor:"center",connectionPoint:"anchor",allowBlank:!1,snap:{radius:20},createEdge:()=>new n.Shape.Edge({attrs:{line:{stroke:"#A2B1C3",strokeWidth:2,targetMarker:{name:"block",width:12,height:8}}},zIndex:0}),validateConnection:({targetMagnet:e})=>!!e},highlighting:{magnetAdsorbed:{name:"stroke",args:{attrs:{fill:"#5F95FF",stroke:"#5F95FF"}}}},resizing:!0,rotating:!0,selecting:{enabled:!0,rubberband:!0,showNodeSelectionBox:!0,modifiers:"shift"},snapline:!0,keyboard:!0,clipboard:!0};let NO=class{constructor(){this.toDispose=new Ir,this.registerHookHub=()=>w(this,void 0,void 0,(function*(){return jr.create((()=>{}))})),this.registerHook=e=>w(this,void 0,void 0,(function*(){const t=new Ir,r=[e.addNode.registerHook({name:"flow-add-node",handler:e=>w(this,void 0,void 0,(function*(){e.cellFactory=e=>w(this,void 0,void 0,(function*(){return new PO(Object.assign({},e))}))}))}),e.addEdge.registerHook({name:"flow-add-edge",handler:e=>w(this,void 0,void 0,(function*(){e.cellFactory=e=>w(this,void 0,void 0,(function*(){delete e.id;return new n.Shape.Edge({source:{cell:e.source,port:e.sourcePortId},target:{cell:e.target,port:e.targetPortId},attrs:{line:{stroke:"#A2B1C3",strokeWidth:2,targetMarker:{name:"block",width:12,height:8}}},zIndex:-1,data:Object.assign({},e)})}))}))}),e.graphOptions.registerHook({name:"assign options ",handler:e=>w(this,void 0,void 0,(function*(){Object.assign(e,AO)}))})];return t.pushAll(r),jr.create((()=>{}))}))}};NO=m([tr({contrib:wl})],NO);const RO=()=>pr((e=>{e(NO)})),jO="xflow-node-panel-collpase",DO=60,IO=40,FO={stroke:"#A2B1C3",fill:"#FFFFFF",fontFill:"#000",fontSize:12,label:""},GO=[{name:"Terminal"},{name:"Process"},{name:"Decision"},{name:"Multi Document"},{name:"Connector",width:IO,height:IO},{name:"DataIO",ports:["top","bottom"]},{name:"Database"},{name:"Hard Disk"},{name:"Stroed Data"},{name:"Document"},{name:"Predefined Process"},{name:"Extract"},{name:"Merge"},{name:"Or",width:IO,height:IO},{name:"Manual Input"},{name:"Preparation"},{name:"Delay"},{name:"Manual Operation"},{name:"Display"},{name:"Off Page Link"},{name:"Note Left",label:"≣"},{name:"Note Right",label:"≣"},{name:"Internal Storage"},{name:"Text",label:"text"}],LO=["Connector","Or"];var HO=Object.freeze({__proto__:null,ProcessNode:e=>{const{size:t={width:DO,height:IO},data:n={}}=e,{stroke:r=FO.stroke,label:o=FO.label,fill:i=FO.fill,fontFill:a=FO.fontFill,fontSize:s=FO.fontSize}=n,{width:l,height:c}=t,u=[["M",1,1],["L",l-2,1],["L",l-2,c-2],["L",1,c-2],["Z"]];return d.default.createElement("svg",{viewBox:`0 0 ${l} ${c}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},d.default.createElement("path",{d:YO(u),fill:i,stroke:r}),d.default.createElement("text",{x:l/2,y:c/2,fill:a,textAnchor:"middle",alignmentBaseline:"middle",fontSize:s},o),"Sorry, your browser does not support inline SVG.")},DecisionNode:e=>{const{size:t={width:DO,height:IO},data:n={}}=e,{stroke:r=FO.stroke,label:o=FO.label,fill:i=FO.fill,fontFill:a=FO.fontFill,fontSize:s=FO.fontSize}=n,{width:l,height:c}=t,u=[["M",l/2,1],["L",l-2,c/2],["L",l/2,c-2],["L",1,c/2],["Z"]];return d.default.createElement("svg",{viewBox:`0 0 ${l} ${c}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},d.default.createElement("path",{d:YO(u),fill:i,stroke:r}),d.default.createElement("text",{x:l/2,y:c/2,fill:a,textAnchor:"middle",alignmentBaseline:"middle",fontSize:s},o),"Sorry, your browser does not support inline SVG.")},ConnectorNode:e=>{const{size:t={width:DO,height:IO},data:n={}}=e,{stroke:r=FO.stroke,label:o=FO.label,fill:i=FO.fill,fontFill:a=FO.fontFill,fontSize:s=FO.fontSize}=n,{width:l,height:c}=t,u=c-2;return d.default.createElement("svg",{viewBox:`0 0 ${l} ${c}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},d.default.createElement("path",{d:`M 1,${c/2} a ${u/2} ${u/2} 0 1 1 0 1 z`,fill:i,stroke:r}),d.default.createElement("text",{x:c/2,y:c/2,fill:a,textAnchor:"middle",alignmentBaseline:"middle",fontSize:s},o),"Sorry, your browser does not support inline SVG.")},DataIONode:e=>{const{size:t={width:DO,height:IO},data:n={}}=e,{stroke:r=FO.stroke,label:o=FO.label,fill:i=FO.fill,fontFill:a=FO.fontFill,fontSize:s=FO.fontSize}=n,{width:l,height:c}=t,u=c/2,f=[["M",u-1,1],["L",l-2,1],["L",l-u,c-2],["L",1,c-2],["Z"]];return d.default.createElement("svg",{viewBox:`0 0 ${l} ${c}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},d.default.createElement("path",{d:YO(f),fill:i,stroke:r}),d.default.createElement("text",{x:l/2,y:c/2,fill:a,textAnchor:"middle",alignmentBaseline:"middle",fontSize:s},o),"Sorry, your browser does not support inline SVG.")},TerminalNode:e=>{const{size:t={width:DO,height:IO},data:n={}}=e,{stroke:r=FO.stroke,label:o=FO.label,fill:i=FO.fill,fontFill:a=FO.fontFill,fontSize:s=FO.fontSize}=n,{width:l,height:c}=t,u=Math.min(c,l)/2,f=[["M",u,1],["L",l-u,1],["C",l-2,1,l-2,c/2],["",l-2,c/2],["C",l-2,c/2,l-2,c-2],["",l-u,c-2],["L",u,c-2],["C",1,c-2,1,c/2],["",1,c/2],["C",1,c/2,1,1],["",u,1]];return d.default.createElement("svg",{viewBox:`0 0 ${l} ${c}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},d.default.createElement("path",{d:YO(f),fill:i,stroke:r}),d.default.createElement("text",{x:l/2,y:c/2,fill:a,textAnchor:"middle",alignmentBaseline:"middle",fontSize:s},o),"Sorry, your browser does not support inline SVG.")},DatabaseNode:e=>{const{size:t={width:DO,height:IO},data:n={}}=e,{stroke:r=FO.stroke,label:o=FO.label,fill:i=FO.fill,fontFill:a=FO.fontFill,fontSize:s=FO.fontSize}=n,{width:l,height:c}=t,u=l/4,f=Math.min(c/10,12),h=[["M",1,1+f],["C",1+u,1,1+l-u,1],["",l-2,1+f],["L",l-2,c-2-f],["C",l-2-u,c-2,1+u,c-2],["",1,c-2-f],["Z"]],p=[["M",1,1+f],["C",1+u,1+2*f,1+l-u,1+2*f],["",l-2,1+f]];return d.default.createElement("svg",{viewBox:`0 0 ${l} ${c}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},d.default.createElement("path",{d:YO(h),fill:i,stroke:r}),d.default.createElement("path",{d:YO(p),fill:i,stroke:r}),d.default.createElement("text",{x:l/2,y:c/2,fill:a,textAnchor:"middle",alignmentBaseline:"middle",fontSize:s},o),"Sorry, your browser does not support inline SVG.")},HardDiskNode:e=>{const{size:t={width:DO,height:IO},data:n={}}=e,{stroke:r=FO.stroke,label:o=FO.label,fill:i=FO.fill,fontFill:a=FO.fontFill,fontSize:s=FO.fontSize}=n,{width:l,height:c}=t,u=Math.min(l/10,c/4),f=Math.min(c/4,l/4),h=[["M",1+u,1],["L",l-2-u,1],["C",l-2,1+f,l-2,c-2-f],["",l-2-u,c-2],["L",1+u,c-2],["C",1,c-2-f,1,1+f],["",1+u,1]],p=[["M",l-2-u,1],["C",l-2-2*u,1+f,l-2-2*u,c-2-f],["",l-2-u,c-2]];return d.default.createElement("svg",{viewBox:`0 0 ${l} ${c}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},d.default.createElement("path",{d:YO(h),fill:i,stroke:r}),d.default.createElement("path",{d:YO(p),fill:i,stroke:r}),d.default.createElement("text",{x:l/2,y:c/2,fill:a,textAnchor:"middle",alignmentBaseline:"middle",fontSize:s},o),"Sorry, your browser does not support inline SVG.")},StroedDataNode:e=>{const{size:t={width:DO,height:IO},data:n={}}=e,{stroke:r=FO.stroke,label:o=FO.label,fill:i=FO.fill,fontFill:a=FO.fontFill,fontSize:s=FO.fontSize}=n,{width:l,height:c}=t,u=Math.min(l/10,c/4),f=Math.min(c/4,l/4),h=[["M",1+u,1],["L",l-2-u,1],["C",l-2-2*u,1+f,l-2-2*u,c-2-f],["",l-2-u,c-2],["L",1+u,c-2],["C",1,c-2-f,1,1+f],["",1+u,1]];return d.default.createElement("svg",{viewBox:`0 0 ${l} ${c}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},d.default.createElement("path",{d:YO(h),fill:i,stroke:r}),d.default.createElement("text",{x:l/2,y:c/2,fill:a,textAnchor:"middle",alignmentBaseline:"middle",fontSize:s},o),"Sorry, your browser does not support inline SVG.")},DocumentNode:e=>{const{size:t={width:DO,height:IO},data:n={}}=e,{stroke:r=FO.stroke,label:o=FO.label,fill:i=FO.fill,fontFill:a=FO.fontFill,fontSize:s=FO.fontSize}=n,{width:l,height:c}=t,u=l/8,f=c/8,h=[["M",1,1],["L",l-2,1],["L",l-2,c-2-f],["C",l-2-u,c-2-2*f,l/2+u,c-2-2*f],["",l/2,c-2-f],["S",l/4,c-2,1,c-2-2*f],["L",1,1]];return d.default.createElement("svg",{viewBox:`0 0 ${l} ${c}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},d.default.createElement("path",{d:YO(h),fill:i,stroke:r}),d.default.createElement("text",{x:l/2,y:c/2,fill:a,textAnchor:"middle",alignmentBaseline:"middle",fontSize:s},o),"Sorry, your browser does not support inline SVG.")},MultiDocumentNode:e=>{const{size:t={width:DO,height:IO},data:n={}}=e,{stroke:r=FO.stroke,label:o=FO.label,fill:i=FO.fill,fontFill:a=FO.fontFill,fontSize:s=FO.fontSize}=n;let{width:l,height:c}=t;l+=6,c+=6;const u=l/8,f=c/8,h=[["M",4,1],["L",l-2,1],["L",l-2,c-2-f],["C",l-2-u,c-2-2*f,l/2+u,c-2-2*f],["",l/2,c-2-f],["S",l/4,c-2,4,c-2-2*f],["L",4,1]];return d.default.createElement("svg",{viewBox:`0 0 ${l} ${c}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},d.default.createElement("path",{d:YO(h),fill:i,stroke:r}),d.default.createElement("path",{d:YO(h,-3,3),fill:i,stroke:r}),d.default.createElement("text",{x:l/2,y:c/2,fill:a,textAnchor:"middle",alignmentBaseline:"middle",fontSize:s},o),"Sorry, your browser does not support inline SVG.")},PredefinedProcessNode:e=>{const{size:t={width:DO,height:IO},data:n={}}=e,{stroke:r=FO.stroke,label:o=FO.label,fill:i=FO.fill,fontFill:a=FO.fontFill,fontSize:s=FO.fontSize}=n,{width:l,height:c}=t,u=l/8,f=[["M",1,1],["L",l-2,1],["L",l-2,c-2],["L",1,c-2],["Z"]],h=[["M",u,1],["L",u,c-2]],p=[["M",l-u,1],["L",l-u,c-2]];return d.default.createElement("svg",{viewBox:`0 0 ${l} ${c}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},d.default.createElement("path",{d:YO(f),fill:i,stroke:r}),d.default.createElement("path",{d:YO(h),stroke:r}),d.default.createElement("path",{d:YO(p),stroke:r}),d.default.createElement("text",{x:l/2,y:c/2,fill:a,textAnchor:"middle",alignmentBaseline:"middle",fontSize:s},o),"Sorry, your browser does not support inline SVG.")},ExtractNode:e=>{const{size:t={width:DO,height:IO},data:n={}}=e,{stroke:r=FO.stroke,label:o=FO.label,fill:i=FO.fill,fontFill:a=FO.fontFill,fontSize:s=FO.fontSize}=n,{width:l,height:c}=t,u=[["M",l/2,1],["L",l-2,c-2],["L",1,c-2],["Z"]];return d.default.createElement("svg",{viewBox:`0 0 ${l} ${c}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},d.default.createElement("path",{d:YO(u),fill:i,stroke:r}),d.default.createElement("text",{x:l/2,y:c/2,fill:a,textAnchor:"middle",alignmentBaseline:"middle",fontSize:s},o),"Sorry, your browser does not support inline SVG.")},MergeNode:e=>{const{size:t={width:DO,height:IO},data:n={}}=e,{stroke:r=FO.stroke,label:o=FO.label,fill:i=FO.fill,fontFill:a=FO.fontFill,fontSize:s=FO.fontSize}=n,{width:l,height:c}=t,u=[["M",1,1],["L",l-2,1],["L",l/2,c-2],["Z"]];return d.default.createElement("svg",{viewBox:`0 0 ${l} ${c}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},d.default.createElement("path",{d:YO(u),fill:i,stroke:r}),d.default.createElement("text",{x:l/2,y:c/2,fill:a,textAnchor:"middle",alignmentBaseline:"middle",fontSize:s},o),"Sorry, your browser does not support inline SVG.")},OrNode:e=>{const{size:t={width:DO,height:IO},data:n={}}=e,{stroke:r=FO.stroke,label:o=FO.label,fill:i=FO.fill,fontFill:a=FO.fontFill,fontSize:s=FO.fontSize}=n,{width:l,height:c}=t,u=[["M",c/2,1],["L",c/2,c-2]],f=[["M",1,c/2],["L",c-2,c/2]],h=c-2;return d.default.createElement("svg",{viewBox:`0 0 ${l} ${c}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},d.default.createElement("path",{d:`M 1,${c/2} a ${h/2} ${h/2} 0 1 1 0 1 z`,fill:i,stroke:r}),d.default.createElement("path",{d:YO(u),stroke:r}),d.default.createElement("path",{d:YO(f),stroke:r}),d.default.createElement("text",{x:l/2,y:c/2,fill:a,textAnchor:"middle",alignmentBaseline:"middle",fontSize:s},o),"Sorry, your browser does not support inline SVG.")},ManualInputNode:e=>{const{size:t={width:DO,height:IO},data:n={}}=e,{stroke:r=FO.stroke,label:o=FO.label,fill:i=FO.fill,fontFill:a=FO.fontFill,fontSize:s=FO.fontSize}=n,{width:l,height:c}=t,u=[["M",1,c/5],["L",l-2,1],["L",l-2,c-2],["L",1,c-2],["Z"]];return d.default.createElement("svg",{viewBox:`0 0 ${l} ${c}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},d.default.createElement("path",{d:YO(u),fill:i,stroke:r}),d.default.createElement("text",{x:l/2,y:c/2,fill:a,textAnchor:"middle",alignmentBaseline:"middle",fontSize:s},o),"Sorry, your browser does not support inline SVG.")},PreparationNode:e=>{const{size:t={width:DO,height:IO},data:n={}}=e,{stroke:r=FO.stroke,label:o=FO.label,fill:i=FO.fill,fontFill:a=FO.fontFill,fontSize:s=FO.fontSize}=n,{width:l,height:c}=t,u=Math.tan(Math.PI/6)*(c/2),f=[["M",u,1],["L",l-u,1],["L",l-2,c/2],["L",l-u,c-2],["L",u,c-2],["L",1,c/2],["Z"]];return d.default.createElement("svg",{viewBox:`0 0 ${l} ${c}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},d.default.createElement("path",{d:YO(f),fill:i,stroke:r}),d.default.createElement("text",{x:l/2,y:c/2,fill:a,textAnchor:"middle",alignmentBaseline:"middle",fontSize:s},o),"Sorry, your browser does not support inline SVG.")},DelayNode:e=>{const{size:t={width:DO,height:IO},data:n={}}=e,{stroke:r=FO.stroke,label:o=FO.label,fill:i=FO.fill,fontFill:a=FO.fontFill,fontSize:s=FO.fontSize}=n,{width:l,height:c}=t,u=Math.min(c,l)/2,f=[["M",1,1],["L",l-u,1],["C",l-2,1,l-2,c/2],["",l-2,c/2],["C",l-2,c/2,l-2,c-2],["",l-u,c-2],["L",1,c-2],["Z"]];return d.default.createElement("svg",{viewBox:`0 0 ${l} ${c}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},d.default.createElement("path",{d:YO(f),fill:i,stroke:r}),d.default.createElement("text",{x:l/2,y:c/2,fill:a,textAnchor:"middle",alignmentBaseline:"middle",fontSize:s},o),"Sorry, your browser does not support inline SVG.")},ManualOperationNode:e=>{const{size:t={width:DO,height:IO},data:n={}}=e,{stroke:r=FO.stroke,label:o=FO.label,fill:i=FO.fill,fontFill:a=FO.fontFill,fontSize:s=FO.fontSize}=n,{width:l,height:c}=t,u=Math.min(Math.tan(Math.PI/6)*c,l/2),f=[["M",1,1],["L",l-2,1],["L",l-u,c-2],["L",u,c-2],["Z"]];return d.default.createElement("svg",{viewBox:`0 0 ${l} ${c}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},d.default.createElement("path",{d:YO(f),fill:i,stroke:r}),d.default.createElement("text",{x:l/2,y:c/2,fill:a,textAnchor:"middle",alignmentBaseline:"middle",fontSize:s},o),"Sorry, your browser does not support inline SVG.")},DisplayNode:e=>{const{size:t={width:DO,height:IO},data:n={}}=e,{stroke:r=FO.stroke,label:o=FO.label,fill:i=FO.fill,fontFill:a=FO.fontFill,fontSize:s=FO.fontSize}=n,{width:l,height:c}=t,u=Math.min(c,l)/3,f=Math.min(Math.tan(Math.PI/6)*(c/2),l/3),h=[["M",f,1],["L",l-u,1],["C",l-2,1,l-2,c/2],["",l-2,c/2],["C",l-2,c/2,l-2,c-2],["",l-u,c-2],["L",f,c-2],["L",1,c/2],["Z"]];return d.default.createElement("svg",{viewBox:`0 0 ${l} ${c}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},d.default.createElement("path",{d:YO(h),fill:i,stroke:r}),d.default.createElement("text",{x:l/2,y:c/2,fill:a,textAnchor:"middle",alignmentBaseline:"middle",fontSize:s},o),"Sorry, your browser does not support inline SVG.")},OffPageLinkNode:e=>{const{size:t={width:DO,height:IO},data:n={}}=e,{stroke:r=FO.stroke,label:o=FO.label,fill:i=FO.fill,fontFill:a=FO.fontFill,fontSize:s=FO.fontSize}=n,{width:l,height:c}=t,u=Math.min(Math.tan(Math.PI/6)*(l/2),c/4),f=[["M",1,1],["L",l-2,1],["L",l-2,c-u],["L",l/2,c-2],["L",1,c-u],["Z"]];return d.default.createElement("svg",{viewBox:`0 0 ${l} ${c}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},d.default.createElement("path",{d:YO(f),fill:i,stroke:r}),d.default.createElement("text",{x:l/2,y:c/2,fill:a,textAnchor:"middle",alignmentBaseline:"middle",fontSize:s},o),"Sorry, your browser does not support inline SVG.")},NoteLeftNode:e=>{const{size:t={width:DO,height:IO},data:n={}}=e,{stroke:r=FO.stroke,label:o=FO.label,fill:i="transparent",fontFill:a=FO.fontFill,fontSize:s=FO.fontSize}=n,{width:l,height:c}=t,u=l-2,f=[["M",u,1],["C",u-6,1,u-6,6],["",u-6,(c-6)/2],["L",u-12,c/2],["L",u-6,(c+6)/2],["L",u-6,c-2-6],["C",u-6,c-2,u,c-2],["",u,c-2]];return d.default.createElement("svg",{viewBox:`0 0 ${l} ${c}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},d.default.createElement("path",{d:YO(f),fill:i,stroke:r}),d.default.createElement("text",{x:l/2,y:c/2,fill:a,textAnchor:"middle",alignmentBaseline:"middle",fontSize:s},o),"Sorry, your browser does not support inline SVG.")},NoteRightNode:e=>{const{size:t={width:DO,height:IO},data:n={}}=e,{stroke:r=FO.stroke,label:o=FO.label,fill:i="transparent",fontFill:a=FO.fontFill,fontSize:s=FO.fontSize}=n,{width:l,height:c}=t,u=[["M",1,1],["C",6,1,6,6],["",6,(c-6)/2],["L",12,c/2],["L",6,(c+6)/2],["L",6,c-2-6],["C",6,c-2,1,c-2],["",1,c-2]];return d.default.createElement("svg",{viewBox:`0 0 ${l} ${c}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},d.default.createElement("path",{d:YO(u),fill:i,stroke:r}),d.default.createElement("text",{x:l/2,y:c/2,fill:a,textAnchor:"middle",alignmentBaseline:"middle",fontSize:s},o),"Sorry, your browser does not support inline SVG.")},InternalStorageNode:e=>{const{size:t={width:DO,height:IO},data:n={}}=e,{stroke:r=FO.stroke,label:o=FO.label,fill:i=FO.fill,fontFill:a=FO.fontFill,fontSize:s=FO.fontSize}=n,{width:l,height:c}=t,u=l-2,f=c-2,h=[["M",1,1],["L",u-6,1],["C",u,1,u,6],["",u,c/2],["L",u,f-6],["C",u,f,u-6,f],["",u-6,f],["L",6,f],["C",1,f,1,f-6],["",1,f-6],["Z"]];return d.default.createElement("svg",{viewBox:`0 0 ${l} ${c}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},d.default.createElement("path",{d:YO(h),fill:i,stroke:r}),d.default.createElement("path",{d:`M 1,6 L ${u-1} 6 `,fill:i,stroke:r}),d.default.createElement("path",{d:`M 6,1 L 6 ${f} `,fill:i,stroke:r}),d.default.createElement("text",{x:l/2,y:c/2,fill:a,textAnchor:"middle",alignmentBaseline:"middle",fontSize:s},o),"Sorry, your browser does not support inline SVG.")},TextNode:e=>{const{size:t={width:DO,height:IO},data:n={}}=e,{label:r=FO.label,fontFill:o=FO.fontFill,fontSize:i=FO.fontSize}=n,{width:a,height:s}=t;return d.default.createElement("svg",{viewBox:`0 0 ${a/2} ${s/2}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},d.default.createElement("text",{x:a/4,y:s/4,fill:o,textAnchor:"middle",alignmentBaseline:"middle",fontSize:i},r),"Sorry, your browser does not support inline SVG.")}});const BO=e=>({position:{name:e},attrs:{circle:{r:4,magnet:!0,stroke:"#31d0c6",strokeWidth:2,fill:"#fff",style:{visibility:"hidden"}}},zIndex:10}),UO=(e=["top","right","bottom","left"])=>({items:e.map((e=>({group:e,id:Vr()}))),groups:{top:BO("top"),right:BO("right"),bottom:BO("bottom"),left:BO("left")}}),VO=e=>w(void 0,void 0,void 0,(function*(){const t=(e=>(e||[]).map((e=>{const{name:t,popover:n,label:r="",width:o=IO,height:i=IO,ports:a}=e;return{id:Vr(),renderKey:t,name:t,label:r,popoverContent:n,width:o,height:i,ports:a||UO(),originData:Object.assign({},e),isCustom:!0}})))(e);return[...t,...GO.map((({name:e,ports:t,width:n=DO,height:r=IO,label:o=""})=>({id:Vr(),renderKey:e,name:e,label:o,popoverContent:()=>e,width:n,height:r,ports:UO(t)})))]})),zO=(e,t=[])=>{(null==t?void 0:t.length)&&t.forEach((t=>{const{name:n,component:r}=t;e.setNodeRender(n,r)})),e.nodeRender.get("Terminal")||GO.forEach((t=>{e.setNodeRender(t.name,HO[`${t.name.replace(/\s+/g,"")}Node`])}))},YO=(e,t=0,n=0)=>{if(!e.length)return null;let r="";return e.forEach((e=>{const[o,i,s,l,c]=e;r+=a.isNumber(s)?` ${o} ${i+t} ${s+n}`:` ${o}`,c&&(r+=` ${l+t} ${c+n}`)})),r},$O={config:{}},WO=e=>{var t;return null===(t=$O.config)||void 0===t?void 0:t[e]},KO=new Map,qO=new Map,XO=()=>KO.get("x6graph"),ZO=()=>w(void 0,void 0,void 0,(function*(){return qO.get("app").getGraphData()})),JO=a.debounce((e=>{const t=WO("onConfigChange");if(t&&"function"==typeof t)return t(Object.assign({data:ZO()},e))}),300,{trailing:!0}),QO=(e,t)=>{const n=(e=>{var t;let n=null===(t=null==e?void 0:e.e)||void 0===t?void 0:t.currentTarget;if(!n)return document.getElementsByClassName("xflow-canvas-root");let r=null;for(;!r;){const e=n.getElementsByClassName("xflow-canvas-root");(null==e?void 0:e.length)>0&&(r=e),n=n.parentNode}return r})(t);Array.from(n).forEach((t=>{var n,r;const o=t.querySelectorAll(".x6-port-body"),i=null===(r=null===(n=XO().getSelectedCells())||void 0===n?void 0:n[0])||void 0===r?void 0:r.isNode();for(let t=0,n=o.length;t<n;t+=1)o[t].style.visibility=!i&&e?"visible":"hidden"}))},{Panel:eS}=s.Collapse,tS=e=>{const{x6NodeFactory:r,dndOptions:o,state:i,prefixClz:l,registerNode:c,defaultActiveKey:u=["official","custom"]}=e,{title:f="复制节点"}=null!=c?c:{},{graphProvider:h,modelService:p,commandService:g}=Wi(),[v,y]=d.default.useState(),[m,b]=d.default.useState();let x;h.getGraphInstance().then((e=>{b(e)})),h.getGraphOptions().then((t=>{zO(WO("graphConfig"),a.get(e,"registerNode.nodes",[])),x=t}));const _=t.useCallback((e=>w(void 0,void 0,void 0,(function*(){var t;const{ports:n}=e,r=Object.assign(Object.assign({},e),{id:`node-${Vr()}`,zIndex:10,ports:Object.assign(Object.assign({},n),{items:null===(t=n.items)||void 0===t?void 0:t.map((e=>Object.assign(Object.assign({},e),{id:Vr()})))})}),o={nodeConfig:r};yield g.executeCommand(Ki.ADD_NODE.id,o);const i=WO("onAddNode");"function"==typeof i&&i(r)}))),[g]);d.default.useEffect((()=>{if(!m)return;const e=new n.Addon.Dnd(Object.assign(Object.assign({scaled:!1,animation:!1},o),{target:m,validateNode:e=>w(void 0,void 0,void 0,(function*(){const t=Object.assign(Object.assign({},e.getData()),e.getPosition());return yield _(t),!1}))}));y(e)}),[g,o,m,p,_]);const E=d.default.useCallback((e=>t=>{if(!m||!v||!x)return;const n=x.nodeTypeParser(e),{width:o=180,height:i=40}=e,a=Yl(x.nodeRender.get(n),g,p),s={data:e,width:o,height:i,view:x.graphId,component:a},l=r?r(s):gx(s);v.start(l,t.nativeEvent)}),[g,v,m,x,p,r]),O=d.default.useCallback(((e=[])=>e.map((e=>{const{popoverContent:t}=e;return d.default.createElement(yx,{item:e,key:e.id,onMouseDown:E(e),popoverContent:t,prefixClz:l,modelService:p,commandService:g,graphConfig:x})}))),[g,x,p,E,l]),S=i.nodeList.filter((e=>e.isCustom)),C=i.nodeList.filter((e=>!e.isCustom)),k=i.searchList.filter((e=>e.isCustom)),P=i.searchList.filter((e=>!e.isCustom)),M=S.length>0;return d.default.createElement(d.default.Fragment,null,d.default.createElement("div",{className:`${l}-body`},d.default.createElement(s.Collapse,{defaultActiveKey:u,style:{border:"none"}},d.default.createElement(eS,{header:"通用节点",key:"official",style:{border:"none"}},!i.keyword&&d.default.createElement("div",{className:`${l}-official`},O(C)),i.searchList.length>0&&d.default.createElement("div",{className:`${l}-official`},O(P))),M&&d.default.createElement(eS,{header:f,key:"custom",style:{border:"none"}},!i.keyword&&d.default.createElement("div",{className:`${l}-custom`},O(S)),i.searchList.length>0&&d.default.createElement("div",{className:`${l}-custom`},O(k)))),i.keyword&&0===i.searchList.length&&d.default.createElement(s.Empty,{style:{marginTop:"48px"}})))},nS=e=>{const{prefixClz:t,onKeywordChange:n}=e,{propsProxy:r}=tx(),o=r.getValue();return d.default.createElement(d.default.Fragment,null,d.default.createElement("div",{className:`${t}-header`,style:Object.assign({zIndex:1},e.style)},o.header&&d.default.isValidElement(o.header)&&o.header,d.default.createElement("div",{className:`${t}-header-search`},d.default.createElement(s.Input,{placeholder:"搜索组件",allowClear:!0,onChange:e=>n(e.target.value),style:{width:"100%",border:0}}))))};var rS;!function(e){e.id="NODE_PANEL_DATA"}(rS||(rS={}));const oS=(e=[],t)=>w(void 0,void 0,void 0,(function*(){const n=e.filter((e=>{var n,r;return e.isDirectory||(null===(n=e.label)||void 0===n?void 0:n.includes(t))||(null===(r=e.name)||void 0===r?void 0:r.includes(t))}));return n})),iS=e=>{const{registerNode:t,searchService:n=oS}=e,{nodes:r}=null!=t?t:{},{modelService:o}=Wi(),[i,a,s]=uw({searchList:[],nodeList:[],defaultExpandAll:!1,keyword:""});d.default.useEffect((()=>{o.findDeferredModel(rS.id)||o.registerModel({id:rS.id,modelFactory:()=>s,watchChange:e=>w(void 0,void 0,void 0,(function*(){const t=yield wc.getModel(o),n=t.watch((()=>w(void 0,void 0,void 0,(function*(){const t=yield w(void 0,void 0,void 0,(function*(){return{listData:yield VO(r)}}));e.setValue({nodeList:t.listData,defaultExpandAll:!1,keyword:"",searchList:[]})}))));return jr.create((()=>{n.dispose()}))}))})}),[]);const l=d.default.useCallback((e=>w(void 0,void 0,void 0,(function*(){if(n)if(e){const t=yield n(i.nodeList,e);a((n=>{n.keyword=e,n.searchList=t}))}else a((e=>{e.keyword="",e.searchList=[]}))}))),[n,i.nodeList,a]);return{state:i,setState:a,onKeywordChange:l}},aS=e=>{const{cell:t,data:{label:n,stroke:r,fill:o,fontSize:i,fontFill:a,width:s=200,isCollapsed:l=!1}}=e,c=Wi();return d.default.createElement("div",{className:"xflow-group-node",style:{borderColor:r,backgroundColor:o,fontSize:i,color:a}},d.default.createElement("div",{className:"xflow-group-header"},d.default.createElement("div",{className:"header-left"},n),d.default.createElement("div",{className:"header-right"},l&&d.default.createElement(Ri,{onClick:()=>{c.executeCommand(Ji.COLLAPSE_GROUP.id,{nodeId:t.id,isCollapsed:!1,collapsedSize:{width:s,height:40}})}}),!l&&d.default.createElement(ki,{onClick:()=>{c.executeCommand(Ji.COLLAPSE_GROUP.id,{nodeId:t.id,isCollapsed:!0,collapsedSize:{width:s,height:40},gap:3})}}))))};var sS;!function(e){e.id="FLOWCHART_PANEL_DATA"}(sS||(sS={}));const lS=e=>{const{prefixClz:t,position:n={width:240,top:0,bottom:0,left:0},showHeader:r=!0}=e,o=y(e,["prefixClz","position","showHeader"]),{width:i=200}=n,{headerStyle:a,bodyStyle:s}=_x(e),{state:l,onKeywordChange:c}=iS(e);return d.default.createElement(d.default.Fragment,null,r&&d.default.createElement(nx,Object.assign({},o,{position:{top:0,left:0,height:40,width:i}}),d.default.createElement(nS,Object.assign({},e,{state:l,style:a,onKeywordChange:c}))),d.default.createElement(nx,Object.assign({className:`${jO}-nodes`},o,{position:Object.assign(Object.assign({},n),{top:r?40:0})}),d.default.createElement(tS,Object.assign({},e,{state:l,style:s}))))};var cS;!function(e){e.EVENT_NAME="ADD_FLOWCHART_EDGE_CMD_EVENT"}(cS||(cS={}));const uS=n.Shape.Edge.registry.register("xflow",n.Shape.Edge.define({zIndex:1,highlight:!0,name:"flowchart-connecting-edge",label:"",anchor:{name:"midSide",args:{dx:10}},attrs:{line:{stroke:"#A2B1C3",targetMarker:{name:"block",width:12,height:8},strokeDasharray:"5 5",strokeWidth:1}},data:{label:""}}),!0),dS=(fS=(e,t)=>{const{config:n={}}=t.getValue();var r;e.setEdgeTypeParser((e=>null==e?void 0:e.renderKey)),zO(e),(e=>{e.setNodeRender("GROUP_NODE_RENDER_ID",aS)})(e),r=Object.assign(Object.assign({},t.getValue()),{graphConfig:e}),$O.config=r,e.setX6Config(Object.assign({grid:!0,history:!0,resizing:{enabled:!0,minWidth:IO,minHeight:IO,preserveAspectRatio:e=>{const{data:t}=e;return LO.includes(t.name)}},snapline:{enabled:!0},connecting:{router:"manhattan",connector:{name:"rounded",args:{radius:8}},anchor:"center",connectionPoint:"anchor",allowBlank:!1,snap:{radius:20},createEdge(){const e=new uS({});return this.once("edge:connected",(e=>{const{edge:t,isNew:n}=e;if(n&&t.isEdge()){const e=t.getTargetCell();if(e&&e.isNode()){const e=t.getTargetPortId(),n=t.getSourcePortId(),r=t.getSourceCellId(),o=t.getTargetCellId();this.trigger(cS.EVENT_NAME,{targetPortId:e,sourcePortId:n,source:r,target:o,edge:t})}}})),e},validateEdge:e=>{var t;const{edge:n}=e;return!!(null===(t=null==n?void 0:n.target)||void 0===t?void 0:t.port)},validateMagnet:()=>!0,validateConnection({sourceView:e,targetView:t,targetMagnet:n}){if(e===t)return!1;const r=t.cell;if(n){const e=n.getAttribute("port"),t=r.getPort(e);return!(t&&t.connected)}}},highlighting:{nodeAvailable:{name:"className",args:{className:"available"}},magnetAvailable:{name:"className",args:{className:"available"}},magnetAdsorbed:{name:"className",args:{className:"adsorbed"}}},onPortRendered(e){const{port:t}=e,{contentSelectors:n}=e,r=n&&n.content,o=t.group,i=_r("xflow-port",{connected:t.connected});r&&h.default.render(d.default.createElement(s.ConfigProvider,{prefixCls:"ant"},d.default.createElement(s.Tooltip,{title:t.tooltip,placement:o},d.default.createElement("span",{className:i}))),r)}},n)),e.setEvents([{eventName:"node:selected",callback:()=>{QO(!1)}},{eventName:"edge:dblclick",callback:e=>{(e=>{w(void 0,void 0,void 0,(function*(){const{edge:t}=e;t&&t.addTools("vertices","ondbclick")}))})(e)}},{eventName:"edge:mouseleave",callback:(e,t)=>{((e,t)=>{w(void 0,void 0,void 0,(function*(){const{edge:n}=e;n&&n.hasTools("ondbclick")&&(t.executeCommand(qi.UPDATE_EDGE.id,{edgeConfig:Object.assign(Object.assign({},a.get(n,"data")),{vertices:n.getVertices()})}),n.removeTools())}))})(e,t)}},{eventName:"node:mouseenter",callback:e=>{QO(!0,e)}},{eventName:"node:mouseleave",callback:e=>{QO(!1,e)}},{eventName:"node:moved",callback:(e,t)=>{((e,t)=>{w(void 0,void 0,void 0,(function*(){const{node:n}=e;if(!n)return;const{data:r}=n;if(null==r?void 0:r.groupChildren){const e=XO();null==r||r.groupChildren.forEach((n=>w(void 0,void 0,void 0,(function*(){var r,o;const i=e.getCellById(n);i&&i.isNode()&&(yield t.executeCommand(Ki.UPDATE_NODE.id,{nodeConfig:Object.assign(Object.assign(Object.assign({},i.data),null===(r=i.getSize)||void 0===r?void 0:r.call(i)),null===(o=i.getPosition)||void 0===o?void 0:o.call(i))}))}))))}const o=Object.assign(Object.assign(Object.assign({},n.data),n.getPosition()),n.getSize());yield t.executeCommand(Ki.UPDATE_NODE.id,{nodeConfig:o}),JO({type:"move:node",config:o})}))})(e,t)}},{eventName:"node:resized",callback:(e,t)=>{((e,t)=>{w(void 0,void 0,void 0,(function*(){const{node:n}=e;if(!n)return;const r=Object.assign(Object.assign(Object.assign({},n.data),n.getPosition()),n.size());yield t.executeCommand(Ki.UPDATE_NODE.id,{nodeConfig:r}),JO({type:"resize:node",config:r})}))})(e,t)}}])},e=>{const t=d.default.useMemo((()=>({getValue:()=>({})})),[]);t.getValue=()=>e;const n=d.default.useMemo((()=>{const e=new aa;return fS(e,t),e}),[t]);return n});var fS;let hS=class{constructor(){this.toDispose=new Ir,this.registerHookHub=()=>w(this,void 0,void 0,(function*(){return jr.create((()=>{}))})),this.registerHook=e=>w(this,void 0,void 0,(function*(){const t=new Ir,n=[e.afterGraphInit.registerHook({name:"call add edge to replace temp edge",handler:e=>w(this,void 0,void 0,(function*(){const{commandService:t,graph:n}=e;n.on(cS.EVENT_NAME,(e=>w(this,void 0,void 0,(function*(){const n=y(e,["edge"]),r={edgeConfig:Object.assign(Object.assign({},n),{source:{cell:n.source,port:n.sourcePortId},target:{cell:n.target,port:n.targetPortId},zIndex:1,attrs:{line:{stroke:"#A2B1C3",targetMarker:{name:"block",width:12,height:8},strokeDasharray:"5 5",strokeWidth:1}},data:Object.assign({},n)})};yield t.executeCommand(qi.ADD_EDGE.id,r);const o=WO("onAddEdge");"function"==typeof o&&o(r),e.edge.remove()}))))}))})];return t.pushAll(n),jr.create((()=>{}))}))}};hS=m([tr({contrib:wl})],hS);const pS=()=>pr((e=>{e(hS)})),gS=e=>{const{position:n={top:40,left:240,right:240,bottom:0}}=e,r=dS(e),o=Wi();return t.useEffect((()=>{o&&(e=>{w(void 0,void 0,void 0,(function*(){const t=yield e.getGraphInstance();KO.set("x6graph",t),qO.set("app",e)}))})(o)}),[o]),d.default.createElement(Kc,Object.assign({},e,{config:r,position:n}),e.children)};gS.defaultProps={isXFlowCanvas:!0};const vS=e=>w(void 0,void 0,void 0,(function*(){var t;const{targetType:n}=e;return(null===(t=e.targetData)||void 0===t?void 0:t.isGroup)?{tabs:[{name:"设置",groups:[{name:"groupName",controls:[{label:"分组名",name:"group-service",shape:"group-service",placeholder:"分组名称"}]}]}]}:"node"===n?{tabs:[{name:"设置",groups:[{name:"groupName",controls:[{label:"节点名",name:"node-service",shape:"node-service",placeholder:"节点名称"}]}]}]}:"edge"===n?{tabs:[{name:"设置",groups:[{name:"groupName",controls:[{label:"边",name:"edge-service",shape:"edge-service",placeholder:"边名称"}]}]}]}:{tabs:[{name:"设置",groups:[{name:"groupName",controls:[{label:"",name:"canvas-service",shape:"canvas-service"}]}]}]}}));const yS=e=>{const{controlSchema:n,children:r,type:o="node"}=e,{commandService:i,modelService:a}=tx(),s=t.useCallback((()=>w(void 0,void 0,void 0,(function*(){const{data:e}=yield hc.useValue(a);return e}))),[a]),l=t.useCallback((()=>w(void 0,void 0,void 0,(function*(){const e=yield dc.useValue(a),t=e.getData();return Object.assign({id:e.id},t)}))),[a]),{data:c,loading:u}=function(e){const[n,r]=t.useState({loading:!0}),o=t.useCallback((()=>{e().then((e=>{r({loading:!1,data:e})}),(e=>{r({loading:!1}),console.error(e)}))}),[e]);return t.useEffect((()=>{o()}),[o]),n}("edge"===o?l:s);d.default.useEffect((()=>{i.executeCommand(Xi.SAVE_GRAPH_DATA.id,{saveGraphDataService:(e,t)=>w(void 0,void 0,void 0,(function*(){return{err:null,data:t,meta:e}}))})}),[i]);const f=e=>w(void 0,void 0,void 0,(function*(){const t=yield s(),n=Object.assign(Object.assign({},t),e);yield i.executeCommand(Ki.UPDATE_NODE.id,{nodeConfig:n}),JO({type:"update:node",config:n})})),h=(e,t="line",n)=>w(void 0,void 0,void 0,(function*(){var r;const o=yield l(),a=Object.assign(Object.assign(Object.assign({},o),n?e[n]:e),{attrs:Object.assign(Object.assign({},o.attrs),{[t]:Object.assign(Object.assign({},null===(r=o.attrs)||void 0===r?void 0:r[t]),n?e[n]:e)})});yield i.executeCommand(qi.UPDATE_EDGE.id,{edgeConfig:a}),JO({type:"update:edge",config:a})})),p=e=>w(void 0,void 0,void 0,(function*(){const t=yield s(),n=Object.assign(Object.assign({},t),e);yield i.executeCommand(Ki.UPDATE_NODE.id,{nodeConfig:n}),JO({type:"update:group",config:n})}));return u?null:d.default.createElement(oO,{schema:n},(()=>r(Object.assign({},c),{updateNode:f,updateEdge:h,updateGroup:p})))},mS="flowchart-editor",bS={attrs:{line:{stroke:"#A2B1C3",strokeWidth:1},text:{fill:"#000",fontSize:12,textAnchor:"middle",textVerticalAnchor:"middle"}}},wS={width:12,height:8,name:"block"},xS={width:0,height:0,name:""},_S={target:{sourceMarker:xS,targetMarker:wS},source:{sourceMarker:wS,targetMarker:xS},all:{sourceMarker:wS,targetMarker:wS},none:{sourceMarker:xS,targetMarker:xS}},ES={solid:[0,0],dash:[5,5]},OS=e=>{const{label:t="标签",value:n,onChange:r}=e;return d.default.createElement("div",{className:"group"},d.default.createElement("label",null,t),d.default.createElement(s.Input,{value:n,style:{height:24},onChange:e=>{null==r||r(e.target.value)}}))};var SS={},CS={},kS={},PS={},MS=vp,TS=Dv,AS=yp;var NS=function(e){return"string"==typeof e||!TS(e)&&AS(e)&&"[object String]"==MS(e)};var RS=function(e){return function(t,n,r){for(var o=-1,i=Object(t),a=r(t),s=a.length;s--;){var l=a[e?s:++o];if(!1===n(i[l],l,i))break}return t}}(),jS=RS,DS=wy;var IS=function(e,t){return e&&jS(e,t,DS)},FS=cE;var GS=function(e){return"function"==typeof e?e:FS},LS=IS,HS=GS;var BS=function(e,t){return e&&LS(e,HS(t))},US=vp,VS=Wy,zS=yp,YS=Function.prototype,$S=Object.prototype,WS=YS.toString,KS=$S.hasOwnProperty,qS=WS.call(Object);var XS=function(e){if(!zS(e)||"[object Object]"!=US(e))return!1;var t=VS(e);if(null===t)return!0;var n=KS.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&WS.call(n)==qS},ZS=vy;var JS=function(e,t){return function(n,r){if(null==n)return n;if(!ZS(n))return e(n,r);for(var o=n.length,i=t?o:-1,a=Object(n);(t?i--:++i<o)&&!1!==r(a[i],i,a););return n}}(IS),QS=JS,eC=vy;var tC=P_,nC=wE,rC=function(e,t){var n=-1,r=eC(e)?Array(e.length):[];return QS(e,(function(e,o,i){r[++n]=t(e,o,i)})),r},oC=Dv;var iC=function(e,t){return(oC(e)?tC:rC)(e,nC(t))};Object.defineProperty(PS,"__esModule",{value:!0}),PS.flattenNames=void 0;var aC=uC(NS),sC=uC(BS),lC=uC(XS),cC=uC(iC);function uC(e){return e&&e.__esModule?e:{default:e}}var dC=PS.flattenNames=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return(0,cC.default)(t,(function(t){Array.isArray(t)?e(t).map((function(e){return n.push(e)})):(0,lC.default)(t)?(0,sC.default)(t,(function(e,t){!0===e&&n.push(t),n.push(t+"-"+e)})):(0,aC.default)(t)&&n.push(t)})),n};PS.default=dC;var fC={};Object.defineProperty(fC,"__esModule",{value:!0}),fC.mergeClasses=void 0;var hC=vC(BS),pC=vC(Kb),gC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function vC(e){return e&&e.__esModule?e:{default:e}}var yC=fC.mergeClasses=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.default&&(0,pC.default)(e.default)||{};return t.map((function(t){var r=e[t];return r&&(0,hC.default)(r,(function(e,t){n[t]||(n[t]={}),n[t]=gC({},n[t],r[t])})),t})),n};fC.default=yC;var mC={};Object.defineProperty(mC,"__esModule",{value:!0}),mC.autoprefix=void 0;var bC,wC=(bC=BS)&&bC.__esModule?bC:{default:bC},xC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var _C={borderRadius:function(e){return{msBorderRadius:e,MozBorderRadius:e,OBorderRadius:e,WebkitBorderRadius:e,borderRadius:e}},boxShadow:function(e){return{msBoxShadow:e,MozBoxShadow:e,OBoxShadow:e,WebkitBoxShadow:e,boxShadow:e}},userSelect:function(e){return{WebkitTouchCallout:e,KhtmlUserSelect:e,MozUserSelect:e,msUserSelect:e,WebkitUserSelect:e,userSelect:e}},flex:function(e){return{WebkitBoxFlex:e,MozBoxFlex:e,WebkitFlex:e,msFlex:e,flex:e}},flexBasis:function(e){return{WebkitFlexBasis:e,flexBasis:e}},justifyContent:function(e){return{WebkitJustifyContent:e,justifyContent:e}},transition:function(e){return{msTransition:e,MozTransition:e,OTransition:e,WebkitTransition:e,transition:e}},transform:function(e){return{msTransform:e,MozTransform:e,OTransform:e,WebkitTransform:e,transform:e}},absolute:function(e){var t=e&&e.split(" ");return{position:"absolute",top:t&&t[0],right:t&&t[1],bottom:t&&t[2],left:t&&t[3]}},extend:function(e,t){var n=t[e];return n||{extend:e}}},EC=mC.autoprefix=function(e){var t={};return(0,wC.default)(e,(function(e,n){var r={};(0,wC.default)(e,(function(e,t){var n=_C[t];n?r=xC({},r,n(e)):r[t]=e})),t[n]=r})),t};mC.default=EC;var OC={};Object.defineProperty(OC,"__esModule",{value:!0}),OC.hover=void 0;var SC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},CC=function(e){return e&&e.__esModule?e:{default:e}}(d.default);function kC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PC(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function MC(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var TC=OC.hover=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var n,o,i;kC(this,r);for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];return o=i=PC(this,(n=r.__proto__||Object.getPrototypeOf(r)).call.apply(n,[this].concat(s))),i.state={hover:!1},i.handleMouseOver=function(){return i.setState({hover:!0})},i.handleMouseOut=function(){return i.setState({hover:!1})},i.render=function(){return CC.default.createElement(t,{onMouseOver:i.handleMouseOver,onMouseOut:i.handleMouseOut},CC.default.createElement(e,SC({},i.props,i.state)))},PC(i,o)}return MC(r,n),r}(CC.default.Component)};OC.default=TC;var AC={};Object.defineProperty(AC,"__esModule",{value:!0}),AC.active=void 0;var NC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},RC=function(e){return e&&e.__esModule?e:{default:e}}(d.default);function jC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function DC(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function IC(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var FC=AC.active=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var n,o,i;jC(this,r);for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];return o=i=DC(this,(n=r.__proto__||Object.getPrototypeOf(r)).call.apply(n,[this].concat(s))),i.state={active:!1},i.handleMouseDown=function(){return i.setState({active:!0})},i.handleMouseUp=function(){return i.setState({active:!1})},i.render=function(){return RC.default.createElement(t,{onMouseDown:i.handleMouseDown,onMouseUp:i.handleMouseUp},RC.default.createElement(e,NC({},i.props,i.state)))},DC(i,o)}return IC(r,n),r}(RC.default.Component)};AC.default=FC;var GC={};Object.defineProperty(GC,"__esModule",{value:!0});GC.default=function(e,t){var n={},r=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n[e]=t};return 0===e&&r("first-child"),e===t-1&&r("last-child"),(0===e||e%2==0)&&r("even"),1===Math.abs(e%2)&&r("odd"),r("nth-child",e),n},Object.defineProperty(kS,"__esModule",{value:!0}),kS.ReactCSS=kS.loop=kS.handleActive=kS.handleHover=kS.hover=void 0;var LC=YC(PS),HC=YC(fC),BC=YC(mC),UC=YC(OC),VC=YC(AC),zC=YC(GC);function YC(e){return e&&e.__esModule?e:{default:e}}kS.hover=UC.default,kS.handleHover=UC.default,kS.handleActive=VC.default,kS.loop=zC.default;var $C=kS.ReactCSS=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=(0,LC.default)(n),i=(0,HC.default)(e,o);return(0,BC.default)(i)};kS.default=$C;var WC={},KC={},qC={};Object.defineProperty(qC,"__esModule",{value:!0}),qC.calculateChange=function(e,t,n,r,o){e.preventDefault();var i=o.clientWidth,a=o.clientHeight,s="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,l="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,c=s-(o.getBoundingClientRect().left+window.pageXOffset),u=l-(o.getBoundingClientRect().top+window.pageYOffset);if("vertical"===n){var d=void 0;if(d=u<0?0:u>a?1:Math.round(100*u/a)/100,t.a!==d)return{h:t.h,s:t.s,l:t.l,a:d,source:"rgb"}}else{var f=void 0;if(r!==(f=c<0?0:c>i?1:Math.round(100*c/i)/100))return{h:t.h,s:t.s,l:t.l,a:f,source:"rgb"}}return null};var XC={},ZC={};Object.defineProperty(ZC,"__esModule",{value:!0});var JC={},QC=ZC.render=function(e,t,n,r){if("undefined"==typeof document&&!r)return null;var o=r?new r:document.createElement("canvas");o.width=2*n,o.height=2*n;var i=o.getContext("2d");return i?(i.fillStyle=e,i.fillRect(0,0,o.width,o.height),i.fillStyle=t,i.fillRect(0,0,n,n),i.translate(n,n),i.fillRect(0,0,n,n),o.toDataURL()):null};ZC.get=function(e,t,n,r){var o=e+"-"+t+"-"+n+(r?"-server":"");if(JC[o])return JC[o];var i=QC(e,t,n,r);return JC[o]=i,i},Object.defineProperty(XC,"__esModule",{value:!0}),XC.Checkboard=void 0;var ek=rk(d.default),tk=rk(kS),nk=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(ZC);function rk(e){return e&&e.__esModule?e:{default:e}}var ok=XC.Checkboard=function(e){var t=e.white,n=e.grey,r=e.size,o=e.renderers,i=e.borderRadius,a=e.boxShadow,s=(0,tk.default)({default:{grid:{borderRadius:i,boxShadow:a,absolute:"0px 0px 0px 0px",background:"url("+nk.get(t,n,r,o.canvas)+") center left"}}});return ek.default.createElement("div",{style:s.grid})};ok.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}},XC.default=ok,Object.defineProperty(KC,"__esModule",{value:!0}),KC.Alpha=void 0;var ik=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ak=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),sk=d.default,lk=fk(sk),ck=fk(kS),uk=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(qC),dk=fk(XC);function fk(e){return e&&e.__esModule?e:{default:e}}function hk(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pk(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var gk=KC.Alpha=function(e){function t(){var e,n,r;hk(this,t);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=r=pk(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleChange=function(e){var t=uk.calculateChange(e,r.props.hsl,r.props.direction,r.props.a,r.container);t&&"function"==typeof r.props.onChange&&r.props.onChange(t,e)},r.handleMouseDown=function(e){r.handleChange(e),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},r.unbindEventListeners=function(){window.removeEventListener("mousemove",r.handleChange),window.removeEventListener("mouseup",r.handleMouseUp)},pk(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),ak(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var e=this,t=this.props.rgb,n=(0,ck.default)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:100*t.a+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)"},pointer:{left:0,top:100*t.a+"%"}},overwrite:ik({},this.props.style)},{vertical:"vertical"===this.props.direction,overwrite:!0});return lk.default.createElement("div",{style:n.alpha},lk.default.createElement("div",{style:n.checkboard},lk.default.createElement(dk.default,{renderers:this.props.renderers})),lk.default.createElement("div",{style:n.gradient}),lk.default.createElement("div",{style:n.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},lk.default.createElement("div",{style:n.pointer},this.props.pointer?lk.default.createElement(this.props.pointer,this.props):lk.default.createElement("div",{style:n.slider}))))}}]),t}(sk.PureComponent||sk.Component);KC.default=gk;var vk={};Object.defineProperty(vk,"__esModule",{value:!0}),vk.EditableInput=void 0;var yk=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),mk=d.default,bk=xk(mk),wk=xk(kS);function xk(e){return e&&e.__esModule?e:{default:e}}var _k=[38,40],Ek=vk.EditableInput=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.handleBlur=function(){n.state.blurValue&&n.setState({value:n.state.blurValue,blurValue:null})},n.handleChange=function(e){n.setUpdatedValue(e.target.value,e)},n.handleKeyDown=function(e){var t,r=function(e){return Number(String(e).replace(/%/g,""))}(e.target.value);if(!isNaN(r)&&(t=e.keyCode,_k.indexOf(t)>-1)){var o=n.getArrowOffset(),i=38===e.keyCode?r+o:r-o;n.setUpdatedValue(i,e)}},n.handleDrag=function(e){if(n.props.dragLabel){var t=Math.round(n.props.value+e.movementX);t>=0&&t<=n.props.dragMax&&n.props.onChange&&n.props.onChange(n.getValueObjectWithLabel(t),e)}},n.handleMouseDown=function(e){n.props.dragLabel&&(e.preventDefault(),n.handleDrag(e),window.addEventListener("mousemove",n.handleDrag),window.addEventListener("mouseup",n.handleMouseUp))},n.handleMouseUp=function(){n.unbindEventListeners()},n.unbindEventListeners=function(){window.removeEventListener("mousemove",n.handleDrag),window.removeEventListener("mouseup",n.handleMouseUp)},n.state={value:String(e.value).toUpperCase(),blurValue:String(e.value).toUpperCase()},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),yk(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.input;e.value!==this.state.value&&(t===document.activeElement?this.setState({blurValue:String(e.value).toUpperCase()}):this.setState({value:String(e.value).toUpperCase(),blurValue:!this.state.blurValue&&String(e.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(e){return function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},this.props.label,e)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||1}},{key:"setUpdatedValue",value:function(e,t){var n=null!==this.props.label?this.getValueObjectWithLabel(e):e;this.props.onChange&&this.props.onChange(n,t);var r,o=function(e){return String(e).indexOf("%")>-1}(t.target.value);this.setState({value:o?(r=e,r+"%"):e})}},{key:"render",value:function(){var e=this,t=(0,wk.default)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return bk.default.createElement("div",{style:t.wrap},bk.default.createElement("input",{style:t.input,ref:function(t){return e.input=t},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?bk.default.createElement("span",{style:t.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),t}(mk.PureComponent||mk.Component);vk.default=Ek;var Ok={},Sk={};Object.defineProperty(Sk,"__esModule",{value:!0}),Sk.calculateChange=function(e,t,n,r){e.preventDefault();var o=r.clientWidth,i=r.clientHeight,a="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,s="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,l=a-(r.getBoundingClientRect().left+window.pageXOffset),c=s-(r.getBoundingClientRect().top+window.pageYOffset);if("vertical"===t){var u=void 0;if(c<0)u=359;else if(c>i)u=0;else{u=360*(-100*c/i+100)/100}if(n.h!==u)return{h:u,s:n.s,l:n.l,a:n.a,source:"rgb"}}else{var d=void 0;if(l<0)d=0;else if(l>o)d=359;else{d=360*(100*l/o)/100}if(n.h!==d)return{h:d,s:n.s,l:n.l,a:n.a,source:"rgb"}}return null},Object.defineProperty(Ok,"__esModule",{value:!0}),Ok.Hue=void 0;var Ck=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),kk=d.default,Pk=Ak(kk),Mk=Ak(kS),Tk=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(Sk);function Ak(e){return e&&e.__esModule?e:{default:e}}function Nk(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rk(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var jk=Ok.Hue=function(e){function t(){var e,n,r;Nk(this,t);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=r=Rk(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleChange=function(e){var t=Tk.calculateChange(e,r.props.direction,r.props.hsl,r.container);t&&"function"==typeof r.props.onChange&&r.props.onChange(t,e)},r.handleMouseDown=function(e){r.handleChange(e),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},Rk(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Ck(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.direction,n=void 0===t?"horizontal":t,r=(0,Mk.default)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:100*this.props.hsl.h/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-100*this.props.hsl.h/360+100+"%"}}},{vertical:"vertical"===n});return Pk.default.createElement("div",{style:r.hue},Pk.default.createElement("div",{className:"hue-"+n,style:r.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},Pk.default.createElement("style",null,"\n            .hue-horizontal {\n              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0\n                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to right, #f00 0%, #ff0\n                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n\n            .hue-vertical {\n              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,\n                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,\n                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n          "),Pk.default.createElement("div",{style:r.pointer},this.props.pointer?Pk.default.createElement(this.props.pointer,this.props):Pk.default.createElement("div",{style:r.slider}))))}}]),t}(kk.PureComponent||kk.Component);Ok.default=jk;var Dk={},Ik={exports:{}},Fk={},Gk="function"==typeof Symbol&&Symbol.for,Lk=Gk?Symbol.for("react.element"):60103,Hk=Gk?Symbol.for("react.portal"):60106,Bk=Gk?Symbol.for("react.fragment"):60107,Uk=Gk?Symbol.for("react.strict_mode"):60108,Vk=Gk?Symbol.for("react.profiler"):60114,zk=Gk?Symbol.for("react.provider"):60109,Yk=Gk?Symbol.for("react.context"):60110,$k=Gk?Symbol.for("react.async_mode"):60111,Wk=Gk?Symbol.for("react.concurrent_mode"):60111,Kk=Gk?Symbol.for("react.forward_ref"):60112,qk=Gk?Symbol.for("react.suspense"):60113,Xk=Gk?Symbol.for("react.suspense_list"):60120,Zk=Gk?Symbol.for("react.memo"):60115,Jk=Gk?Symbol.for("react.lazy"):60116,Qk=Gk?Symbol.for("react.block"):60121,eP=Gk?Symbol.for("react.fundamental"):60117,tP=Gk?Symbol.for("react.responder"):60118,nP=Gk?Symbol.for("react.scope"):60119;function rP(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case Lk:switch(e=e.type){case $k:case Wk:case Bk:case Vk:case Uk:case qk:return e;default:switch(e=e&&e.$$typeof){case Yk:case Kk:case Jk:case Zk:case zk:return e;default:return t}}case Hk:return t}}}function oP(e){return rP(e)===Wk}Fk.AsyncMode=$k,Fk.ConcurrentMode=Wk,Fk.ContextConsumer=Yk,Fk.ContextProvider=zk,Fk.Element=Lk,Fk.ForwardRef=Kk,Fk.Fragment=Bk,Fk.Lazy=Jk,Fk.Memo=Zk,Fk.Portal=Hk,Fk.Profiler=Vk,Fk.StrictMode=Uk,Fk.Suspense=qk,Fk.isAsyncMode=function(e){return oP(e)||rP(e)===$k},Fk.isConcurrentMode=oP,Fk.isContextConsumer=function(e){return rP(e)===Yk},Fk.isContextProvider=function(e){return rP(e)===zk},Fk.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===Lk},Fk.isForwardRef=function(e){return rP(e)===Kk},Fk.isFragment=function(e){return rP(e)===Bk},Fk.isLazy=function(e){return rP(e)===Jk},Fk.isMemo=function(e){return rP(e)===Zk},Fk.isPortal=function(e){return rP(e)===Hk},Fk.isProfiler=function(e){return rP(e)===Vk},Fk.isStrictMode=function(e){return rP(e)===Uk},Fk.isSuspense=function(e){return rP(e)===qk},Fk.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===Bk||e===Wk||e===Vk||e===Uk||e===qk||e===Xk||"object"==typeof e&&null!==e&&(e.$$typeof===Jk||e.$$typeof===Zk||e.$$typeof===zk||e.$$typeof===Yk||e.$$typeof===Kk||e.$$typeof===eP||e.$$typeof===tP||e.$$typeof===nP||e.$$typeof===Qk)},Fk.typeOf=rP;
/*
    object-assign
    (c) Sindre Sorhus
    @license MIT
    */
Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;!function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map((function(e){return t[e]}));if("0123456789"!==r.join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach((function(e){o[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(e){return!1}}()||Object.assign;Function.call.bind(Object.prototype.hasOwnProperty);function iP(){}function aP(){}aP.resetWarningCache=iP;Ik.exports=function(){function e(e,t,n,r,o,i){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:aP,resetWarningCache:iP};return n.PropTypes=n,n}();var sP=yv,lP=Dp;var cP=function(e,t,n){(void 0!==n&&!lP(e[t],n)||void 0===n&&!(t in e))&&sP(e,t,n)},uP=vy,dP=yp;var fP=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]},hP=Ov,pP=Ay;var gP=cP,vP=Dy.exports,yP=Wm,mP=Iy,bP=ib,wP=jv,xP=Dv,_P=function(e){return dP(e)&&uP(e)},EP=Iv.exports,OP=og,SP=Kh,CP=XS,kP=Jv,PP=fP,MP=function(e){return hP(e,pP(e))};var TP=fv,AP=cP,NP=RS,RP=function(e,t,n,r,o,i,a){var s=PP(e,n),l=PP(t,n),c=a.get(l);if(c)gP(e,n,c);else{var u=i?i(s,l,n+"",e,t,a):void 0,d=void 0===u;if(d){var f=xP(l),h=!f&&EP(l),p=!f&&!h&&kP(l);u=l,f||h||p?xP(s)?u=s:_P(s)?u=mP(s):h?(d=!1,u=vP(l,!0)):p?(d=!1,u=yP(l,!0)):u=[]:CP(l)||wP(l)?(u=s,wP(s)?u=MP(s):SP(s)&&!OP(s)||(u=bP(l))):d=!1}d&&(a.set(l,u),o(u,l,r,i,a),a.delete(l)),gP(e,n,u)}},jP=Kh,DP=Ay,IP=fP;var FP=function e(t,n,r,o,i){t!==n&&NP(n,(function(a,s){if(i||(i=new TP),jP(a))RP(t,n,s,r,e,o,i);else{var l=o?o(IP(t,s),a,s+"",t,n,i):void 0;void 0===l&&(l=a),AP(t,s,l)}}),DP)};var GP=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},LP=Math.max;var HP=function(e,t,n){return t=LP(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,i=LP(r.length-t,0),a=Array(i);++o<i;)a[o]=r[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=r[o];return s[t]=n(a),GP(e,this,s)}};var BP=function(e){return function(){return e}},UP=gv,VP=UP?function(e,t){return UP(e,"toString",{configurable:!0,enumerable:!1,value:BP(t),writable:!0})}:cE,zP=Date.now;var YP=function(e){var t=0,n=0;return function(){var r=zP(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}},$P=YP(VP),WP=cE,KP=HP,qP=$P;var XP=Dp,ZP=vy,JP=Lv,QP=Kh;var eM=function(e,t){return qP(KP(e,t,WP),e+"")},tM=function(e,t,n){if(!QP(n))return!1;var r=typeof t;return!!("number"==r?ZP(n)&&JP(t,n.length):"string"==r&&t in n)&&XP(n[t],e)};var nM=FP,rM=function(e){return eM((function(t,n){var r=-1,o=n.length,i=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,a&&tM(n[0],n[1],a)&&(i=o<3?void 0:i,o=1),t=Object(t);++r<o;){var s=n[r];s&&e(t,s,r,i)}return t}))}((function(e,t,n){nM(e,t,n)}));Object.defineProperty(Dk,"__esModule",{value:!0}),Dk.Raised=void 0;var oM=lM(d.default),iM=lM(Ik.exports),aM=lM(kS),sM=lM(rM);function lM(e){return e&&e.__esModule?e:{default:e}}var cM=Dk.Raised=function(e){var t=e.zDepth,n=e.radius,r=e.background,o=e.children,i=e.styles,a=void 0===i?{}:i,s=(0,aM.default)((0,sM.default)({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+t+"px "+4*t+"px rgba(0,0,0,.24)",borderRadius:n,background:r}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},a),{"zDepth-1":1===t});return oM.default.createElement("div",{style:s.wrap},oM.default.createElement("div",{style:s.bg}),oM.default.createElement("div",{style:s.content},o))};cM.propTypes={background:iM.default.string,zDepth:iM.default.oneOf([0,1,2,3,4,5]),radius:iM.default.number,styles:iM.default.object},cM.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}},Dk.default=cM;var uM={},dM=Rp,fM=Kh;var hM=function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return fM(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),dM(e,t,{leading:r,maxWait:t,trailing:o})},pM={};Object.defineProperty(pM,"__esModule",{value:!0}),pM.calculateChange=function(e,t,n){e.preventDefault();var r=n.getBoundingClientRect(),o=r.width,i=r.height,a="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,s="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,l=a-(n.getBoundingClientRect().left+window.pageXOffset),c=s-(n.getBoundingClientRect().top+window.pageYOffset);l<0?l=0:l>o?l=o:c<0?c=0:c>i&&(c=i);var u=100*l/o,d=-100*c/i+100;return{h:t.h,s:u,v:d,a:t.a,source:"rgb"}},Object.defineProperty(uM,"__esModule",{value:!0}),uM.Saturation=void 0;var gM=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),vM=d.default,yM=xM(vM),mM=xM(kS),bM=xM(hM),wM=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(pM);function xM(e){return e&&e.__esModule?e:{default:e}}var _M=uM.Saturation=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleChange=function(e){"function"==typeof n.props.onChange&&n.throttle(n.props.onChange,wM.calculateChange(e,n.props.hsl,n.container),e)},n.handleMouseDown=function(e){n.handleChange(e),window.addEventListener("mousemove",n.handleChange),window.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.throttle=(0,bM.default)((function(e,t,n){e(t,n)}),50),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),gM(t,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.style||{},n=t.color,r=t.white,o=t.black,i=t.pointer,a=t.circle,s=(0,mM.default)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-100*this.props.hsv.v+100+"%",left:100*this.props.hsv.s+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:"0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),\n            0 0 1px 2px rgba(0,0,0,.4)",borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:n,white:r,black:o,pointer:i,circle:a}},{custom:!!this.props.style});return yM.default.createElement("div",{style:s.color,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},yM.default.createElement("style",null,"\n          .saturation-white {\n            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));\n            background: linear-gradient(to right, #fff, rgba(255,255,255,0));\n          }\n          .saturation-black {\n            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));\n            background: linear-gradient(to top, #000, rgba(0,0,0,0));\n          }\n        "),yM.default.createElement("div",{style:s.white,className:"saturation-white"},yM.default.createElement("div",{style:s.black,className:"saturation-black"}),yM.default.createElement("div",{style:s.pointer},this.props.pointer?yM.default.createElement(this.props.pointer,this.props):yM.default.createElement("div",{style:s.circle}))))}}]),t}(vM.PureComponent||vM.Component);uM.default=_M;var EM={},OM={},SM=hv,CM=JS,kM=GS,PM=Dv;var MM=function(e,t){return(PM(e)?SM:CM)(e,kM(t))},TM={exports:{}};!function(e){!function(t){var n=/^\s+/,r=/\s+$/,o=0,i=t.round,a=t.min,s=t.max,l=t.random;function c(e,l){if(l=l||{},(e=e||"")instanceof c)return e;if(!(this instanceof c))return new c(e,l);var u=function(e){var o={r:0,g:0,b:0},i=1,l=null,c=null,u=null,d=!1,f=!1;"string"==typeof e&&(e=function(e){e=e.replace(n,"").replace(r,"").toLowerCase();var t,o=!1;if(k[e])e=k[e],o=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(t=F.rgb.exec(e))return{r:t[1],g:t[2],b:t[3]};if(t=F.rgba.exec(e))return{r:t[1],g:t[2],b:t[3],a:t[4]};if(t=F.hsl.exec(e))return{h:t[1],s:t[2],l:t[3]};if(t=F.hsla.exec(e))return{h:t[1],s:t[2],l:t[3],a:t[4]};if(t=F.hsv.exec(e))return{h:t[1],s:t[2],v:t[3]};if(t=F.hsva.exec(e))return{h:t[1],s:t[2],v:t[3],a:t[4]};if(t=F.hex8.exec(e))return{r:N(t[1]),g:N(t[2]),b:N(t[3]),a:I(t[4]),format:o?"name":"hex8"};if(t=F.hex6.exec(e))return{r:N(t[1]),g:N(t[2]),b:N(t[3]),format:o?"name":"hex"};if(t=F.hex4.exec(e))return{r:N(t[1]+""+t[1]),g:N(t[2]+""+t[2]),b:N(t[3]+""+t[3]),a:I(t[4]+""+t[4]),format:o?"name":"hex8"};if(t=F.hex3.exec(e))return{r:N(t[1]+""+t[1]),g:N(t[2]+""+t[2]),b:N(t[3]+""+t[3]),format:o?"name":"hex"};return!1}(e));"object"==typeof e&&(G(e.r)&&G(e.g)&&G(e.b)?(o=function(e,t,n){return{r:255*T(e,255),g:255*T(t,255),b:255*T(n,255)}}(e.r,e.g,e.b),d=!0,f="%"===String(e.r).substr(-1)?"prgb":"rgb"):G(e.h)&&G(e.s)&&G(e.v)?(l=j(e.s),c=j(e.v),o=function(e,n,r){e=6*T(e,360),n=T(n,100),r=T(r,100);var o=t.floor(e),i=e-o,a=r*(1-n),s=r*(1-i*n),l=r*(1-(1-i)*n),c=o%6;return{r:255*[r,s,a,a,l,r][c],g:255*[l,r,r,s,a,a][c],b:255*[a,a,l,r,r,s][c]}}(e.h,l,c),d=!0,f="hsv"):G(e.h)&&G(e.s)&&G(e.l)&&(l=j(e.s),u=j(e.l),o=function(e,t,n){var r,o,i;function a(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=T(e,360),t=T(t,100),n=T(n,100),0===t)r=o=i=n;else{var s=n<.5?n*(1+t):n+t-n*t,l=2*n-s;r=a(l,s,e+1/3),o=a(l,s,e),i=a(l,s,e-1/3)}return{r:255*r,g:255*o,b:255*i}}(e.h,l,u),d=!0,f="hsl"),e.hasOwnProperty("a")&&(i=e.a));return i=M(i),{ok:d,format:e.format||f,r:a(255,s(o.r,0)),g:a(255,s(o.g,0)),b:a(255,s(o.b,0)),a:i}}(e);this._originalInput=e,this._r=u.r,this._g=u.g,this._b=u.b,this._a=u.a,this._roundA=i(100*this._a)/100,this._format=l.format||u.format,this._gradientType=l.gradientType,this._r<1&&(this._r=i(this._r)),this._g<1&&(this._g=i(this._g)),this._b<1&&(this._b=i(this._b)),this._ok=u.ok,this._tc_id=o++}function u(e,t,n){e=T(e,255),t=T(t,255),n=T(n,255);var r,o,i=s(e,t,n),l=a(e,t,n),c=(i+l)/2;if(i==l)r=o=0;else{var u=i-l;switch(o=c>.5?u/(2-i-l):u/(i+l),i){case e:r=(t-n)/u+(t<n?6:0);break;case t:r=(n-e)/u+2;break;case n:r=(e-t)/u+4}r/=6}return{h:r,s:o,l:c}}function d(e,t,n){e=T(e,255),t=T(t,255),n=T(n,255);var r,o,i=s(e,t,n),l=a(e,t,n),c=i,u=i-l;if(o=0===i?0:u/i,i==l)r=0;else{switch(i){case e:r=(t-n)/u+(t<n?6:0);break;case t:r=(n-e)/u+2;break;case n:r=(e-t)/u+4}r/=6}return{h:r,s:o,v:c}}function f(e,t,n,r){var o=[R(i(e).toString(16)),R(i(t).toString(16)),R(i(n).toString(16))];return r&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function h(e,t,n,r){return[R(D(r)),R(i(e).toString(16)),R(i(t).toString(16)),R(i(n).toString(16))].join("")}function p(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.s-=t/100,n.s=A(n.s),c(n)}function g(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.s+=t/100,n.s=A(n.s),c(n)}function v(e){return c(e).desaturate(100)}function y(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.l+=t/100,n.l=A(n.l),c(n)}function m(e,t){t=0===t?0:t||10;var n=c(e).toRgb();return n.r=s(0,a(255,n.r-i(-t/100*255))),n.g=s(0,a(255,n.g-i(-t/100*255))),n.b=s(0,a(255,n.b-i(-t/100*255))),c(n)}function b(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.l-=t/100,n.l=A(n.l),c(n)}function w(e,t){var n=c(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,c(n)}function x(e){var t=c(e).toHsl();return t.h=(t.h+180)%360,c(t)}function _(e){var t=c(e).toHsl(),n=t.h;return[c(e),c({h:(n+120)%360,s:t.s,l:t.l}),c({h:(n+240)%360,s:t.s,l:t.l})]}function E(e){var t=c(e).toHsl(),n=t.h;return[c(e),c({h:(n+90)%360,s:t.s,l:t.l}),c({h:(n+180)%360,s:t.s,l:t.l}),c({h:(n+270)%360,s:t.s,l:t.l})]}function O(e){var t=c(e).toHsl(),n=t.h;return[c(e),c({h:(n+72)%360,s:t.s,l:t.l}),c({h:(n+216)%360,s:t.s,l:t.l})]}function S(e,t,n){t=t||6,n=n||30;var r=c(e).toHsl(),o=360/n,i=[c(e)];for(r.h=(r.h-(o*t>>1)+720)%360;--t;)r.h=(r.h+o)%360,i.push(c(r));return i}function C(e,t){t=t||6;for(var n=c(e).toHsv(),r=n.h,o=n.s,i=n.v,a=[],s=1/t;t--;)a.push(c({h:r,s:o,v:i})),i=(i+s)%1;return a}c.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,n,r,o=this.toRgb();return e=o.r/255,n=o.g/255,r=o.b/255,.2126*(e<=.03928?e/12.92:t.pow((e+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:t.pow((n+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:t.pow((r+.055)/1.055,2.4))},setAlpha:function(e){return this._a=M(e),this._roundA=i(100*this._a)/100,this},toHsv:function(){var e=d(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=d(this._r,this._g,this._b),t=i(360*e.h),n=i(100*e.s),r=i(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=u(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=u(this._r,this._g,this._b),t=i(360*e.h),n=i(100*e.s),r=i(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return f(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,r,o){var a=[R(i(e).toString(16)),R(i(t).toString(16)),R(i(n).toString(16)),R(D(r))];if(o&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1))return a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0);return a.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:i(this._r),g:i(this._g),b:i(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+i(this._r)+", "+i(this._g)+", "+i(this._b)+")":"rgba("+i(this._r)+", "+i(this._g)+", "+i(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:i(100*T(this._r,255))+"%",g:i(100*T(this._g,255))+"%",b:i(100*T(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+i(100*T(this._r,255))+"%, "+i(100*T(this._g,255))+"%, "+i(100*T(this._b,255))+"%)":"rgba("+i(100*T(this._r,255))+"%, "+i(100*T(this._g,255))+"%, "+i(100*T(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(P[f(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+h(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var o=c(e);n="#"+h(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return c(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(y,arguments)},brighten:function(){return this._applyModification(m,arguments)},darken:function(){return this._applyModification(b,arguments)},desaturate:function(){return this._applyModification(p,arguments)},saturate:function(){return this._applyModification(g,arguments)},greyscale:function(){return this._applyModification(v,arguments)},spin:function(){return this._applyModification(w,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(S,arguments)},complement:function(){return this._applyCombination(x,arguments)},monochromatic:function(){return this._applyCombination(C,arguments)},splitcomplement:function(){return this._applyCombination(O,arguments)},triad:function(){return this._applyCombination(_,arguments)},tetrad:function(){return this._applyCombination(E,arguments)}},c.fromRatio=function(e,t){if("object"==typeof e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="a"===r?e[r]:j(e[r]));e=n}return c(e,t)},c.equals=function(e,t){return!(!e||!t)&&c(e).toRgbString()==c(t).toRgbString()},c.random=function(){return c.fromRatio({r:l(),g:l(),b:l()})},c.mix=function(e,t,n){n=0===n?0:n||50;var r=c(e).toRgb(),o=c(t).toRgb(),i=n/100;return c({r:(o.r-r.r)*i+r.r,g:(o.g-r.g)*i+r.g,b:(o.b-r.b)*i+r.b,a:(o.a-r.a)*i+r.a})},c.readability=function(e,n){var r=c(e),o=c(n);return(t.max(r.getLuminance(),o.getLuminance())+.05)/(t.min(r.getLuminance(),o.getLuminance())+.05)},c.isReadable=function(e,t,n){var r,o,i=c.readability(e,t);switch(o=!1,(r=function(e){var t,n;t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==n&&"large"!==n&&(n="small");return{level:t,size:n}}(n)).level+r.size){case"AAsmall":case"AAAlarge":o=i>=4.5;break;case"AAlarge":o=i>=3;break;case"AAAsmall":o=i>=7}return o},c.mostReadable=function(e,t,n){var r,o,i,a,s=null,l=0;o=(n=n||{}).includeFallbackColors,i=n.level,a=n.size;for(var u=0;u<t.length;u++)(r=c.readability(e,t[u]))>l&&(l=r,s=c(t[u]));return c.isReadable(e,s,{level:i,size:a})||!o?s:(n.includeFallbackColors=!1,c.mostReadable(e,["#fff","#000"],n))};var k=c.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},P=c.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(k);function M(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function T(e,n){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var r=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=a(n,s(0,parseFloat(e))),r&&(e=parseInt(e*n,10)/100),t.abs(e-n)<1e-6?1:e%n/parseFloat(n)}function A(e){return a(1,s(0,e))}function N(e){return parseInt(e,16)}function R(e){return 1==e.length?"0"+e:""+e}function j(e){return e<=1&&(e=100*e+"%"),e}function D(e){return t.round(255*parseFloat(e)).toString(16)}function I(e){return N(e)/255}var F=function(){var e="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",t="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?",n="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?";return{CSS_UNIT:new RegExp(e),rgb:new RegExp("rgb"+t),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+t),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+t),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function G(e){return!!F.CSS_UNIT.exec(e)}e.exports?e.exports=c:window.tinycolor=c}(Math)}(TM),Object.defineProperty(OM,"__esModule",{value:!0}),OM.red=void 0;var AM=RM(MM),NM=RM(TM.exports);function RM(e){return e&&e.__esModule?e:{default:e}}OM.default={simpleCheckForValidColor:function(e){var t=0,n=0;return(0,AM.default)(["r","g","b","a","h","s","l","v"],(function(r){if(e[r]&&(t+=1,isNaN(e[r])||(n+=1),"s"===r||"l"===r)){/^\d+%$/.test(e[r])&&(n+=1)}})),t===n&&e},toState:function(e,t){var n=e.hex?(0,NM.default)(e.hex):(0,NM.default)(e),r=n.toHsl(),o=n.toHsv(),i=n.toRgb(),a=n.toHex();return 0===r.s&&(r.h=t||0,o.h=t||0),{hsl:r,hex:"000000"===a&&0===i.a?"transparent":"#"+a,rgb:i,hsv:o,oldHue:e.h||t||r.h,source:e.source}},isValidHex:function(e){var t="#"===String(e).charAt(0)?1:0;return e.length!==4+t&&e.length<7+t&&(0,NM.default)(e).isValid()},getContrastingColor:function(e){if(!e)return"#fff";var t=this.toState(e);return"transparent"===t.hex?"rgba(0,0,0,0.4)":(299*t.rgb.r+587*t.rgb.g+114*t.rgb.b)/1e3>=128?"#000":"#fff"}},OM.red={hsl:{a:1,h:0,l:.5,s:1},hex:"#ff0000",rgb:{r:255,g:0,b:0,a:1},hsv:{h:0,s:1,v:1,a:1}},Object.defineProperty(EM,"__esModule",{value:!0}),EM.ColorWrap=void 0;var jM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},DM=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),IM=d.default,FM=HM(IM),GM=HM(Rp),LM=HM(OM);function HM(e){return e&&e.__esModule?e:{default:e}}var BM=EM.ColorWrap=function(e){var t=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.handleChange=function(e,n){if(LM.default.simpleCheckForValidColor(e)){var r=LM.default.toState(e,e.h||t.state.oldHue);t.setState(r),t.props.onChangeComplete&&t.debounce(t.props.onChangeComplete,r,n),t.props.onChange&&t.props.onChange(r,n)}},t.handleSwatchHover=function(e,n){if(LM.default.simpleCheckForValidColor(e)){var r=LM.default.toState(e,e.h||t.state.oldHue);t.setState(r),t.props.onSwatchHover&&t.props.onSwatchHover(r,n)}},t.state=jM({},LM.default.toState(e.color,0)),t.debounce=(0,GM.default)((function(e,t,n){e(t,n)}),100),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),DM(n,[{key:"componentWillReceiveProps",value:function(e){this.setState(jM({},LM.default.toState(e.color,this.state.oldHue)))}},{key:"render",value:function(){var t={};return this.props.onSwatchHover&&(t.onSwatchHover=this.handleSwatchHover),FM.default.createElement(e,jM({},this.props,this.state,{onChange:this.handleChange},t))}}]),n}(IM.PureComponent||IM.Component);return t.propTypes=jM({},e.propTypes),t.defaultProps=jM({},e.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),t};EM.default=BM;var UM={},VM={};Object.defineProperty(VM,"__esModule",{value:!0}),VM.handleFocus=void 0;var zM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},YM=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),$M=function(e){return e&&e.__esModule?e:{default:e}}(d.default);function WM(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function KM(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function qM(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}VM.handleFocus=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var e,t,n;WM(this,r);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=n=KM(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(i))),n.state={focus:!1},n.handleFocus=function(){return n.setState({focus:!0})},n.handleBlur=function(){return n.setState({focus:!1})},KM(n,t)}return qM(r,n),YM(r,[{key:"render",value:function(){return $M.default.createElement(t,{onFocus:this.handleFocus,onBlur:this.handleBlur},$M.default.createElement(e,zM({},this.props,this.state)))}}]),r}($M.default.Component)},Object.defineProperty(UM,"__esModule",{value:!0}),UM.Swatch=void 0;var XM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ZM=tT(d.default),JM=tT(kS),QM=VM,eT=tT(XC);function tT(e){return e&&e.__esModule?e:{default:e}}var nT=UM.Swatch=function(e){var t=e.color,n=e.style,r=e.onClick,o=void 0===r?function(){}:r,i=e.onHover,a=e.title,s=void 0===a?t:a,l=e.children,c=e.focus,u=e.focusStyle,d=void 0===u?{}:u,f="transparent"===t,h=(0,JM.default)({default:{swatch:XM({background:t,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},n,c?d:{})}}),p={};return i&&(p.onMouseOver=function(e){return i(t,e)}),ZM.default.createElement("div",XM({style:h.swatch,onClick:function(e){return o(t,e)},title:s,tabIndex:0,onKeyDown:function(e){return 13===e.keyCode&&o(t,e)}},p),l,f&&ZM.default.createElement(eT.default,{borderRadius:h.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};UM.default=(0,QM.handleFocus)(nT),function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=KC;Object.defineProperty(e,"Alpha",{enumerable:!0,get:function(){return c(t).default}});var n=XC;Object.defineProperty(e,"Checkboard",{enumerable:!0,get:function(){return c(n).default}});var r=vk;Object.defineProperty(e,"EditableInput",{enumerable:!0,get:function(){return c(r).default}});var o=Ok;Object.defineProperty(e,"Hue",{enumerable:!0,get:function(){return c(o).default}});var i=Dk;Object.defineProperty(e,"Raised",{enumerable:!0,get:function(){return c(i).default}});var a=uM;Object.defineProperty(e,"Saturation",{enumerable:!0,get:function(){return c(a).default}});var s=EM;Object.defineProperty(e,"ColorWrap",{enumerable:!0,get:function(){return c(s).default}});var l=UM;function c(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"Swatch",{enumerable:!0,get:function(){return c(l).default}})}(WC);var rT={};Object.defineProperty(rT,"__esModule",{value:!0}),rT.AlphaPointer=void 0;var oT=aT(d.default),iT=aT(kS);function aT(e){return e&&e.__esModule?e:{default:e}}var sT=rT.AlphaPointer=function(e){var t=e.direction,n=(0,iT.default)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===t});return oT.default.createElement("div",{style:n.picker})};rT.default=sT,Object.defineProperty(CS,"__esModule",{value:!0}),CS.AlphaPicker=void 0;var lT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cT=hT(d.default),uT=hT(kS),dT=WC,fT=hT(rT);function hT(e){return e&&e.__esModule?e:{default:e}}var pT=CS.AlphaPicker=function(e){var t=e.rgb,n=e.hsl,r=e.width,o=e.height,i=e.onChange,a=e.direction,s=e.style,l=e.renderers,c=e.pointer,u=e.className,d=void 0===u?"":u,f=(0,uT.default)({default:{picker:{position:"relative",width:r,height:o},alpha:{radius:"2px",style:s}}});return cT.default.createElement("div",{style:f.picker,className:"alpha-picker "+d},cT.default.createElement(dT.Alpha,lT({},f.alpha,{rgb:t,hsl:n,pointer:c,renderers:l,onChange:i,direction:a})))};pT.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:fT.default},CS.default=(0,dT.ColorWrap)(pT);var gT={},vT={};Object.defineProperty(vT,"__esModule",{value:!0}),vT.BlockSwatches=void 0;var yT=xT(d.default),mT=xT(kS),bT=xT(iC),wT=WC;function xT(e){return e&&e.__esModule?e:{default:e}}var _T=vT.BlockSwatches=function(e){var t=e.colors,n=e.onClick,r=e.onSwatchHover,o=(0,mT.default)({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return yT.default.createElement("div",{style:o.swatches},(0,bT.default)(t,(function(e){return yT.default.createElement(wT.Swatch,{key:e,color:e,style:o.swatch,onClick:n,onHover:r,focusStyle:{boxShadow:"0 0 4px "+e}})})),yT.default.createElement("div",{style:o.clear}))};vT.default=_T,Object.defineProperty(gT,"__esModule",{value:!0}),gT.Block=void 0;var ET=TT(d.default),OT=TT(Ik.exports),ST=TT(kS),CT=TT(rM),kT=TT(OM),PT=WC,MT=TT(vT);function TT(e){return e&&e.__esModule?e:{default:e}}var AT=gT.Block=function(e){var t=e.onChange,n=e.onSwatchHover,r=e.hex,o=e.colors,i=e.width,a=e.triangle,s=e.styles,l=void 0===s?{}:s,c=e.className,u=void 0===c?"":c,d="transparent"===r,f=function(e,n){kT.default.isValidHex(e)&&t({hex:e,source:"hex"},n)},h=(0,ST.default)((0,CT.default)({default:{card:{width:i,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:r,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:kT.default.getContrastingColor(r),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+r+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},l),{"hide-triangle":"hide"===a});return ET.default.createElement("div",{style:h.card,className:"block-picker "+u},ET.default.createElement("div",{style:h.triangle}),ET.default.createElement("div",{style:h.head},d&&ET.default.createElement(PT.Checkboard,{borderRadius:"6px 6px 0 0"}),ET.default.createElement("div",{style:h.label},r)),ET.default.createElement("div",{style:h.body},ET.default.createElement(MT.default,{colors:o,onClick:f,onSwatchHover:n}),ET.default.createElement(PT.EditableInput,{style:{input:h.input},value:r,onChange:f})))};AT.propTypes={width:OT.default.oneOfType([OT.default.string,OT.default.number]),colors:OT.default.arrayOf(OT.default.string),triangle:OT.default.oneOf(["top","hide"]),styles:OT.default.object},AT.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}},gT.default=(0,PT.ColorWrap)(AT);var NT={},RT={exports:{}};!function(e,t){e.exports={red:{50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},pink:{50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},purple:{50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},deepPurple:{50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},indigo:{50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},blue:{50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},lightBlue:{50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},cyan:{50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},teal:{50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},green:{50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},lightGreen:{50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},lime:{50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},yellow:{50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},amber:{50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},orange:{50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},deepOrange:{50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},brown:{50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723"},grey:{50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121"},blueGrey:{50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238"},darkText:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",dividers:"rgba(0, 0, 0, 0.12)"},lightText:{primary:"rgba(255, 255, 255, 1)",secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",dividers:"rgba(255, 255, 255, 0.12)"},darkIcons:{active:"rgba(0, 0, 0, 0.54)",inactive:"rgba(0, 0, 0, 0.38)"},lightIcons:{active:"rgba(255, 255, 255, 1)",inactive:"rgba(255, 255, 255, 0.5)"},white:"#ffffff",black:"#000000"}}(RT);var jT={};Object.defineProperty(jT,"__esModule",{value:!0}),jT.CircleSwatch=void 0;var DT=LT(d.default),IT=kS,FT=LT(IT),GT=WC;function LT(e){return e&&e.__esModule?e:{default:e}}var HT=jT.CircleSwatch=function(e){var t=e.color,n=e.onClick,r=e.onSwatchHover,o=e.hover,i=e.active,a=e.circleSize,s=e.circleSpacing,l=(0,FT.default)({default:{swatch:{width:a,height:a,marginRight:s,marginBottom:s,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+a/2+"px "+t,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+t}}},{hover:o,active:i});return DT.default.createElement("div",{style:l.swatch},DT.default.createElement(GT.Swatch,{style:l.Swatch,color:t,onClick:n,onHover:r,focusStyle:{boxShadow:l.Swatch.boxShadow+", 0 0 5px "+t}}))};HT.defaultProps={circleSize:28,circleSpacing:14},jT.default=(0,IT.handleHover)(HT),Object.defineProperty(NT,"__esModule",{value:!0}),NT.Circle=void 0;var BT=qT(d.default),UT=qT(Ik.exports),VT=qT(kS),zT=qT(iC),YT=qT(rM),$T=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(RT.exports),WT=WC,KT=qT(jT);function qT(e){return e&&e.__esModule?e:{default:e}}var XT=NT.Circle=function(e){var t=e.width,n=e.onChange,r=e.onSwatchHover,o=e.colors,i=e.hex,a=e.circleSize,s=e.styles,l=void 0===s?{}:s,c=e.circleSpacing,u=e.className,d=void 0===u?"":u,f=(0,VT.default)((0,YT.default)({default:{card:{width:t,display:"flex",flexWrap:"wrap",marginRight:-c,marginBottom:-c}}},l)),h=function(e,t){return n({hex:e,source:"hex"},t)};return BT.default.createElement("div",{style:f.card,className:"circle-picker "+d},(0,zT.default)(o,(function(e){return BT.default.createElement(KT.default,{key:e,color:e,onClick:h,onSwatchHover:r,active:i===e.toLowerCase(),circleSize:a,circleSpacing:c})})))};XT.propTypes={width:UT.default.oneOfType([UT.default.string,UT.default.number]),circleSize:UT.default.number,circleSpacing:UT.default.number,styles:UT.default.object},XT.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[$T.red[500],$T.pink[500],$T.purple[500],$T.deepPurple[500],$T.indigo[500],$T.blue[500],$T.lightBlue[500],$T.cyan[500],$T.teal[500],$T.green[500],$T.lightGreen[500],$T.lime[500],$T.yellow[500],$T.amber[500],$T.orange[500],$T.deepOrange[500],$T.brown[500],$T.blueGrey[500]],styles:{}},NT.default=(0,WT.ColorWrap)(XT);var ZT={},JT={},QT={};Object.defineProperty(QT,"__esModule",{value:!0});var eA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tA=function(e){return e&&e.__esModule?e:{default:e}}(d.default);QT.default=function(e){var t=e.fill,n=void 0===t?"currentColor":t,r=e.width,o=void 0===r?24:r,i=e.height,a=void 0===i?24:i,s=e.style,l=void 0===s?{}:s,c=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["fill","width","height","style"]);return tA.default.createElement("svg",eA({viewBox:"0 0 24 24",style:eA({fill:n,width:o,height:a},l)},c),tA.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},Object.defineProperty(JT,"__esModule",{value:!0}),JT.ChromeFields=void 0;var nA=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),rA=lA(d.default),oA=lA(kS),iA=lA(OM),aA=WC,sA=lA(QT);function lA(e){return e&&e.__esModule?e:{default:e}}function cA(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uA(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var dA=JT.ChromeFields=function(e){function t(){var e,n,r;cA(this,t);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=r=uA(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={view:""},r.toggleViews=function(){"hex"===r.state.view?r.setState({view:"rgb"}):"rgb"===r.state.view?r.setState({view:"hsl"}):"hsl"===r.state.view&&(1===r.props.hsl.a?r.setState({view:"hex"}):r.setState({view:"rgb"}))},r.handleChange=function(e,t){e.hex?iA.default.isValidHex(e.hex)&&r.props.onChange({hex:e.hex,source:"hex"},t):e.r||e.g||e.b?r.props.onChange({r:e.r||r.props.rgb.r,g:e.g||r.props.rgb.g,b:e.b||r.props.rgb.b,source:"rgb"},t):e.a?(e.a<0?e.a=0:e.a>1&&(e.a=1),r.props.onChange({h:r.props.hsl.h,s:r.props.hsl.s,l:r.props.hsl.l,a:Math.round(100*e.a)/100,source:"rgb"},t)):(e.h||e.s||e.l)&&("string"==typeof e.s&&e.s.includes("%")&&(e.s=e.s.replace("%","")),"string"==typeof e.l&&e.l.includes("%")&&(e.l=e.l.replace("%","")),r.props.onChange({h:e.h||r.props.hsl.h,s:Number(e.s&&e.s||r.props.hsl.s),l:Number(e.l&&e.l||r.props.hsl.l),source:"hsl"},t))},r.showHighlight=function(e){e.currentTarget.style.background="#eee"},r.hideHighlight=function(e){e.currentTarget.style.background="transparent"},uA(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),nA(t,[{key:"componentDidMount",value:function(){1===this.props.hsl.a&&"hex"!==this.state.view?this.setState({view:"hex"}):"rgb"!==this.state.view&&"hsl"!==this.state.view&&this.setState({view:"rgb"})}},{key:"componentWillReceiveProps",value:function(e){1!==e.hsl.a&&"hex"===this.state.view&&this.setState({view:"rgb"})}},{key:"render",value:function(){var e=this,t=(0,oA.default)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),n=void 0;return"hex"===this.state.view?n=rA.default.createElement("div",{style:t.fields,className:"flexbox-fix"},rA.default.createElement("div",{style:t.field},rA.default.createElement(aA.EditableInput,{style:{input:t.input,label:t.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):"rgb"===this.state.view?n=rA.default.createElement("div",{style:t.fields,className:"flexbox-fix"},rA.default.createElement("div",{style:t.field},rA.default.createElement(aA.EditableInput,{style:{input:t.input,label:t.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),rA.default.createElement("div",{style:t.field},rA.default.createElement(aA.EditableInput,{style:{input:t.input,label:t.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),rA.default.createElement("div",{style:t.field},rA.default.createElement(aA.EditableInput,{style:{input:t.input,label:t.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),rA.default.createElement("div",{style:t.alpha},rA.default.createElement(aA.EditableInput,{style:{input:t.input,label:t.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):"hsl"===this.state.view&&(n=rA.default.createElement("div",{style:t.fields,className:"flexbox-fix"},rA.default.createElement("div",{style:t.field},rA.default.createElement(aA.EditableInput,{style:{input:t.input,label:t.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),rA.default.createElement("div",{style:t.field},rA.default.createElement(aA.EditableInput,{style:{input:t.input,label:t.label},label:"s",value:Math.round(100*this.props.hsl.s)+"%",onChange:this.handleChange})),rA.default.createElement("div",{style:t.field},rA.default.createElement(aA.EditableInput,{style:{input:t.input,label:t.label},label:"l",value:Math.round(100*this.props.hsl.l)+"%",onChange:this.handleChange})),rA.default.createElement("div",{style:t.alpha},rA.default.createElement(aA.EditableInput,{style:{input:t.input,label:t.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),rA.default.createElement("div",{style:t.wrap,className:"flexbox-fix"},n,rA.default.createElement("div",{style:t.toggle},rA.default.createElement("div",{style:t.icon,onClick:this.toggleViews,ref:function(t){return e.icon=t}},rA.default.createElement(sA.default,{style:t.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}]),t}(rA.default.Component);JT.default=dA;var fA={};Object.defineProperty(fA,"__esModule",{value:!0}),fA.ChromePointer=void 0;var hA=gA(d.default),pA=gA(kS);function gA(e){return e&&e.__esModule?e:{default:e}}var vA=fA.ChromePointer=function(){var e=(0,pA.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return hA.default.createElement("div",{style:e.picker})};fA.default=vA;var yA={};Object.defineProperty(yA,"__esModule",{value:!0}),yA.ChromePointerCircle=void 0;var mA=wA(d.default),bA=wA(kS);function wA(e){return e&&e.__esModule?e:{default:e}}var xA=yA.ChromePointerCircle=function(){var e=(0,bA.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return mA.default.createElement("div",{style:e.picker})};yA.default=xA,Object.defineProperty(ZT,"__esModule",{value:!0}),ZT.Chrome=void 0;var _A=TA(d.default),EA=TA(Ik.exports),OA=TA(kS),SA=TA(rM),CA=WC,kA=TA(JT),PA=TA(fA),MA=TA(yA);function TA(e){return e&&e.__esModule?e:{default:e}}var AA=ZT.Chrome=function(e){var t=e.width,n=e.onChange,r=e.disableAlpha,o=e.rgb,i=e.hsl,a=e.hsv,s=e.hex,l=e.renderers,c=e.styles,u=void 0===c?{}:c,d=e.className,f=void 0===d?"":d,h=(0,OA.default)((0,SA.default)({default:{picker:{width:t,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+o.r+", "+o.g+", "+o.b+", "+o.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},u),{disableAlpha:r});return _A.default.createElement("div",{style:h.picker,className:"chrome-picker "+f},_A.default.createElement("div",{style:h.saturation},_A.default.createElement(CA.Saturation,{style:h.Saturation,hsl:i,hsv:a,pointer:MA.default,onChange:n})),_A.default.createElement("div",{style:h.body},_A.default.createElement("div",{style:h.controls,className:"flexbox-fix"},_A.default.createElement("div",{style:h.color},_A.default.createElement("div",{style:h.swatch},_A.default.createElement("div",{style:h.active}),_A.default.createElement(CA.Checkboard,{renderers:l}))),_A.default.createElement("div",{style:h.toggles},_A.default.createElement("div",{style:h.hue},_A.default.createElement(CA.Hue,{style:h.Hue,hsl:i,pointer:PA.default,onChange:n})),_A.default.createElement("div",{style:h.alpha},_A.default.createElement(CA.Alpha,{style:h.Alpha,rgb:o,hsl:i,pointer:PA.default,renderers:l,onChange:n})))),_A.default.createElement(kA.default,{rgb:o,hsl:i,hex:s,onChange:n,disableAlpha:r})))};AA.propTypes={width:EA.default.oneOfType([EA.default.string,EA.default.number]),disableAlpha:EA.default.bool,styles:EA.default.object},AA.defaultProps={width:225,disableAlpha:!1,styles:{}},ZT.default=(0,CA.ColorWrap)(AA);var NA={},RA={};Object.defineProperty(RA,"__esModule",{value:!0}),RA.CompactColor=void 0;var jA=GA(d.default),DA=GA(kS),IA=GA(OM),FA=WC;function GA(e){return e&&e.__esModule?e:{default:e}}var LA=RA.CompactColor=function(e){var t=e.color,n=e.onClick,r=void 0===n?function(){}:n,o=e.onSwatchHover,i=e.active,a=(0,DA.default)({default:{color:{background:t,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:IA.default.getContrastingColor(t),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:i,"color-#FFFFFF":"#FFFFFF"===t,transparent:"transparent"===t});return jA.default.createElement(FA.Swatch,{style:a.color,color:t,onClick:r,onHover:o,focusStyle:{boxShadow:"0 0 4px "+t}},jA.default.createElement("div",{style:a.dot}))};RA.default=LA;var HA={};Object.defineProperty(HA,"__esModule",{value:!0}),HA.CompactFields=void 0;var BA=zA(d.default),UA=zA(kS),VA=WC;function zA(e){return e&&e.__esModule?e:{default:e}}var YA=HA.CompactFields=function(e){var t=e.hex,n=e.rgb,r=e.onChange,o=(0,UA.default)({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:t},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),i=function(e,t){e.r||e.g||e.b?r({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,source:"rgb"},t):r({hex:e.hex,source:"hex"},t)};return BA.default.createElement("div",{style:o.fields,className:"flexbox-fix"},BA.default.createElement("div",{style:o.active}),BA.default.createElement(VA.EditableInput,{style:{wrap:o.HEXwrap,input:o.HEXinput,label:o.HEXlabel},label:"hex",value:t,onChange:i}),BA.default.createElement(VA.EditableInput,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"r",value:n.r,onChange:i}),BA.default.createElement(VA.EditableInput,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"g",value:n.g,onChange:i}),BA.default.createElement(VA.EditableInput,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"b",value:n.b,onChange:i}))};HA.default=YA,Object.defineProperty(NA,"__esModule",{value:!0}),NA.Compact=void 0;var $A=tN(d.default),WA=tN(Ik.exports),KA=tN(kS),qA=tN(iC),XA=tN(rM),ZA=tN(OM),JA=WC,QA=tN(RA),eN=tN(HA);function tN(e){return e&&e.__esModule?e:{default:e}}var nN=NA.Compact=function(e){var t=e.onChange,n=e.onSwatchHover,r=e.colors,o=e.hex,i=e.rgb,a=e.styles,s=void 0===a?{}:a,l=e.className,c=void 0===l?"":l,u=(0,KA.default)((0,XA.default)({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},s)),d=function(e,n){e.hex?ZA.default.isValidHex(e.hex)&&t({hex:e.hex,source:"hex"},n):t(e,n)};return $A.default.createElement(JA.Raised,{style:u.Compact,styles:s},$A.default.createElement("div",{style:u.compact,className:"compact-picker "+c},$A.default.createElement("div",null,(0,qA.default)(r,(function(e){return $A.default.createElement(QA.default,{key:e,color:e,active:e.toLowerCase()===o,onClick:d,onSwatchHover:n})})),$A.default.createElement("div",{style:u.clear})),$A.default.createElement(eN.default,{hex:o,rgb:i,onChange:d})))};nN.propTypes={colors:WA.default.arrayOf(WA.default.string),styles:WA.default.object},nN.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}},NA.default=(0,JA.ColorWrap)(nN);var rN={},oN={};Object.defineProperty(oN,"__esModule",{value:!0}),oN.GithubSwatch=void 0;var iN=cN(d.default),aN=kS,sN=cN(aN),lN=WC;function cN(e){return e&&e.__esModule?e:{default:e}}var uN=oN.GithubSwatch=function(e){var t=e.hover,n=e.color,r=e.onClick,o=e.onSwatchHover,i={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},a=(0,sN.default)({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:i}},{hover:t});return iN.default.createElement("div",{style:a.swatch},iN.default.createElement(lN.Swatch,{color:n,onClick:r,onHover:o,focusStyle:i}))};oN.default=(0,aN.handleHover)(uN),Object.defineProperty(rN,"__esModule",{value:!0}),rN.Github=void 0;var dN=mN(d.default),fN=mN(Ik.exports),hN=mN(kS),pN=mN(iC),gN=mN(rM),vN=WC,yN=mN(oN);function mN(e){return e&&e.__esModule?e:{default:e}}var bN=rN.Github=function(e){var t=e.width,n=e.colors,r=e.onChange,o=e.onSwatchHover,i=e.triangle,a=e.styles,s=void 0===a?{}:a,l=e.className,c=void 0===l?"":l,u=(0,hN.default)((0,gN.default)({default:{card:{width:t,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},s),{"hide-triangle":"hide"===i,"top-left-triangle":"top-left"===i,"top-right-triangle":"top-right"===i,"bottom-left-triangle":"bottom-left"===i,"bottom-right-triangle":"bottom-right"===i}),d=function(e,t){return r({hex:e,source:"hex"},t)};return dN.default.createElement("div",{style:u.card,className:"github-picker "+c},dN.default.createElement("div",{style:u.triangleShadow}),dN.default.createElement("div",{style:u.triangle}),(0,pN.default)(n,(function(e){return dN.default.createElement(yN.default,{color:e,key:e,onClick:d,onSwatchHover:o})})))};bN.propTypes={width:fN.default.oneOfType([fN.default.string,fN.default.number]),colors:fN.default.arrayOf(fN.default.string),triangle:fN.default.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:fN.default.object},bN.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}},rN.default=(0,vN.ColorWrap)(bN);var wN={},xN={};Object.defineProperty(xN,"__esModule",{value:!0}),xN.SliderPointer=void 0;var _N=ON(d.default),EN=ON(kS);function ON(e){return e&&e.__esModule?e:{default:e}}var SN=xN.SliderPointer=function(e){var t=e.direction,n=(0,EN.default)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===t});return _N.default.createElement("div",{style:n.picker})};xN.default=SN,Object.defineProperty(wN,"__esModule",{value:!0}),wN.HuePicker=void 0;var CN=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kN=RN(d.default),PN=RN(Ik.exports),MN=RN(kS),TN=RN(rM),AN=WC,NN=RN(xN);function RN(e){return e&&e.__esModule?e:{default:e}}var jN=wN.HuePicker=function(e){var t=e.width,n=e.height,r=e.onChange,o=e.hsl,i=e.direction,a=e.pointer,s=e.styles,l=void 0===s?{}:s,c=e.className,u=void 0===c?"":c,d=(0,MN.default)((0,TN.default)({default:{picker:{position:"relative",width:t,height:n},hue:{radius:"2px"}}},l));return kN.default.createElement("div",{style:d.picker,className:"hue-picker "+u},kN.default.createElement(AN.Hue,CN({},d.hue,{hsl:o,pointer:a,onChange:function(e){return r({a:1,h:e.h,l:.5,s:1})},direction:i})))};jN.propTypes={styles:PN.default.object},jN.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:NN.default,styles:{}},wN.default=(0,AN.ColorWrap)(jN);var DN={};Object.defineProperty(DN,"__esModule",{value:!0}),DN.Material=void 0;var IN=BN(d.default),FN=BN(kS),GN=BN(rM),LN=BN(OM),HN=WC;function BN(e){return e&&e.__esModule?e:{default:e}}var UN=DN.Material=function(e){var t=e.onChange,n=e.hex,r=e.rgb,o=e.styles,i=void 0===o?{}:o,a=e.className,s=void 0===a?"":a,l=(0,FN.default)((0,GN.default)({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+n,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},i)),c=function(e,n){e.hex?LN.default.isValidHex(e.hex)&&t({hex:e.hex,source:"hex"},n):(e.r||e.g||e.b)&&t({r:e.r||r.r,g:e.g||r.g,b:e.b||r.b,source:"rgb"},n)};return IN.default.createElement(HN.Raised,{styles:i},IN.default.createElement("div",{style:l.material,className:"material-picker "+s},IN.default.createElement(HN.EditableInput,{style:{wrap:l.HEXwrap,input:l.HEXinput,label:l.HEXlabel},label:"hex",value:n,onChange:c}),IN.default.createElement("div",{style:l.split,className:"flexbox-fix"},IN.default.createElement("div",{style:l.third},IN.default.createElement(HN.EditableInput,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"r",value:r.r,onChange:c})),IN.default.createElement("div",{style:l.third},IN.default.createElement(HN.EditableInput,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"g",value:r.g,onChange:c})),IN.default.createElement("div",{style:l.third},IN.default.createElement(HN.EditableInput,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"b",value:r.b,onChange:c})))))};DN.default=(0,HN.ColorWrap)(UN);var VN={},zN={};Object.defineProperty(zN,"__esModule",{value:!0}),zN.PhotoshopPicker=void 0;var YN=qN(d.default),$N=qN(kS),WN=qN(OM),KN=WC;function qN(e){return e&&e.__esModule?e:{default:e}}var XN=zN.PhotoshopPicker=function(e){var t=e.onChange,n=e.rgb,r=e.hsv,o=e.hex,i=(0,$N.default)({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),a=function(e,o){e["#"]?WN.default.isValidHex(e["#"])&&t({hex:e["#"],source:"hex"},o):e.r||e.g||e.b?t({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,source:"rgb"},o):(e.h||e.s||e.v)&&t({h:e.h||r.h,s:e.s||r.s,v:e.v||r.v,source:"hsv"},o)};return YN.default.createElement("div",{style:i.fields},YN.default.createElement(KN.EditableInput,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"h",value:Math.round(r.h),onChange:a}),YN.default.createElement(KN.EditableInput,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"s",value:Math.round(100*r.s),onChange:a}),YN.default.createElement(KN.EditableInput,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"v",value:Math.round(100*r.v),onChange:a}),YN.default.createElement("div",{style:i.divider}),YN.default.createElement(KN.EditableInput,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"r",value:n.r,onChange:a}),YN.default.createElement(KN.EditableInput,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"g",value:n.g,onChange:a}),YN.default.createElement(KN.EditableInput,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"b",value:n.b,onChange:a}),YN.default.createElement("div",{style:i.divider}),YN.default.createElement(KN.EditableInput,{style:{wrap:i.HEXwrap,input:i.HEXinput,label:i.HEXlabel},label:"#",value:o.replace("#",""),onChange:a}),YN.default.createElement("div",{style:i.fieldSymbols},YN.default.createElement("div",{style:i.symbol},"°"),YN.default.createElement("div",{style:i.symbol},"%"),YN.default.createElement("div",{style:i.symbol},"%")))};zN.default=XN;var ZN={};Object.defineProperty(ZN,"__esModule",{value:!0}),ZN.PhotoshopPointerCircle=void 0;var JN=eR(d.default),QN=eR(kS);function eR(e){return e&&e.__esModule?e:{default:e}}var tR=ZN.PhotoshopPointerCircle=function(e){var t=e.hsl,n=(0,QN.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":t.l>.5});return JN.default.createElement("div",{style:n.picker})};ZN.default=tR;var nR={};Object.defineProperty(nR,"__esModule",{value:!0}),nR.PhotoshopPointerCircle=void 0;var rR=iR(d.default),oR=iR(kS);function iR(e){return e&&e.__esModule?e:{default:e}}var aR=nR.PhotoshopPointerCircle=function(){var e=(0,oR.default)({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return rR.default.createElement("div",{style:e.pointer},rR.default.createElement("div",{style:e.left},rR.default.createElement("div",{style:e.leftInside})),rR.default.createElement("div",{style:e.right},rR.default.createElement("div",{style:e.rightInside})))};nR.default=aR;var sR={};Object.defineProperty(sR,"__esModule",{value:!0}),sR.PhotoshopButton=void 0;var lR=uR(d.default),cR=uR(kS);function uR(e){return e&&e.__esModule?e:{default:e}}var dR=sR.PhotoshopButton=function(e){var t=e.onClick,n=e.label,r=e.children,o=e.active,i=(0,cR.default)({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:o});return lR.default.createElement("div",{style:i.button,onClick:t},n||r)};sR.default=dR;var fR={};Object.defineProperty(fR,"__esModule",{value:!0}),fR.PhotoshopPreviews=void 0;var hR=gR(d.default),pR=gR(kS);function gR(e){return e&&e.__esModule?e:{default:e}}var vR=fR.PhotoshopPreviews=function(e){var t=e.rgb,n=e.currentColor,r=(0,pR.default)({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+t.r+","+t.g+", "+t.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:n,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return hR.default.createElement("div",null,hR.default.createElement("div",{style:r.label},"new"),hR.default.createElement("div",{style:r.swatches},hR.default.createElement("div",{style:r.new}),hR.default.createElement("div",{style:r.current})),hR.default.createElement("div",{style:r.label},"current"))};fR.default=vR,Object.defineProperty(VN,"__esModule",{value:!0}),VN.Photoshop=void 0;var yR=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),mR=PR(d.default),bR=PR(Ik.exports),wR=PR(kS),xR=PR(rM),_R=WC,ER=PR(zN),OR=PR(ZN),SR=PR(nR),CR=PR(sR),kR=PR(fR);function PR(e){return e&&e.__esModule?e:{default:e}}var MR=VN.Photoshop=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={currentColor:e.hex},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),yR(t,[{key:"render",value:function(){var e=this.props,t=e.styles,n=void 0===t?{}:t,r=e.className,o=void 0===r?"":r,i=(0,wR.default)((0,xR.default)({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},n));return mR.default.createElement("div",{style:i.picker,className:"photoshop-picker "+o},mR.default.createElement("div",{style:i.head},this.props.header),mR.default.createElement("div",{style:i.body,className:"flexbox-fix"},mR.default.createElement("div",{style:i.saturation},mR.default.createElement(_R.Saturation,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:OR.default,onChange:this.props.onChange})),mR.default.createElement("div",{style:i.hue},mR.default.createElement(_R.Hue,{direction:"vertical",hsl:this.props.hsl,pointer:SR.default,onChange:this.props.onChange})),mR.default.createElement("div",{style:i.controls},mR.default.createElement("div",{style:i.top,className:"flexbox-fix"},mR.default.createElement("div",{style:i.previews},mR.default.createElement(kR.default,{rgb:this.props.rgb,currentColor:this.state.currentColor})),mR.default.createElement("div",{style:i.actions},mR.default.createElement(CR.default,{label:"OK",onClick:this.props.onAccept,active:!0}),mR.default.createElement(CR.default,{label:"Cancel",onClick:this.props.onCancel}),mR.default.createElement(ER.default,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),t}(mR.default.Component);MR.propTypes={header:bR.default.string,styles:bR.default.object},MR.defaultProps={header:"Color Picker",styles:{}},VN.default=(0,_R.ColorWrap)(MR);var TR={},AR={};Object.defineProperty(AR,"__esModule",{value:!0}),AR.SketchFields=void 0;var NR=IR(d.default),RR=IR(kS),jR=IR(OM),DR=WC;function IR(e){return e&&e.__esModule?e:{default:e}}var FR=AR.SketchFields=function(e){var t=e.onChange,n=e.rgb,r=e.hsl,o=e.hex,i=e.disableAlpha,a=(0,RR.default)({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:i}),s=function(e,o){e.hex?jR.default.isValidHex(e.hex)&&t({hex:e.hex,source:"hex"},o):e.r||e.g||e.b?t({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,a:n.a,source:"rgb"},o):e.a&&(e.a<0?e.a=0:e.a>100&&(e.a=100),e.a/=100,t({h:r.h,s:r.s,l:r.l,a:e.a,source:"rgb"},o))};return NR.default.createElement("div",{style:a.fields,className:"flexbox-fix"},NR.default.createElement("div",{style:a.double},NR.default.createElement(DR.EditableInput,{style:{input:a.input,label:a.label},label:"hex",value:o.replace("#",""),onChange:s})),NR.default.createElement("div",{style:a.single},NR.default.createElement(DR.EditableInput,{style:{input:a.input,label:a.label},label:"r",value:n.r,onChange:s,dragLabel:"true",dragMax:"255"})),NR.default.createElement("div",{style:a.single},NR.default.createElement(DR.EditableInput,{style:{input:a.input,label:a.label},label:"g",value:n.g,onChange:s,dragLabel:"true",dragMax:"255"})),NR.default.createElement("div",{style:a.single},NR.default.createElement(DR.EditableInput,{style:{input:a.input,label:a.label},label:"b",value:n.b,onChange:s,dragLabel:"true",dragMax:"255"})),NR.default.createElement("div",{style:a.alpha},NR.default.createElement(DR.EditableInput,{style:{input:a.input,label:a.label},label:"a",value:Math.round(100*n.a),onChange:s,dragLabel:"true",dragMax:"100"})))};AR.default=FR;var GR={};Object.defineProperty(GR,"__esModule",{value:!0}),GR.SketchPresetColors=void 0;var LR=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},HR=zR(d.default),BR=zR(Ik.exports),UR=zR(kS),VR=WC;function zR(e){return e&&e.__esModule?e:{default:e}}var YR=GR.SketchPresetColors=function(e){var t=e.colors,n=e.onClick,r=void 0===n?function(){}:n,o=e.onSwatchHover,i=(0,UR.default)({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!t||!t.length}),a=function(e,t){r({hex:e,source:"hex"},t)};return HR.default.createElement("div",{style:i.colors,className:"flexbox-fix"},t.map((function(e){var t="string"==typeof e?{color:e}:e,n=""+t.color+(t.title||"");return HR.default.createElement("div",{key:n,style:i.swatchWrap},HR.default.createElement(VR.Swatch,LR({},t,{style:i.swatch,onClick:a,onHover:o,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+t.color}})))})))};YR.propTypes={colors:BR.default.arrayOf(BR.default.oneOfType([BR.default.string,BR.default.shape({color:BR.default.string,title:BR.default.string})])).isRequired},GR.default=YR,Object.defineProperty(TR,"__esModule",{value:!0}),TR.Sketch=void 0;var $R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},WR=ej(d.default),KR=ej(Ik.exports),qR=ej(kS),XR=ej(rM),ZR=WC,JR=ej(AR),QR=ej(GR);function ej(e){return e&&e.__esModule?e:{default:e}}var tj=TR.Sketch=function(e){var t=e.width,n=e.rgb,r=e.hex,o=e.hsv,i=e.hsl,a=e.onChange,s=e.onSwatchHover,l=e.disableAlpha,c=e.presetColors,u=e.renderers,d=e.styles,f=void 0===d?{}:d,h=e.className,p=void 0===h?"":h,g=(0,qR.default)((0,XR.default)({default:$R({picker:{width:t,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+n.r+","+n.g+","+n.b+","+n.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},f),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},f),{disableAlpha:l});return WR.default.createElement("div",{style:g.picker,className:"sketch-picker "+p},WR.default.createElement("div",{style:g.saturation},WR.default.createElement(ZR.Saturation,{style:g.Saturation,hsl:i,hsv:o,onChange:a})),WR.default.createElement("div",{style:g.controls,className:"flexbox-fix"},WR.default.createElement("div",{style:g.sliders},WR.default.createElement("div",{style:g.hue},WR.default.createElement(ZR.Hue,{style:g.Hue,hsl:i,onChange:a})),WR.default.createElement("div",{style:g.alpha},WR.default.createElement(ZR.Alpha,{style:g.Alpha,rgb:n,hsl:i,renderers:u,onChange:a}))),WR.default.createElement("div",{style:g.color},WR.default.createElement(ZR.Checkboard,null),WR.default.createElement("div",{style:g.activeColor}))),WR.default.createElement(JR.default,{rgb:n,hsl:i,hex:r,onChange:a,disableAlpha:l}),WR.default.createElement(QR.default,{colors:c,onClick:a,onSwatchHover:s}))};tj.propTypes={disableAlpha:KR.default.bool,width:KR.default.oneOfType([KR.default.string,KR.default.number]),styles:KR.default.object},tj.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]},TR.default=(0,ZR.ColorWrap)(tj);var nj={},rj={},oj={};Object.defineProperty(oj,"__esModule",{value:!0}),oj.SliderSwatch=void 0;var ij=sj(d.default),aj=sj(kS);function sj(e){return e&&e.__esModule?e:{default:e}}var lj=oj.SliderSwatch=function(e){var t=e.hsl,n=e.offset,r=e.onClick,o=void 0===r?function(){}:r,i=e.active,a=e.first,s=e.last,l=(0,aj.default)({default:{swatch:{height:"12px",background:"hsl("+t.h+", 50%, "+100*n+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:i,first:a,last:s});return ij.default.createElement("div",{style:l.swatch,onClick:function(e){return o({h:t.h,s:.5,l:n,source:"hsl"},e)}})};oj.default=lj,Object.defineProperty(rj,"__esModule",{value:!0}),rj.SliderSwatches=void 0;var cj=fj(d.default),uj=fj(kS),dj=fj(oj);function fj(e){return e&&e.__esModule?e:{default:e}}var hj=rj.SliderSwatches=function(e){var t=e.onClick,n=e.hsl,r=(0,uj.default)({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),o=.1;return cj.default.createElement("div",{style:r.swatches},cj.default.createElement("div",{style:r.swatch},cj.default.createElement(dj.default,{hsl:n,offset:".80",active:Math.abs(n.l-.8)<o&&Math.abs(n.s-.5)<o,onClick:t,first:!0})),cj.default.createElement("div",{style:r.swatch},cj.default.createElement(dj.default,{hsl:n,offset:".65",active:Math.abs(n.l-.65)<o&&Math.abs(n.s-.5)<o,onClick:t})),cj.default.createElement("div",{style:r.swatch},cj.default.createElement(dj.default,{hsl:n,offset:".50",active:Math.abs(n.l-.5)<o&&Math.abs(n.s-.5)<o,onClick:t})),cj.default.createElement("div",{style:r.swatch},cj.default.createElement(dj.default,{hsl:n,offset:".35",active:Math.abs(n.l-.35)<o&&Math.abs(n.s-.5)<o,onClick:t})),cj.default.createElement("div",{style:r.swatch},cj.default.createElement(dj.default,{hsl:n,offset:".20",active:Math.abs(n.l-.2)<o&&Math.abs(n.s-.5)<o,onClick:t,last:!0})),cj.default.createElement("div",{style:r.clear}))};rj.default=hj;var pj={};Object.defineProperty(pj,"__esModule",{value:!0}),pj.SliderPointer=void 0;var gj=yj(d.default),vj=yj(kS);function yj(e){return e&&e.__esModule?e:{default:e}}var mj=pj.SliderPointer=function(){var e=(0,vj.default)({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return gj.default.createElement("div",{style:e.picker})};pj.default=mj,Object.defineProperty(nj,"__esModule",{value:!0}),nj.Slider=void 0;var bj=Cj(d.default),wj=Cj(Ik.exports),xj=Cj(kS),_j=Cj(rM),Ej=WC,Oj=Cj(rj),Sj=Cj(pj);function Cj(e){return e&&e.__esModule?e:{default:e}}var kj=nj.Slider=function(e){var t=e.hsl,n=e.onChange,r=e.pointer,o=e.styles,i=void 0===o?{}:o,a=e.className,s=void 0===a?"":a,l=(0,xj.default)((0,_j.default)({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},i));return bj.default.createElement("div",{style:l.wrap||{},className:"slider-picker "+s},bj.default.createElement("div",{style:l.hue},bj.default.createElement(Ej.Hue,{style:l.Hue,hsl:t,pointer:r,onChange:n})),bj.default.createElement("div",{style:l.swatches},bj.default.createElement(Oj.default,{hsl:t,onClick:n})))};kj.propTypes={styles:wj.default.object},kj.defaultProps={pointer:Sj.default,styles:{}},nj.default=(0,Ej.ColorWrap)(kj);var Pj={},Mj={},Tj={},Aj={};Object.defineProperty(Aj,"__esModule",{value:!0});var Nj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rj=function(e){return e&&e.__esModule?e:{default:e}}(d.default);Aj.default=function(e){var t=e.fill,n=void 0===t?"currentColor":t,r=e.width,o=void 0===r?24:r,i=e.height,a=void 0===i?24:i,s=e.style,l=void 0===s?{}:s,c=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["fill","width","height","style"]);return Rj.default.createElement("svg",Nj({viewBox:"0 0 24 24",style:Nj({fill:n,width:o,height:a},l)},c),Rj.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))},Object.defineProperty(Tj,"__esModule",{value:!0}),Tj.SwatchesColor=void 0;var jj=Lj(d.default),Dj=Lj(kS),Ij=Lj(OM),Fj=WC,Gj=Lj(Aj);function Lj(e){return e&&e.__esModule?e:{default:e}}var Hj=Tj.SwatchesColor=function(e){var t=e.color,n=e.onClick,r=void 0===n?function(){}:n,o=e.onSwatchHover,i=e.first,a=e.last,s=e.active,l=(0,Dj.default)({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:t,marginBottom:"1px"},check:{color:Ij.default.getContrastingColor(t),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:i,last:a,active:s,"color-#FFFFFF":"#FFFFFF"===t,transparent:"transparent"===t});return jj.default.createElement(Fj.Swatch,{color:t,style:l.color,onClick:r,onHover:o,focusStyle:{boxShadow:"0 0 4px "+t}},jj.default.createElement("div",{style:l.check},jj.default.createElement(Gj.default,null)))};Tj.default=Hj,Object.defineProperty(Mj,"__esModule",{value:!0}),Mj.SwatchesGroup=void 0;var Bj=Yj(d.default),Uj=Yj(kS),Vj=Yj(iC),zj=Yj(Tj);function Yj(e){return e&&e.__esModule?e:{default:e}}var $j=Mj.SwatchesGroup=function(e){var t=e.onClick,n=e.onSwatchHover,r=e.group,o=e.active,i=(0,Uj.default)({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return Bj.default.createElement("div",{style:i.group},(0,Vj.default)(r,(function(e,i){return Bj.default.createElement(zj.default,{key:e,color:e,active:e.toLowerCase()===o,first:0===i,last:i===r.length-1,onClick:t,onSwatchHover:n})})))};Mj.default=$j,Object.defineProperty(Pj,"__esModule",{value:!0}),Pj.Swatches=void 0;var Wj=nD(d.default),Kj=nD(Ik.exports),qj=nD(kS),Xj=nD(iC),Zj=nD(rM),Jj=nD(OM),Qj=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(RT.exports),eD=WC,tD=nD(Mj);function nD(e){return e&&e.__esModule?e:{default:e}}var rD=Pj.Swatches=function(e){var t=e.width,n=e.height,r=e.onChange,o=e.onSwatchHover,i=e.colors,a=e.hex,s=e.styles,l=void 0===s?{}:s,c=e.className,u=void 0===c?"":c,d=(0,qj.default)((0,Zj.default)({default:{picker:{width:t,height:n},overflow:{height:n,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},l)),f=function(e,t){Jj.default.isValidHex(e)&&r({hex:e,source:"hex"},t)};return Wj.default.createElement("div",{style:d.picker,className:"swatches-picker "+u},Wj.default.createElement(eD.Raised,null,Wj.default.createElement("div",{style:d.overflow},Wj.default.createElement("div",{style:d.body},(0,Xj.default)(i,(function(e){return Wj.default.createElement(tD.default,{key:e.toString(),group:e,active:a,onClick:f,onSwatchHover:o})})),Wj.default.createElement("div",{style:d.clear})))))};rD.propTypes={width:Kj.default.oneOfType([Kj.default.string,Kj.default.number]),height:Kj.default.oneOfType([Kj.default.string,Kj.default.number]),colors:Kj.default.arrayOf(Kj.default.arrayOf(Kj.default.string)),styles:Kj.default.object},rD.defaultProps={width:320,height:240,colors:[[Qj.red[900],Qj.red[700],Qj.red[500],Qj.red[300],Qj.red[100]],[Qj.pink[900],Qj.pink[700],Qj.pink[500],Qj.pink[300],Qj.pink[100]],[Qj.purple[900],Qj.purple[700],Qj.purple[500],Qj.purple[300],Qj.purple[100]],[Qj.deepPurple[900],Qj.deepPurple[700],Qj.deepPurple[500],Qj.deepPurple[300],Qj.deepPurple[100]],[Qj.indigo[900],Qj.indigo[700],Qj.indigo[500],Qj.indigo[300],Qj.indigo[100]],[Qj.blue[900],Qj.blue[700],Qj.blue[500],Qj.blue[300],Qj.blue[100]],[Qj.lightBlue[900],Qj.lightBlue[700],Qj.lightBlue[500],Qj.lightBlue[300],Qj.lightBlue[100]],[Qj.cyan[900],Qj.cyan[700],Qj.cyan[500],Qj.cyan[300],Qj.cyan[100]],[Qj.teal[900],Qj.teal[700],Qj.teal[500],Qj.teal[300],Qj.teal[100]],["#194D33",Qj.green[700],Qj.green[500],Qj.green[300],Qj.green[100]],[Qj.lightGreen[900],Qj.lightGreen[700],Qj.lightGreen[500],Qj.lightGreen[300],Qj.lightGreen[100]],[Qj.lime[900],Qj.lime[700],Qj.lime[500],Qj.lime[300],Qj.lime[100]],[Qj.yellow[900],Qj.yellow[700],Qj.yellow[500],Qj.yellow[300],Qj.yellow[100]],[Qj.amber[900],Qj.amber[700],Qj.amber[500],Qj.amber[300],Qj.amber[100]],[Qj.orange[900],Qj.orange[700],Qj.orange[500],Qj.orange[300],Qj.orange[100]],[Qj.deepOrange[900],Qj.deepOrange[700],Qj.deepOrange[500],Qj.deepOrange[300],Qj.deepOrange[100]],[Qj.brown[900],Qj.brown[700],Qj.brown[500],Qj.brown[300],Qj.brown[100]],[Qj.blueGrey[900],Qj.blueGrey[700],Qj.blueGrey[500],Qj.blueGrey[300],Qj.blueGrey[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}},Pj.default=(0,eD.ColorWrap)(rD);var oD={};Object.defineProperty(oD,"__esModule",{value:!0}),oD.Twitter=void 0;var iD=fD(d.default),aD=fD(Ik.exports),sD=fD(kS),lD=fD(iC),cD=fD(rM),uD=fD(OM),dD=WC;function fD(e){return e&&e.__esModule?e:{default:e}}var hD=oD.Twitter=function(e){var t=e.onChange,n=e.onSwatchHover,r=e.hex,o=e.colors,i=e.width,a=e.triangle,s=e.styles,l=void 0===s?{}:s,c=e.className,u=void 0===c?"":c,d=(0,sD.default)((0,cD.default)({default:{card:{width:i,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},l),{"hide-triangle":"hide"===a,"top-left-triangle":"top-left"===a,"top-right-triangle":"top-right"===a}),f=function(e,n){uD.default.isValidHex(e)&&t({hex:e,source:"hex"},n)};return iD.default.createElement("div",{style:d.card,className:"twitter-picker "+u},iD.default.createElement("div",{style:d.triangleShadow}),iD.default.createElement("div",{style:d.triangle}),iD.default.createElement("div",{style:d.body},(0,lD.default)(o,(function(e,t){return iD.default.createElement(dD.Swatch,{key:t,color:e,hex:e,style:d.swatch,onClick:f,onHover:n,focusStyle:{boxShadow:"0 0 4px "+e}})})),iD.default.createElement("div",{style:d.hash},"#"),iD.default.createElement(dD.EditableInput,{style:{input:d.input},value:r.replace("#",""),onChange:f}),iD.default.createElement("div",{style:d.clear})))};hD.propTypes={width:aD.default.oneOfType([aD.default.string,aD.default.number]),triangle:aD.default.oneOf(["hide","top-left","top-right"]),colors:aD.default.arrayOf(aD.default.string),styles:aD.default.object},hD.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}},oD.default=(0,dD.ColorWrap)(hD),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CustomPicker=e.TwitterPicker=e.SwatchesPicker=e.SliderPicker=e.SketchPicker=e.PhotoshopPicker=e.MaterialPicker=e.HuePicker=e.GithubPicker=e.CompactPicker=e.ChromePicker=e.default=e.CirclePicker=e.BlockPicker=e.AlphaPicker=void 0;var t=CS;Object.defineProperty(e,"AlphaPicker",{enumerable:!0,get:function(){return v(t).default}});var n=gT;Object.defineProperty(e,"BlockPicker",{enumerable:!0,get:function(){return v(n).default}});var r=NT;Object.defineProperty(e,"CirclePicker",{enumerable:!0,get:function(){return v(r).default}});var o=ZT;Object.defineProperty(e,"ChromePicker",{enumerable:!0,get:function(){return v(o).default}});var i=NA;Object.defineProperty(e,"CompactPicker",{enumerable:!0,get:function(){return v(i).default}});var a=rN;Object.defineProperty(e,"GithubPicker",{enumerable:!0,get:function(){return v(a).default}});var s=wN;Object.defineProperty(e,"HuePicker",{enumerable:!0,get:function(){return v(s).default}});var l=DN;Object.defineProperty(e,"MaterialPicker",{enumerable:!0,get:function(){return v(l).default}});var c=VN;Object.defineProperty(e,"PhotoshopPicker",{enumerable:!0,get:function(){return v(c).default}});var u=TR;Object.defineProperty(e,"SketchPicker",{enumerable:!0,get:function(){return v(u).default}});var d=nj;Object.defineProperty(e,"SliderPicker",{enumerable:!0,get:function(){return v(d).default}});var f=Pj;Object.defineProperty(e,"SwatchesPicker",{enumerable:!0,get:function(){return v(f).default}});var h=oD;Object.defineProperty(e,"TwitterPicker",{enumerable:!0,get:function(){return v(h).default}});var p=EM;Object.defineProperty(e,"CustomPicker",{enumerable:!0,get:function(){return v(p).default}});var g=v(o);function v(e){return e&&e.__esModule?e:{default:e}}e.default=g.default}(SS);var pD=t.memo((e=>{const{label:n,value:o="",onChange:i}=e,[a,l]=t.useState(!1),c=t.useRef(o),{graphProvider:u}=Wi(),f=t.useRef();u.getGraphOptions().then((e=>{f.current=e}));const h=()=>d.default.createElement("div",{className:`${mS}-pick-color-container`},d.default.createElement("div",{className:`${mS}-popover`},d.default.createElement(SS.SketchPicker,{onChange:e=>{c.current=e.hex}}),d.default.createElement("div",{className:"foolter"},d.default.createElement(s.Button,{onClick:()=>{l(!1)}},"取消"),d.default.createElement(s.Button,{type:"primary",onClick:()=>{null==i||i(c.current),l(!1)}},"确认"))));return d.default.createElement("div",{className:"group"},n&&d.default.createElement("label",null,n),d.default.createElement("div",{className:`${mS}-color-container`,onClick:()=>{l(!0)}},d.default.createElement("div",{className:`${mS}-color`,style:{backgroundColor:o,height:"100%"}})),(e=>{const t=document.getElementsByClassName(`${mS}-pick-color-container`);if(t.length&&Array.from(t).forEach((e=>{var t;null===(t=e.parentNode)||void 0===t||t.removeChild(e)})),!e)return;const n=document.createElement("div");r.render(r.createPortal(d.default.createElement(h,null),document.getElementsByTagName("body")[0]),n)})(a))}),((e,t)=>e.label===t.label&&e.value===t.value));const gD=e=>{const{label:t,value:n,onChange:r,min:o,width:i}=e;return d.default.createElement("div",{className:"group"},t&&d.default.createElement("label",null,t),d.default.createElement(s.InputNumber,{value:n,min:o,style:{width:i,height:24},onChange:e=>{null==r||r(e)}}))},vD=({value:e,onChangeItem:t,addonBefore:n})=>d.default.createElement("div",{className:"addon-before-group"},d.default.createElement(s.InputNumber,{value:e,style:{height:24,border:"none"},onChange:e=>{t(e)}}),d.default.createElement("span",null,n)),yD=e=>{const{x:t,y:n,onChange:r}=e;return d.default.createElement("div",{className:"group"},d.default.createElement("label",null,"位置"),d.default.createElement("div",{className:"split"},d.default.createElement(vD,{addonBefore:"X",value:t,onChangeItem:e=>{null==r||r("x",e)}}),d.default.createElement(vD,{addonBefore:"Y",value:n,onChangeItem:e=>{null==r||r("y",e)}})))},mD=e=>{const{width:t,height:n,onChange:r}=e;return d.default.createElement("div",{className:"group"},d.default.createElement("label",null,"尺寸"),d.default.createElement("div",{className:"split"},d.default.createElement(vD,{addonBefore:"W",value:t,onChangeItem:e=>{null==r||r("width",e)}}),d.default.createElement(vD,{addonBefore:"H",value:n,onChangeItem:e=>{null==r||r("height",e)}})))},bD=e=>{const{label:t="箭头",value:n,onChange:r,options:o=[],width:i}=e;return d.default.createElement("div",{className:"group"},d.default.createElement("label",null,t),d.default.createElement(s.Select,{size:"small",value:n,style:{width:i,height:24},getPopupContainer:e=>e.parentNode,optionFilterProp:"children",onChange:e=>{null==r||r(e)},filterOption:(e,t)=>{const{label:n=""}=t;return"string"==typeof n?n.toLowerCase().indexOf(e.toLowerCase())>=0:n.toString().indexOf(e.toLowerCase())>=0},options:o}))},wD=e=>{const{config:n,plugin:r={}}=e,{updateNode:o}=r,[i,a]=t.useState(Object.assign(Object.assign({},FO),n)),s=(e,t)=>{a(Object.assign(Object.assign({},i),{[e]:t})),o({[e]:t})};return t.useEffect((()=>{a(Object.assign(Object.assign({},FO),n))}),[n]),d.default.createElement("div",{className:`${mS}-panel-body`},d.default.createElement("div",{className:`${mS}-panel-group`},d.default.createElement("h5",null,"内容"),d.default.createElement(OS,{label:"标题",value:i.label,onChange:e=>{s("label",e)}})),d.default.createElement("div",{className:`${mS}-panel-group`},d.default.createElement("h5",null,"样式"),d.default.createElement(yD,{x:i.x,y:i.y,onChange:(e,t)=>{s(e,t)}}),d.default.createElement(mD,{width:i.width,height:i.height,onChange:(e,t)=>{s(e,t)}}),d.default.createElement(pD,{label:"填充",value:i.fill,onChange:e=>{s("fill",e)}}),d.default.createElement(pD,{label:"边框",value:i.stroke,onChange:e=>{s("stroke",e)}}),d.default.createElement("div",{className:`${mS}-node-text-style`},d.default.createElement(gD,{label:"字号",value:i.fontSize,width:68,onChange:e=>{s("fontSize",e)}}),d.default.createElement(pD,{value:i.fontFill,onChange:e=>{s("fontFill",e)}}))))},xD=e=>d.default.createElement(yS,Object.assign({},e),((t,n)=>d.default.createElement(wD,Object.assign({},e,{plugin:n,config:t})))),_D=e=>{const{config:n,plugin:r={}}=e,{updateEdge:o}=r,[i,a]=t.useState(Object.assign(Object.assign({},bS),n));t.useEffect((()=>{a(Object.assign(Object.assign({},bS),n))}),[n]);const s=(e,t="line")=>{var n;const{attrs:r={}}=i;return null===(n=r[t])||void 0===n?void 0:n[e]},l=(e,t,n="line")=>{var r,s;a("arrow"===e?Object.assign(Object.assign({},i),{attrs:Object.assign(Object.assign({},i.attrs),{[n]:Object.assign(Object.assign({},null===(r=i.attrs)||void 0===r?void 0:r[n]),t)})}):Object.assign(Object.assign({},i),{[e]:t,attrs:Object.assign(Object.assign({},i.attrs),{[n]:Object.assign(Object.assign({},null===(s=i.attrs)||void 0===s?void 0:s[n]),{[e]:t})})})),o({[e]:t},n,"arrow"===e?"arrow":"")};return d.default.createElement("div",{className:`${mS}-panel-body`},d.default.createElement("div",{className:`${mS}-panel-group`},d.default.createElement("h5",null,"内容"),d.default.createElement(OS,{label:"标签",value:i.label,onChange:e=>{l("label",e)}})),d.default.createElement("h5",{style:{marginBottom:12}},"样式"),d.default.createElement("div",{className:`${mS}-panel-group`,style:{marginBottom:0}},d.default.createElement("h5",null,"线"),d.default.createElement(bD,{label:"箭头",value:(()=>{var e,t,n,r,o;const{attrs:a={}}=i,{line:s={}}=a;return(null===(e=s.sourceMarker)||void 0===e?void 0:e.name)&&(null===(t=s.targetMarker)||void 0===t?void 0:t.name)?"all":(null===(n=s.sourceMarker)||void 0===n?void 0:n.name)||(null===(r=s.targetMarker)||void 0===r?void 0:r.name)?(null===(o=s.sourceMarker)||void 0===o?void 0:o.name)?"source":"target":"none"})(),width:"100%",options:[{label:"正向",value:"target"},{label:"逆向",value:"source"},{label:"双向",value:"all"},{label:"无",value:"none"}],onChange:e=>{l("arrow",_S[e],"line")}}),d.default.createElement("div",{className:`${mS}-edge-stroke-style`},d.default.createElement(bD,{label:"线形",width:68,value:(()=>{const{attrs:e={}}=i,{line:t={}}=e;return t.strokeDasharray?"dash":"solid"})(),options:[{label:"实线",value:"solid"},{label:"虚线",value:"dash"}],onChange:e=>{l("strokeDasharray",ES[e],"line")}}),d.default.createElement(gD,{value:s("strokeWidth"),min:1,onChange:e=>{l("strokeWidth",e,"line")}})),d.default.createElement(pD,{label:"边框",value:s("stroke"),onChange:e=>{l("stroke",e,"line")}})),d.default.createElement("div",{className:`${mS}-panel-group`},d.default.createElement("h5",null,"标签"),d.default.createElement("div",{className:`${mS}-edge-text-style`},d.default.createElement(gD,{label:"字号",min:10,width:68,value:s("fontSize","text")||12,onChange:e=>{l("fontSize",e,"text")}}),d.default.createElement(pD,{value:s("fill","text")||"#000",onChange:e=>{l("fill",e,"text")}}))))},ED=e=>d.default.createElement(yS,Object.assign({},e,{type:"edge"}),((t,n)=>d.default.createElement(_D,Object.assign({},e,{plugin:n,config:t})))),OD=e=>{const{config:n,plugin:r={}}=e,{updateGroup:o}=r,[i,a]=t.useState(Object.assign(Object.assign({},FO),n)),s=(e,t)=>{a(Object.assign(Object.assign({},i),{[e]:t})),o({[e]:t})};return t.useEffect((()=>{a(Object.assign(Object.assign({},FO),n))}),[n]),d.default.createElement("div",{className:`${mS}-panel-body`},d.default.createElement("div",{className:`${mS}-panel-group`},d.default.createElement("h5",null,"内容"),d.default.createElement(OS,{label:"标题",value:i.label,onChange:e=>{s("label",e)}})),d.default.createElement("div",{className:`${mS}-panel-group`},d.default.createElement("h5",null,"样式"),d.default.createElement(yD,{x:i.x,y:i.y,onChange:(e,t)=>{s(e,t)}}),d.default.createElement(mD,{width:i.width,height:i.height,onChange:(e,t)=>{s(e,t)}}),d.default.createElement(pD,{label:"填充",value:i.fill,onChange:e=>{s("fill",e)}}),d.default.createElement(pD,{label:"边框",value:i.stroke,onChange:e=>{s("stroke",e)}}),d.default.createElement("div",{className:`${mS}-node-text-style`},d.default.createElement(gD,{label:"字号",value:i.fontSize,width:68,onChange:e=>{s("fontSize",e)}}),d.default.createElement(pD,{value:i.fontFill,onChange:e=>{s("fontFill",e)}}))))},SD=e=>d.default.createElement(yS,Object.assign({},e),((t,n)=>d.default.createElement(OD,Object.assign({},e,{plugin:n,config:t})))),CD=()=>d.default.createElement("div",{className:`${mS}-canvas-panel`},d.default.createElement("span",null,"未选中")),kD=e=>(e.set("node-service",xD),e.set("edge-service",ED),e.set("group-service",SD),e.set("canvas-service",CD),e),PD="xflow-editor-panel-collpase";e.CanvasContextMenu=e=>{const t=!!Wi(),n=d.default.useMemo((()=>e.config?e.config:new Tw),[e.config]);return d.default.createElement(zc,{createModule:jw,config:n},t&&d.default.createElement(Gw,{config:n}))},e.CanvasMiniMap=e=>{const{nodeFillColor:t,borderColor:n="#ced4de",handlerColor:r="rgba(0,0,0,.3)",miniMapClz:o="",position:i={bottom:12,right:12},minimapOptions:a={}}=e,s=d.default.useRef(null),l=d.default.useRef(e.minimapOptions),c=d.default.useMemo((()=>new Set([o,"xflow-minimap","minimap-instacne-"+Date.now().toString()])),[o]),u=d.default.useMemo((()=>()=>w(void 0,void 0,void 0,(function*(){return Object.assign(Object.assign(Object.assign({},{grid:!1,enabled:!0,width:200,height:120,padding:8,graphOptions:{async:!0,getCellView(e){if(e.isNode())return Jw},createCellView(e){if(e.isEdge())return null}}}),l.current),{container:s.current})}))),[s]),f=Yc(i);d.default.useEffect((()=>{l.current=a}),[l,a]),d.default.useEffect((()=>{t&&Jw.setNodeFillColor(t)}),[t]),d.default.useEffect((()=>{const e=Array.from(c).reduce(((e,t)=>t?`${e}.${t}`:e),""),t=Dl(`\n      ${e} .x6-widget-minimap-viewport {\n        border: 1px solid ${n};\n        margin: 0;\n      }\n      ${e} .x6-widget-minimap-viewport-zoom {\n        border: 1px solid ${r}; \n      }\n    `);return()=>{document.head.removeChild(t)}}),[n,c,r]);const h=Array.from(c).join(" ");return d.default.createElement(zc,{config:{getConfig:u,CONFIG_TYPE:"CanvasMiniMap"},createModule:Zw},d.default.createElement("div",{ref:s,className:h,style:f}))},e.CanvasNodePortTooltip=e=>{const t=d.default.useCallback((()=>w(void 0,void 0,void 0,(function*(){return null}))),[]);return d.default.createElement(zc,{createModule:Cw,config:{CONFIG_TYPE:"CanvasNodePortTooltip",getConfig:t}},d.default.createElement(kw,Object.assign({},e)))},e.CanvasScaleToolbar=e=>{const t=Kw(e);return d.default.createElement(Yw,Object.assign({layout:"vertical"},e,{config:t,position:e.position||{top:12,right:12}}))},e.CanvasSnapline=e=>{const{color:t=_w}=e,n=Vl(),r=d.default.useMemo((()=>({CONFIG_TYPE:"CanvasSnapline",getConfig:()=>w(void 0,void 0,void 0,(function*(){return{}}))})),[]);return d.default.useEffect((()=>{const e=`xflow-snapline-${Date.now()}`;n.addContainerClassNames(e);const r=Dl(`\n    .${e} .xflow-snapline .x6-widget-snapline-horizontal, \n    .${e} .xflow-snapline .x6-widget-snapline-vertical {\n      border-color: ${t};\n    }`);return()=>{document.head.removeChild(r)}}),[t,n]),d.default.createElement(zc,{config:r,createModule:xw})},e.CanvasToolbar=Yw,e.DagGraphExtension=e=>{const t=Vl();d.default.useEffect((()=>{t.addContainerClassNames("dag-extension-container")}),[t]);const n=d.default.useMemo((()=>({CONFIG_TYPE:"DAG_EXTENSION",getConfig:()=>w(void 0,void 0,void 0,(function*(){return e}))})),[e]);return d.default.createElement(zc,{config:n,createModule:CO})},e.FlowGraphExtension=()=>{const e=Vl(),t=d.default.useMemo((()=>({CONFIG_TYPE:"DAG_EXTENSION",getConfig:()=>w(void 0,void 0,void 0,(function*(){}))})),[]);return d.default.useEffect((()=>{const n=e.addExtension({config:t,createModule:RO});return e.addContainerClassNames("flow-extension-container"),()=>{n.dispose()}}),[t,e]),null},e.FlowchartCanvas=gS,e.FlowchartExtension=()=>{const e=Vl(),t=d.default.useMemo((()=>({CONFIG_TYPE:"FLOWCHART_EXTENSION",getConfig:()=>w(void 0,void 0,void 0,(function*(){}))})),[]);return d.default.useEffect((()=>{const n=e.addExtension({config:t,createModule:pS});return e.addContainerClassNames("flowchart-extension-container"),()=>{n.dispose()}}),[t,e]),null},e.FlowchartFormPanel=e=>{const[n,r]=t.useState(!1),{controlMapService:o=kD,formSchemaService:i=vS,position:a={width:240,top:0,bottom:0,right:0},show:s=!0}=e,l=y(e,["controlMapService","formSchemaService","position","show"]);if(!s)return null;const{width:c=200,right:u}=a;return d.default.createElement(nx,{className:PD,position:Object.assign(Object.assign({},a),{right:n?-c:u})},d.default.createElement("div",{className:`${PD}-wrapper`},d.default.createElement(wO,Object.assign({targetType:["node","edge","canvas","group"],controlMapService:o,formSchemaService:i,position:Object.assign(Object.assign({},a),{top:0}),prefixClz:"xflow-form-editor"},l)),d.default.createElement("div",{className:`${PD}-icon`,style:{top:21,left:n?-20:-10,borderRadius:n?"50% 0 0  50%":"50%",borderRight:n?"none":""},onClick:()=>{r(!n)}},n?d.default.createElement(ci,null):d.default.createElement(fi,null))))},e.FlowchartFormWrapper=yS,e.FlowchartNodePanel=e=>{const n=Uc("node-panel"),[r,o]=t.useState(!1),{show:i=!0,position:a={width:240,top:40,bottom:0,left:0}}=e,s=y(e,["show","position"]);if(!i)return null;const{width:l=200,left:c}=a;return d.default.createElement(nx,{className:jO,position:Object.assign(Object.assign({},a),{left:r?-l:c})},d.default.createElement("div",{className:`${jO}-wrapper`},d.default.createElement(nx,Object.assign({className:n},s,{position:{top:0,bottom:0,left:0,right:0}}),d.default.createElement(lS,Object.assign({},e,{prefixClz:n,position:a}))),d.default.createElement("div",{className:`${jO}-icon`,style:{top:21,right:r?-20:-10,borderRadius:r?"0 50% 50% 0":"50%",borderLeft:r?"none":""},onClick:()=>{o(!r)}},r?d.default.createElement(fi,null):d.default.createElement(ci,null))))},e.FormBuilder=function(e){const{className:t,layout:n,initialValues:r,form:o,formItems:i=[],onFinish:a,submitButton:l,buttonProps:c}=e;if(!o)return null;const u="vertical"===n?{padding:"0px 12px"}:{padding:"8px 12px"};return d.default.createElement(s.Form,{size:"small",form:o,style:u,layout:n,onFinish:a,className:t,initialValues:r,labelCol:"vertical"===n?{span:24}:{span:8},wrapperCol:"vertical"===n?{span:24}:{span:16}},i.map((e=>d.default.createElement(s.Form.Item,Object.assign({label:e.label,name:e.name,rules:e.rules},e.itemProps),d.default.createElement(e.render,e.renderProps)))),d.default.createElement(s.Form.Item,{wrapperCol:{offset:0,span:24}},l||d.default.createElement(s.Button,Object.assign({type:"primary",htmlType:"submit",style:{width:"100%"}},c),"执行命令")))},e.FormItemWrapper=oO,e.JsonSchemaForm=wO,e.NodeCollapsePanel=e=>{const t=Uc("collapse-panel");return d.default.createElement(nx,Object.assign({},e,{className:t}),d.default.createElement(QE,Object.assign({},e,{prefixClz:t})))},e.NodeTreePanel=e=>{const t=Uc("node-dnd-panel");return d.default.createElement(nx,Object.assign({},e,{className:t}),d.default.createElement(UE,Object.assign({},e,{prefixClz:t})))},e.NsJsonSchemaForm=fO,e.NsNodeCollapsePanel=ZE,e.NsNodeTreePanel=BE,e.WorkspacePanel=nx,e.createCtxMenuConfig=e=>t=>{const n=d.default.useMemo((()=>({getValue:()=>({})})),[]);n.getValue=()=>t;const r=d.default.useMemo((()=>{const t=new Tw;return e(t,n),t}),[n]);return r},e.createToolbarConfig=$w,e.executeJsonSchemaFormCommand=(t,n)=>{t.executeCommand(Zi.UPDATE_MODEL.id,{getModel:t=>w(void 0,void 0,void 0,(function*(){return e.NsJsonSchemaFormModel.useModel(t)})),updateModel:n})},e.randomInt=function(e,t){return Math.floor(Math.random()*(t-e)+e)},e.usePanelContext=tx,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=index.umd.js.map
